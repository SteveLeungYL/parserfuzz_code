use mysql;
SET @old_log_output = @@global.log_output;
SET GLOBAL log_output="FILE,TABLE";
truncate table general_log;
select * from general_log;
truncate table slow_log;
select * from slow_log;
alter table mysql.general_log engine=myisam;
alter table mysql.slow_log engine=myisam;
drop table mysql.general_log;
drop table mysql.slow_log;
set global general_log='OFF';
alter table mysql.slow_log engine=myisam;
set global slow_query_log='OFF';
show create table mysql.general_log;
show create table mysql.slow_log;
alter table mysql.general_log engine=myisam;
alter table mysql.slow_log engine=myisam;
show create table mysql.general_log;
show create table mysql.slow_log;
set global general_log='ON';
set global slow_query_log='ON';
select * from mysql.general_log;
flush logs;
lock tables mysql.general_log WRITE;
lock tables mysql.slow_log WRITE;
lock tables mysql.general_log READ;
lock tables mysql.slow_log READ;
set global general_log='OFF';
set global slow_query_log='OFF';
set @save_storage_engine= @@session.default_storage_engine;
set default_storage_engine= MEMORY;
alter table mysql.slow_log engine=NonExistentEngine;
alter table mysql.slow_log engine=memory;
set default_storage_engine= @save_storage_engine;
drop table mysql.slow_log;
drop table mysql.general_log;
drop table mysql.general_log;
drop table mysql.slow_log;
set global general_log='ON';
set global slow_query_log='ON';
SET GLOBAL log_output=@old_log_output;
TRUNCATE TABLE mysql.general_log;
use test;
