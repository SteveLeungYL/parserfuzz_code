SET NAMES binary;
SET NAMES utf8;
SET NAMES latin1;
SET NAMES utf8;
CREATE TABLE t1 (a varchar(1));
DROP TABLE t1;
SET NAMES latin1;
SET NAMES latin1;
SET NAMES utf8mb4;
SET NAMES DEFAULT;
SET sql_mode = '';
CREATE TABLE t1 ( g GEOMETRY NOT NULL );
INSERT INTO t1 VALUES ( POINT(1,2) );
SET sql_mode = DEFAULT;
DROP TABLE t1;
CREATE TABLE t1 ( a INT );
CREATE TABLE t2 ( b INT );
CREATE TABLE t3 ( c INT );
UPDATE performance_schema.setup_consumers SET enabled = 'NO' WHERE NAME = 'statements_digest';
SET @the_digest = statement_digest( "SELECT 1" );
UPDATE performance_schema.setup_consumers SET enabled = 'YES' WHERE NAME = 'statements_digest';
SET @ps_protocol = 0;
UPDATE performance_schema.setup_consumers SET enabled = @original_setting WHERE NAME = 'statements_digest';
UPDATE performance_schema.setup_consumers SET enabled = 'NO' WHERE NAME = 'statements_digest';
SET @the_digest = statement_digest( "SELECT a + b, a - b FROM t1, t2, t3 WHERE a = c" );
UPDATE performance_schema.setup_consumers SET enabled = 'YES' WHERE NAME = 'statements_digest';
SET @ps_protocol = 0;
UPDATE performance_schema.setup_consumers SET enabled = @original_setting WHERE NAME = 'statements_digest';
UPDATE performance_schema.setup_consumers SET enabled = 'NO' WHERE NAME = 'statements_digest';
SET @the_digest = statement_digest( "SELECT NULL IS NULL" );
UPDATE performance_schema.setup_consumers SET enabled = 'YES' WHERE NAME = 'statements_digest';
SET @ps_protocol = 0;
UPDATE performance_schema.setup_consumers SET enabled = @original_setting WHERE NAME = 'statements_digest';
UPDATE performance_schema.setup_consumers SET enabled = 'NO' WHERE NAME = 'statements_digest';
SET @the_digest = statement_digest( "SELECT 1" );
UPDATE performance_schema.setup_consumers SET enabled = 'YES' WHERE NAME = 'statements_digest';
SET @ps_protocol = 0;
UPDATE performance_schema.setup_consumers SET enabled = @original_setting WHERE NAME = 'statements_digest';
DROP TABLE t1, t2, t3;
UPDATE performance_schema.setup_consumers SET enabled = 'NO' WHERE NAME = 'statements_digest';
SET @the_digest = statement_digest( "SELECT statement_digest( 'SELECT something FROM DUAL WHERE something' ) IS NULL" );
UPDATE performance_schema.setup_consumers SET enabled = 'YES' WHERE NAME = 'statements_digest';
SET @ps_protocol = 0;
UPDATE performance_schema.setup_consumers SET enabled = @original_setting WHERE NAME = 'statements_digest';
CREATE TABLE t1 AS SELECT statement_digest( 'select 1, 2, 3' ) AS digest;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE digest_gcol ( query VARCHAR ( 100 ), digest VARCHAR ( 32 ) GENERATED ALWAYS AS ( statement_digest(query) ) );
SET NAMES latin1;
SET NAMES utf8mb4;
SET NAMES DEFAULT;
SET sql_mode = '';
CREATE TABLE t1 ( g GEOMETRY NOT NULL );
INSERT INTO t1 VALUES ( POINT(1,2) );
SET sql_mode = DEFAULT;
DROP TABLE t1;
CREATE TABLE t1 ( a INT );
CREATE TABLE t2 ( b INT );
CREATE TABLE t3 ( c INT );
UPDATE performance_schema.setup_consumers SET enabled = 'NO' WHERE NAME = 'statements_digest';
SET @the_digest = statement_digest_text( "SELECT 1" );
UPDATE performance_schema.setup_consumers SET enabled = 'YES' WHERE NAME = 'statements_digest';
