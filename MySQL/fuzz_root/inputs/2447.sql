set default_storage_engine=innodb;
SET TIME_ZONE = "+00:00";
SET sql_mode = 'NO_ENGINE_SUBSTITUTION';
CREATE TABLE t1( a BIT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a TINYINT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a SMALLINT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a MEDIUMINT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a INT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a BIGINT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a FLOAT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a DECIMAL DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a DATE DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a TIME DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a YEAR DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a BIT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a TINYINT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a SMALLINT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a MEDIUMINT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a INT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a BIGINT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a FLOAT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a DECIMAL ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a DATE ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a TIME ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a YEAR ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NULL, e DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), f DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), g DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), h DATETIME(6) );
SET TIMESTAMP = 1317132668.654321;
SET @old_time_zone = @@TIME_ZONE;
SET TIME_ZONE = "+05:00";
INSERT INTO t1( d, h ) VALUES ( NOW(6), NOW(6) );
SELECT * FROM t1;
SET TIMESTAMP = 611017323.543212;
UPDATE t1 SET d = NOW(6), h = NOW(6);
SELECT * FROM t1;
SET TIME_ZONE = @old_time_zone;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), f INT );
SET TIMESTAMP = 1303197722.534231;
INSERT INTO t1 ( f ) VALUES (1);
SELECT * FROM t1;
SET TIMESTAMP = 1303197798.132435;
UPDATE t1 SET f = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NULL, f DATETIME(6), g DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), h DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), j INT );
SET TIMESTAMP = 1303197722.534231;
INSERT INTO t1 ( j, a ) VALUES ( 1, 1 );
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b INT, c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), f TIMESTAMP(6) NOT NULL DEFAULT '1986-09-27 03:00:00.098765', g TIMESTAMP(6) NULL, h DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), j DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), k DATETIME(6) NULL, l DATETIME(6) DEFAULT '1986-09-27 03:00:00.098765' );
SET TIMESTAMP = 251593200.192837;
INSERT INTO t1(a) VALUES (1) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
SET TIMESTAMP = 169945200.918273;
INSERT INTO t1(a) VALUES (1) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
SET TIMESTAMP = 114167482.534231;
INSERT INTO t1(a) VALUES (2) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b INT, c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) );
SET TIMESTAMP = 1303197798.945156;
INSERT INTO t1 VALUES (1, 0, '2001-01-01 01:01:01.111111'), (2, 0, '2002-02-02 02:02:02.222222'), (3, 0, '2003-03-03 03:03:03.333333');
SELECT * FROM t1;
UPDATE t1 SET b = 2, c = c WHERE a = 2;
SELECT * FROM t1;
INSERT INTO t1 (a) VALUES (4);
SELECT * FROM t1;
UPDATE t1 SET c = '2004-04-04 04:04:04.444444' WHERE a = 4;
SELECT * FROM t1;
INSERT INTO t1 ( a ) VALUES ( 3 ), ( 5 ) ON DUPLICATE KEY UPDATE b = 3, c = c;
SELECT * FROM t1;
INSERT INTO t1 (a, c) VALUES (4, '2004-04-04 00:00:00.444444'), (6, '2006-06-06 06:06:06.666666') ON DUPLICATE KEY UPDATE b = 4;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c DATETIME(6)  DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), e DATETIME(6)  DEFAULT CURRENT_TIMESTAMP(6), f TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), g DATETIME(6)  ON UPDATE CURRENT_TIMESTAMP(6), h TIMESTAMP(6) NULL, i DATETIME(6) );
SET TIMESTAMP = 22756272.163584;
REPLACE INTO t1 ( a ) VALUES ( 1 );
SELECT * FROM t1;
SET TIMESTAMP = 27094577.852954;
REPLACE INTO t1 ( a ) VALUES ( 1 );
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), c INT );
SET TIMESTAMP = 1303293221.163578;
INSERT INTO t1 VALUES (NULL, NULL, 1), (DEFAULT, DEFAULT, 2);
INSERT INTO t1 ( a, b, c ) VALUES (NULL, NULL, 3), (DEFAULT, DEFAULT, 4);
SELECT * FROM t1;
SET TIME_ZONE = "+03:00";
SELECT * FROM t1;
SET TIME_ZONE = "+00:00";
DROP TABLE t1;
SET TIMESTAMP = 1303283139.195624;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT '2010-10-11 12:34:56' ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT '2010-10-11 12:34:56' );
INSERT INTO t1          VALUES (NULL, NULL), (DEFAULT, DEFAULT);
INSERT INTO t1 ( a, b ) VALUES (NULL, NULL), (DEFAULT, DEFAULT);
SELECT * FROM t1;
DROP TABLE t1;
SET TIMESTAMP = 1303293221.136952;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '1986-09-27 03:00:00.098765', e TIMESTAMP(6) NULL, f DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), g DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), h DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) NULL, j DATETIME(6) DEFAULT '1986-09-27 03:00:00.098765' );
INSERT INTO t1 VALUES ();
INSERT INTO t1 SELECT NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), c INT );
INSERT INTO t1 ( c ) VALUES (1);
SELECT * FROM t1;
SET TIMESTAMP = 1303311973.163587;
UPDATE t1 t11, t1 t12 SET t11.c = 1;
SELECT * FROM t1;
UPDATE t1 t11, t1 t12 SET t11.c = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), c DATETIME(6)  DEFAULT   CURRENT_TIMESTAMP(6), d DATETIME(6)  ON UPDATE CURRENT_TIMESTAMP(6), e INT );
CREATE TABLE t2 ( f INT, g DATETIME(6)  ON UPDATE CURRENT_TIMESTAMP(6), h DATETIME(6)  DEFAULT   CURRENT_TIMESTAMP(6), i TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), j TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) );
SET TIMESTAMP = 794880123.195676;
INSERT INTO t1 ( e ) VALUES ( 1 ), ( 2 );
INSERT INTO t2 ( f ) VALUES ( 1 ), ( 2 );
SELECT * FROM t1;
SELECT * FROM t2;
SET TIMESTAMP = 345520921.196755;
UPDATE t1, t2 SET t1.e = 3, t2.f = 4;
SELECT * FROM t1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), c INT, d INT );
CREATE TABLE t2 ( a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), c INT KEY, d INT );
INSERT INTO t1 ( c ) VALUES (1), (2);
INSERT INTO t2 ( c ) VALUES (1), (2);
SET TIMESTAMP = 1303311973.194685;
UPDATE t1 JOIN t2 USING ( c ) SET t2.d = 1;
SELECT * FROM t1;
SELECT * FROM t2;
SET TIMESTAMP = 285213721.134679;
UPDATE t1 JOIN t2 USING ( c ) SET t1.d = 1;
SELECT * FROM t1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), c INT );
SET TIMESTAMP = 1303293221.794613;
INSERT INTO t1 ( c ) VALUES ( 1 );
SELECT * FROM t1;
UPDATE t1 SET c = 1;
SELECT * FROM t1;
UPDATE t1 SET c = 2;
SELECT * FROM t1;
SET TIMESTAMP = 1303311973.534231;
UPDATE t1 t11, t1 t12 SET t11.c = 2;
SELECT * FROM t1;
UPDATE t1 t11, t1 t12 SET t11.c = 3;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT, b INT, PRIMARY KEY (a) );
INSERT INTO t1 VALUES (1, 1),(2, 2),(3, 3),(4, 4);
CREATE TABLE t2 ( a INT, b INT );
INSERT INTO t2 VALUES (1, 1),(2, 2),(3, 3),(4, 4),(5, 5);
UPDATE t1, t2 SET t1.b = 100 WHERE t1.a = t2.a;
SELECT * FROM t1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b INT );
ALTER TABLE t1 MODIFY a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) AFTER b;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NULL );
ALTER TABLE t1 MODIFY b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) FIRST;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT, b TIMESTAMP(6) NULL );
ALTER TABLE t1 MODIFY b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) FIRST;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NULL );
ALTER TABLE t1 MODIFY a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' AFTER b;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NULL );
ALTER TABLE t1 MODIFY a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' AFTER b;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE NOW(6), b INT, c TIMESTAMP(6) NULL );
SHOW CREATE TABLE t1;
ALTER TABLE t1 MODIFY a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) AFTER b;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE NOW(6), b INT, c TIMESTAMP(6) NULL );
ALTER TABLE t1 MODIFY c TIMESTAMP(6) NULL FIRST;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT NOW(6) ON UPDATE CURRENT_TIMESTAMP(6), b INT, c TIMESTAMP(6) NULL );
SHOW CREATE TABLE t1;
ALTER TABLE t1 MODIFY a TIMESTAMP(6) NOT NULL DEFAULT NOW(6) ON UPDATE CURRENT_TIMESTAMP(6) AFTER b;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT NOW(6) ON UPDATE CURRENT_TIMESTAMP(6), b INT, c TIMESTAMP(6) NULL );
ALTER TABLE t1 MODIFY c TIMESTAMP(6) NULL FIRST;
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT );
ALTER TABLE t1 ADD COLUMN b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6);
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), d DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t2 ( placeholder1 INT, placeholder2 INT, placeholder3 INT, placeholder4 INT, a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00', c DATETIME(6), d DATETIME(6) );
SET TIMESTAMP = 240589801.654312;
INSERT INTO t2 (a, b, c, d) VALUES ( '1977-08-16 15:30:01.123456', '1977-08-16 15:30:01.234567', '1977-08-16 15:30:01.345678', '1977-08-16 15:30:01.456789' );
SET TIMESTAMP = 528166800.132435;
INSERT INTO t1 ( a, c ) SELECT a, c FROM t2;
SELECT * FROM t1;
DROP TABLE t1, t2;
SET TIMESTAMP = 8712837.657898;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '1986-09-27 03:00:00.098765', e TIMESTAMP(6) NULL, f DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), g DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), h DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) NULL, j DATETIME(6) DEFAULT '1986-09-27 03:00:00.098765' );
INSERT INTO t1 VALUES ();
SET TIMESTAMP = 34200837.164937;
CREATE TABLE t2  SELECT a FROM t1;
SHOW CREATE TABLE t2;
SELECT * FROM t2;
CREATE TABLE t3  SELECT b FROM t1;
SHOW CREATE TABLE t3;
SELECT * FROM t3;
CREATE TABLE t4  SELECT c FROM t1;
SHOW CREATE TABLE t4;
SELECT * FROM t4;
CREATE TABLE t5  SELECT d FROM t1;
SHOW CREATE TABLE t5;
SELECT * FROM t5;
CREATE TABLE t6  SELECT e FROM t1;
SHOW CREATE TABLE t6;
SELECT * FROM t6;
CREATE TABLE t7  SELECT f FROM t1;
SHOW CREATE TABLE t7;
SELECT * FROM t7;
CREATE TABLE t8  SELECT g FROM t1;
SHOW CREATE TABLE t8;
SELECT * FROM t8;
CREATE TABLE t9  SELECT h FROM t1;
SHOW CREATE TABLE t9;
SELECT * FROM t9;
CREATE TABLE t10 SELECT i FROM t1;
SHOW CREATE TABLE t10;
SELECT * FROM t10;
CREATE TABLE t11 SELECT j FROM t1;
SHOW CREATE TABLE t11;
SELECT * FROM t11;
CREATE TABLE t12 ( k TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), l TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), m TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), n TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), o TIMESTAMP(6) NOT NULL DEFAULT '1986-09-27 03:00:00.098765', p TIMESTAMP(6) NULL, q DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), r DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), s DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), t DATETIME(6) NULL, u DATETIME(6) DEFAULT '1986-09-27 03:00:00.098765' ) SELECT * FROM t1;
SHOW CREATE TABLE t12;
CREATE TABLE t13  SELECT COALESCE(a,a) FROM t1;
SHOW CREATE TABLE t13;
SELECT * FROM t13;
DROP TABLE t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13;
SET TIMESTAMP = 8712837.164953;
CREATE TABLE t1 ( a DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), c DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), d DATETIME(6) NULL, e DATETIME(6) DEFAULT '1986-09-27 03:00:00.098765' );
INSERT INTO t1 VALUES ();
SET TIMESTAMP = 34200837.915736;
CREATE TABLE t2 SELECT a FROM t1;
SHOW CREATE TABLE t2;
SELECT * FROM t2;
CREATE TABLE t3 SELECT b FROM t1;
SHOW CREATE TABLE t3;
SELECT * FROM t3;
CREATE TABLE t4 SELECT c FROM t1;
SHOW CREATE TABLE t4;
SELECT * FROM t4;
CREATE TABLE t5 SELECT d FROM t1;
SHOW CREATE TABLE t5;
SELECT * FROM t5;
CREATE TABLE t6 SELECT e FROM t1;
SHOW CREATE TABLE t6;
SELECT * FROM t6;
CREATE TABLE t7 LIKE t1;
SHOW CREATE TABLE t7;
DROP TABLE t1, t2, t3, t4, t5, t6, t7;
SET TIMESTAMP = 1000.987654;
CREATE TABLE t1 ( a INT );
INSERT INTO t1 VALUES ( 1 ), ( 2 );
CREATE TABLE t2 ( b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6)) SELECT a FROM t1;
SHOW CREATE TABLE t2;
SET TIMESTAMP = 2000.876543;
INSERT INTO t2( a ) VALUES ( 3 );
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 ( a INT, b DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t2 ( a INT, b DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE VIEW v1 AS SELECT * FROM t1;
SHOW CREATE VIEW v1;
CREATE VIEW v2 AS SELECT * FROM t2;
SHOW CREATE VIEW v2;
SET TIMESTAMP = 34200837.348564;
INSERT INTO v1 ( a ) VALUES ( 1 );
INSERT INTO v2 ( a ) VALUES ( 1 );
SELECT * FROM t1;
SELECT * FROM v1;
SELECT * FROM t2;
SELECT * FROM v2;
SET TIMESTAMP = 8712837.567332;
UPDATE v1 SET a = 2;
UPDATE v2 SET a = 2;
SELECT * FROM t1;
SELECT * FROM v1;
SELECT * FROM t2;
SELECT * FROM v2;
DROP VIEW v1, v2;
DROP TABLE t1, t2;
CREATE TABLE t1 ( a INT, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NULL, f DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), g DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE PROCEDURE p1() INSERT INTO test.t1( a ) VALUES ( 1 );
CREATE PROCEDURE p2() UPDATE t1 SET a = 2 WHERE a = 1;
SET TIMESTAMP = 34200837.876544;
CALL p1();
SELECT * FROM t1;
SET TIMESTAMP = 8712837.143546;
CALL p2();
SELECT * FROM t1;
DROP PROCEDURE p1;
DROP PROCEDURE p2;
DROP TABLE t1;
CREATE TABLE t1 ( a INT, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NULL, f DATETIME(6), g DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), h DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t2 ( a INT );
CREATE TRIGGER t2_trg BEFORE INSERT ON t2 FOR EACH ROW BEGIN INSERT INTO t1 ( a ) VALUES ( 1 ); END;
SET TIMESTAMP = 34200837.978675;
INSERT INTO t2 ( a ) VALUES ( 1 );
SELECT * FROM t1;
DROP TRIGGER t2_trg;
CREATE TRIGGER t2_trg BEFORE INSERT ON t2 FOR EACH ROW BEGIN UPDATE t1 SET a = 2; END;
SET TIMESTAMP = 8712837.456789;
INSERT INTO t2 ( a ) VALUES ( 1 );
SELECT * FROM t1;
DROP TABLE t1, t2;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t2 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t3 ( a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t4 ( a TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE VIEW v1       AS SELECT a COLLATE latin1_german1_ci AS b FROM t1;
CREATE VIEW v2 ( b ) AS SELECT a COLLATE latin1_german1_ci      FROM t2;
CREATE VIEW v3       AS SELECT a COLLATE latin1_german1_ci AS b FROM t3;
CREATE VIEW v4 ( b ) AS SELECT a COLLATE latin1_german1_ci      FROM t4;
INSERT INTO v1 ( b ) VALUES ( '2007-10-24 00:03:34.010203' );
SELECT a FROM t1;
INSERT INTO v2 ( b ) VALUES ( '2007-10-24 00:03:34.010203' );
SELECT a FROM t2;
INSERT INTO t3 VALUES ();
UPDATE v3 SET b = '2007-10-24 00:03:34.010203';
SELECT a FROM t3;
INSERT INTO t4 VALUES ();
UPDATE v4 SET b = '2007-10-24 00:03:34.010203';
SELECT a FROM t4;
DROP VIEW  v1, v2, v3, v4;
DROP TABLE t1, t2, t3, t4;
CREATE TABLE t1 ( a INT, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), f DATETIME(6), g DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), h DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t2 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), e DATETIME(6) NOT NULL, f DATETIME(6) NOT NULL DEFAULT '1977-01-02 12:13:14', g DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) NOT NULL, h DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6) NOT NULL, i DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) NOT NULL );
SELECT 1 INTO OUTFILE 't3.dat' FROM dual;
SELECT NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL INTO OUTFILE 't4.dat' FROM dual;
SELECT 1, 2 INTO OUTFILE 't5.dat' FROM dual;
SET TIMESTAMP = 1312211479.918273;
LOAD DATA INFILE 't3.dat' INTO TABLE t1;
SELECT * FROM t1;
LOAD DATA INFILE 't4.dat' INTO TABLE t2;
SELECT a FROM t2;
SELECT b FROM t2;
SELECT c FROM t2;
SELECT d FROM t2;
SELECT e FROM t2;
SELECT f FROM t2;
SELECT g FROM t2;
SELECT h FROM t2;
SELECT i FROM t2;
DELETE FROM t1;
DELETE FROM t2;
LOAD DATA INFILE 't3.dat' INTO TABLE t1 FIELDS TERMINATED BY '' ENCLOSED BY '';
SELECT b FROM t1;
SELECT c FROM t1;
SELECT d FROM t1;
SELECT e FROM t1;
SELECT f FROM t1;
SELECT g FROM t1;
SELECT h FROM t1;
SELECT i FROM t1;
DELETE FROM t1;
LOAD DATA INFILE 't5.dat' INTO TABLE t1 ( a, @dummy );
SELECT * FROM t1;
SELECT @dummy;
DELETE FROM t1;
LOAD DATA INFILE 't3.dat' INTO TABLE t1 ( a ) SET c = '2005-06-06 08:09:10';
SELECT * FROM t1;
DELETE FROM t1;
LOAD DATA INFILE 't3.dat' INTO TABLE t1 ( a ) SET g = '2005-06-06 08:09:10';
SELECT * FROM t1;
DELETE FROM t1;
LOAD XML INFILE '../../std_data/onerow.xml' INTO TABLE t1 ROWS IDENTIFIED BY '<row>';
SELECT * FROM t1;
DROP TABLE t1, t2;
SET TIMESTAMP = 1312211479.089786;
SELECT 1 INTO OUTFILE "file1.dat" FROM dual;
SELECT NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL INTO OUTFILE "file2.dat" FROM dual;
CREATE TABLE t1 ( dummy INT, a DATETIME(6) NULL DEFAULT NULL, b DATETIME(6) NULL DEFAULT "2011-11-18", like_b DATETIME(6) NULL DEFAULT CURRENT_TIMESTAMP(6), c DATETIME(6) NOT NULL DEFAULT "2011-11-18", like_c DATETIME(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NULL DEFAULT "2011-05-03" ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NOT NULL DEFAULT "2011-05-03", f TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), g TIMESTAMP(6) NULL DEFAULT NULL, h INT NULL, i INT NOT NULL DEFAULT 42 );
SHOW CREATE TABLE t1;
LOAD DATA INFILE "file1.dat" INTO table t1;
SELECT * FROM t1;
delete from t1;
alter table t1 modify f TIMESTAMP NULL default CURRENT_TIMESTAMP;
SHOW CREATE TABLE t1;
LOAD DATA INFILE "file1.dat" INTO table t1;
SELECT * FROM t1;
delete from t1;
drop table t1;
CREATE TABLE t1 ( dummy INT, a DATETIME(6) NULL DEFAULT NULL, b DATETIME(6) NULL DEFAULT "2011-11-18", like_b DATETIME(6) NULL DEFAULT CURRENT_TIMESTAMP(6), c DATETIME(6) NOT NULL DEFAULT "2011-11-18", like_c DATETIME(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NULL DEFAULT "2011-05-03" ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NOT NULL DEFAULT "2011-05-03", f TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), g TIMESTAMP(6) NULL DEFAULT NULL, h INT NULL, i INT NOT NULL DEFAULT 42 );
SHOW CREATE TABLE t1;
LOAD DATA INFILE "file2.dat" INTO table t1;
SELECT * FROM t1;
delete from t1;
alter table t1 modify f TIMESTAMP NULL default CURRENT_TIMESTAMP;
SHOW CREATE TABLE t1;
LOAD DATA INFILE "file2.dat" INTO table t1;
SELECT * FROM t1;
delete from t1;
drop table t1;
SET TIME_ZONE = "+03:00";
SET TIMESTAMP = 1000.123456;
CREATE TABLE t1 ( a INT, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6));
SHOW CREATE TABLE t1;
INSERT INTO t1 ( a ) VALUES ( 1 );
SELECT * FROM t1;
CREATE VIEW v1 AS SELECT * FROM t1 WHERE b <= '1970-01-01 03:16:40.123456' WITH CHECK OPTION;
SELECT * FROM v1;
SET TIMESTAMP = 2000.000234;
UPDATE v1 SET a = 2;
SELECT * FROM t1;
DROP VIEW v1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT '1973-08-14 09:11:22.089786' ON UPDATE CURRENT_TIMESTAMP(6), c INT KEY );
SET TIMESTAMP = 114167482.534231;
INSERT INTO t1 ( c ) VALUES ( 1 );
CREATE VIEW v1 AS SELECT * FROM t1 WHERE a >= '1973-08-14 09:11:22' WITH LOCAL CHECK OPTION;
SELECT * FROM v1;
SET TIMESTAMP = 1.126789;
INSERT INTO v1 ( c ) VALUES ( 1 ) ON DUPLICATE KEY UPDATE c = 2;
SELECT * FROM v1;
DROP VIEW v1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT, b INT, ts TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), PRIMARY KEY ( a, ts ) );
INSERT INTO t1( a, b, ts ) VALUES ( 1, 0, '2000-09-28 17:44:34' );
CREATE TABLE t2 ( a INT );
INSERT INTO t2 VALUES ( 1 );
UPDATE t1 STRAIGHT_JOIN t2 SET t1.b = t1.b + 1 WHERE t1.a = 1 AND t1.ts >= '2000-09-28 00:00:00';
SELECT b FROM t1;
DROP TABLE t1, t2;
SET timestamp = 1000;
CREATE TABLE t1 ( b INT );
INSERT INTO t1 VALUES (1),(2);
ALTER TABLE t1 ADD COLUMN a6 DATETIME(6) DEFAULT NOW(6) ON UPDATE NOW(6) FIRST;
ALTER TABLE t1 ADD COLUMN a5 DATETIME(6) DEFAULT NOW(6) FIRST;
ALTER TABLE t1 ADD COLUMN a4 DATETIME(6) ON UPDATE NOW(6) FIRST;
ALTER TABLE t1 ADD COLUMN a3 TIMESTAMP(6) NOT NULL DEFAULT NOW(6) ON UPDATE NOW(6) FIRST;
ALTER TABLE t1 ADD COLUMN a2 TIMESTAMP(6) NOT NULL DEFAULT NOW(6) FIRST;
ALTER TABLE t1 ADD COLUMN a1 TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE NOW(6) FIRST;
ALTER TABLE t1 ADD COLUMN c1 TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE NOW(6) AFTER b;
ALTER TABLE t1 ADD COLUMN c2 TIMESTAMP(6) NOT NULL DEFAULT NOW(6) AFTER c1;
ALTER TABLE t1 ADD COLUMN c3 TIMESTAMP(6) NOT NULL DEFAULT NOW(6) ON UPDATE NOW(6) AFTER c2;
ALTER TABLE t1 ADD COLUMN c4 DATETIME(6) ON UPDATE NOW(6) AFTER c3;
ALTER TABLE t1 ADD COLUMN c5 DATETIME(6) DEFAULT NOW(6) AFTER c4;
ALTER TABLE t1 ADD COLUMN c6 DATETIME(6) DEFAULT NOW(6) ON UPDATE NOW(6) AFTER c5;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6)  NOT NULL DEFAULT NOW(6) ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT NOW(6) );
INSERT INTO t1 VALUES ();
SET timestamp = 1000000000;
ALTER TABLE t1 MODIFY COLUMN a TIMESTAMP(3) DEFAULT CURRENT_TIMESTAMP(3);
ALTER TABLE t1 MODIFY COLUMN b DATETIME(3) DEFAULT CURRENT_TIMESTAMP(3);
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT '1999-12-01 11:22:33' ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT '1999-12-01 11:22:33' );
INSERT INTO t1 VALUES ();
ALTER TABLE t1 MODIFY COLUMN a TIMESTAMP(6) DEFAULT NOW(6);
ALTER TABLE t1 MODIFY COLUMN b DATETIME(6) DEFAULT NOW(6);
INSERT INTO t1 VALUES ();
SELECT * FROM t1;
DROP TABLE t1;
SET sql_mode = default;
