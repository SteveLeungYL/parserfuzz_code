FLUSH PRIVILEGES;
select hex(@a);
select hex(@a);
set global init_connect="set @a=2;set @b=3";
select @a, @b;
set GLOBAL init_connect=DEFAULT;
select @a;
set global init_connect="drop table if exists t1; create table t1(a char(10));\ insert into t1 values ('\0');insert into t1 values('abc')";
select hex(a) from t1;
set GLOBAL init_connect="adsfsdfsdfs";
select @a;
select @a;
drop table t1;
FLUSH PRIVILEGES;
create table t1 (x int);
insert into t1 values (3), (5), (7);
create table t2 (y int);
grant all privileges on test.* to mysqltest1@localhost;
set global init_connect="create procedure p1() select * from t1";
call p1();
drop procedure p1;
set global init_connect="create procedure p1(x int)\ begin\   select count(*) from t1;\   select * from t1;\   set @x = x; end";
call p1(42);
select @x;
set global init_connect="call p1(4711)";
select @x;
set global init_connect="drop procedure if exists p1";
call p1();
create procedure p1(out sum int) begin declare n int default 0; declare c cursor for select * from t1; declare exit handler for not found begin close c; set sum = n; end; open c; loop begin declare x int; fetch c into x; if x > 3 then set n = n + x; end if; end; end loop; end;
set global init_connect="call p1(@sum)";
select @sum;
drop procedure p1;
create procedure p1(tbl char(10), v int) begin set @s = concat('insert into ', tbl, ' values (?)'); set @v = v; prepare stmt1 from @s; execute stmt1 using @v; deallocate prepare stmt1; end;
set global init_connect="call p1('t1', 11)";
select * from t1;
drop procedure p1;
create function f1() returns int begin declare n int; select count(*) into n from t1; return n; end;
set global init_connect="set @x = f1()";
select @x;
set global init_connect="create view v1 as select f1()";
select * from v1;
set global init_connect="drop view v1";
select * from v1;
drop function f1;
create trigger trg1 after insert on t2 for each row insert into t1 values (new.y);
set global init_connect="insert into t2 values (13), (17), (19)";
select * from t1;
drop trigger trg1;
revoke all privileges, grant option from mysqltest1@localhost;
drop table t1, t2;
CREATE USER ''@localhost;
FLUSH PRIVILEGES;
SET GLOBAL init_connect="set @a=2;";
SELECT @a;
SET PASSWORD = 'abc';
SELECT @a;
SELECT @a;
DROP USER ''@localhost;
set global init_connect="set @a='a\\0c'";
