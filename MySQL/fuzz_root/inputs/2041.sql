TRUNCATE TABLE performance_schema.memory_summary_global_by_event_name;
CREATE SCHEMA dd_pfs;
CREATE TABLE dd_pfs.mem_events (Seq int auto_increment PRIMARY KEY, Query varchar(1000)) AS SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
create schema s;
create table s.t1(i int);
create table s.t2(i int) tablespace innodb_system;
drop schema s;
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
CREATE SCHEMA s;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
CREATE TABLE s.t_myisam(i int) engine myisam;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
CREATE TABLE s.t_innodb_1(i int) TABLESPACE innodb_system;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
CREATE TABLE s.t_innodb_2(i int) TABLESPACE innodb_system;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
SELECT * FROM s.t_myisam;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
SELECT * FROM s.t_innodb_1;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
SELECT * FROM s.t_innodb_2;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
SELECT * FROM s.t_innodb_1;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP TABLE s.t_innodb_1;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP TABLE s.t_innodb_2;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP SCHEMA s;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
SET foreign_key_checks= 0;
SET foreign_key_checks= DEFAULT;
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
SELECT * FROM test.tables;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP TABLE test.tables;
CREATE TABLE test.t_150 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_150;
FLUSH TABLES test.t_150;
CREATE TABLE test.t_149 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_149;
FLUSH TABLES test.t_149;
CREATE TABLE test.t_148 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_148;
FLUSH TABLES test.t_148;
CREATE TABLE test.t_147 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_147;
FLUSH TABLES test.t_147;
CREATE TABLE test.t_146 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_146;
FLUSH TABLES test.t_146;
CREATE TABLE test.t_145 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_145;
FLUSH TABLES test.t_145;
CREATE TABLE test.t_144 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_144;
FLUSH TABLES test.t_144;
CREATE TABLE test.t_143 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_143;
FLUSH TABLES test.t_143;
CREATE TABLE test.t_142 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_142;
FLUSH TABLES test.t_142;
CREATE TABLE test.t_141 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_141;
FLUSH TABLES test.t_141;
CREATE TABLE test.t_140 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_140;
FLUSH TABLES test.t_140;
CREATE TABLE test.t_139 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_139;
FLUSH TABLES test.t_139;
CREATE TABLE test.t_138 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_138;
FLUSH TABLES test.t_138;
CREATE TABLE test.t_137 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_137;
FLUSH TABLES test.t_137;
CREATE TABLE test.t_136 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_136;
FLUSH TABLES test.t_136;
CREATE TABLE test.t_135 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_135;
FLUSH TABLES test.t_135;
CREATE TABLE test.t_134 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_134;
FLUSH TABLES test.t_134;
CREATE TABLE test.t_133 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_133;
FLUSH TABLES test.t_133;
CREATE TABLE test.t_132 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_132;
FLUSH TABLES test.t_132;
CREATE TABLE test.t_131 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_131;
FLUSH TABLES test.t_131;
CREATE TABLE test.t_130 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_130;
FLUSH TABLES test.t_130;
CREATE TABLE test.t_129 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_129;
FLUSH TABLES test.t_129;
CREATE TABLE test.t_128 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_128;
FLUSH TABLES test.t_128;
CREATE TABLE test.t_127 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_127;
FLUSH TABLES test.t_127;
CREATE TABLE test.t_126 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_126;
FLUSH TABLES test.t_126;
CREATE TABLE test.t_125 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_125;
FLUSH TABLES test.t_125;
CREATE TABLE test.t_124 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_124;
FLUSH TABLES test.t_124;
CREATE TABLE test.t_123 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_123;
FLUSH TABLES test.t_123;
CREATE TABLE test.t_122 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_122;
FLUSH TABLES test.t_122;
CREATE TABLE test.t_121 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_121;
FLUSH TABLES test.t_121;
CREATE TABLE test.t_120 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_120;
FLUSH TABLES test.t_120;
CREATE TABLE test.t_119 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_119;
FLUSH TABLES test.t_119;
CREATE TABLE test.t_118 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_118;
FLUSH TABLES test.t_118;
CREATE TABLE test.t_117 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_117;
FLUSH TABLES test.t_117;
CREATE TABLE test.t_116 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_116;
FLUSH TABLES test.t_116;
CREATE TABLE test.t_115 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_115;
FLUSH TABLES test.t_115;
CREATE TABLE test.t_114 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_114;
FLUSH TABLES test.t_114;
CREATE TABLE test.t_113 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_113;
FLUSH TABLES test.t_113;
CREATE TABLE test.t_112 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_112;
FLUSH TABLES test.t_112;
CREATE TABLE test.t_111 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_111;
FLUSH TABLES test.t_111;
CREATE TABLE test.t_110 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_110;
FLUSH TABLES test.t_110;
CREATE TABLE test.t_109 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_109;
FLUSH TABLES test.t_109;
CREATE TABLE test.t_108 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_108;
FLUSH TABLES test.t_108;
CREATE TABLE test.t_107 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_107;
FLUSH TABLES test.t_107;
CREATE TABLE test.t_106 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_106;
FLUSH TABLES test.t_106;
CREATE TABLE test.t_105 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_105;
FLUSH TABLES test.t_105;
CREATE TABLE test.t_104 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_104;
FLUSH TABLES test.t_104;
CREATE TABLE test.t_103 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_103;
FLUSH TABLES test.t_103;
CREATE TABLE test.t_102 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_102;
FLUSH TABLES test.t_102;
CREATE TABLE test.t_101 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_101;
FLUSH TABLES test.t_101;
CREATE TABLE test.t_100 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_100;
FLUSH TABLES test.t_100;
CREATE TABLE test.t_99 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_99;
FLUSH TABLES test.t_99;
CREATE TABLE test.t_98 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_98;
FLUSH TABLES test.t_98;
CREATE TABLE test.t_97 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_97;
FLUSH TABLES test.t_97;
CREATE TABLE test.t_96 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_96;
FLUSH TABLES test.t_96;
CREATE TABLE test.t_95 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_95;
FLUSH TABLES test.t_95;
CREATE TABLE test.t_94 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_94;
FLUSH TABLES test.t_94;
CREATE TABLE test.t_93 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_93;
FLUSH TABLES test.t_93;
CREATE TABLE test.t_92 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_92;
FLUSH TABLES test.t_92;
CREATE TABLE test.t_91 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_91;
FLUSH TABLES test.t_91;
CREATE TABLE test.t_90 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_90;
FLUSH TABLES test.t_90;
CREATE TABLE test.t_89 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_89;
FLUSH TABLES test.t_89;
CREATE TABLE test.t_88 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_88;
FLUSH TABLES test.t_88;
CREATE TABLE test.t_87 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_87;
FLUSH TABLES test.t_87;
CREATE TABLE test.t_86 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_86;
FLUSH TABLES test.t_86;
CREATE TABLE test.t_85 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_85;
FLUSH TABLES test.t_85;
CREATE TABLE test.t_84 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_84;
FLUSH TABLES test.t_84;
CREATE TABLE test.t_83 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_83;
FLUSH TABLES test.t_83;
CREATE TABLE test.t_82 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_82;
FLUSH TABLES test.t_82;
CREATE TABLE test.t_81 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_81;
FLUSH TABLES test.t_81;
CREATE TABLE test.t_80 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_80;
FLUSH TABLES test.t_80;
CREATE TABLE test.t_79 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_79;
FLUSH TABLES test.t_79;
CREATE TABLE test.t_78 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_78;
FLUSH TABLES test.t_78;
CREATE TABLE test.t_77 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_77;
FLUSH TABLES test.t_77;
CREATE TABLE test.t_76 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_76;
FLUSH TABLES test.t_76;
CREATE TABLE test.t_75 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_75;
FLUSH TABLES test.t_75;
CREATE TABLE test.t_74 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_74;
FLUSH TABLES test.t_74;
CREATE TABLE test.t_73 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_73;
FLUSH TABLES test.t_73;
CREATE TABLE test.t_72 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_72;
FLUSH TABLES test.t_72;
CREATE TABLE test.t_71 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_71;
FLUSH TABLES test.t_71;
CREATE TABLE test.t_70 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_70;
FLUSH TABLES test.t_70;
CREATE TABLE test.t_69 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_69;
FLUSH TABLES test.t_69;
CREATE TABLE test.t_68 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_68;
FLUSH TABLES test.t_68;
CREATE TABLE test.t_67 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_67;
FLUSH TABLES test.t_67;
CREATE TABLE test.t_66 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_66;
FLUSH TABLES test.t_66;
CREATE TABLE test.t_65 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_65;
FLUSH TABLES test.t_65;
CREATE TABLE test.t_64 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_64;
FLUSH TABLES test.t_64;
CREATE TABLE test.t_63 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_63;
FLUSH TABLES test.t_63;
CREATE TABLE test.t_62 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_62;
FLUSH TABLES test.t_62;
CREATE TABLE test.t_61 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_61;
FLUSH TABLES test.t_61;
CREATE TABLE test.t_60 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_60;
FLUSH TABLES test.t_60;
CREATE TABLE test.t_59 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_59;
FLUSH TABLES test.t_59;
CREATE TABLE test.t_58 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_58;
FLUSH TABLES test.t_58;
CREATE TABLE test.t_57 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_57;
FLUSH TABLES test.t_57;
CREATE TABLE test.t_56 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_56;
FLUSH TABLES test.t_56;
CREATE TABLE test.t_55 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_55;
FLUSH TABLES test.t_55;
CREATE TABLE test.t_54 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_54;
FLUSH TABLES test.t_54;
CREATE TABLE test.t_53 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_53;
FLUSH TABLES test.t_53;
CREATE TABLE test.t_52 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_52;
FLUSH TABLES test.t_52;
CREATE TABLE test.t_51 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_51;
FLUSH TABLES test.t_51;
CREATE TABLE test.t_50 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_50;
FLUSH TABLES test.t_50;
CREATE TABLE test.t_49 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_49;
FLUSH TABLES test.t_49;
CREATE TABLE test.t_48 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_48;
FLUSH TABLES test.t_48;
CREATE TABLE test.t_47 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_47;
FLUSH TABLES test.t_47;
CREATE TABLE test.t_46 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_46;
FLUSH TABLES test.t_46;
CREATE TABLE test.t_45 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_45;
FLUSH TABLES test.t_45;
CREATE TABLE test.t_44 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_44;
FLUSH TABLES test.t_44;
CREATE TABLE test.t_43 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_43;
FLUSH TABLES test.t_43;
CREATE TABLE test.t_42 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_42;
FLUSH TABLES test.t_42;
CREATE TABLE test.t_41 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_41;
FLUSH TABLES test.t_41;
CREATE TABLE test.t_40 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_40;
FLUSH TABLES test.t_40;
CREATE TABLE test.t_39 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_39;
FLUSH TABLES test.t_39;
CREATE TABLE test.t_38 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_38;
FLUSH TABLES test.t_38;
CREATE TABLE test.t_37 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_37;
FLUSH TABLES test.t_37;
CREATE TABLE test.t_36 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_36;
FLUSH TABLES test.t_36;
CREATE TABLE test.t_35 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_35;
FLUSH TABLES test.t_35;
CREATE TABLE test.t_34 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_34;
FLUSH TABLES test.t_34;
CREATE TABLE test.t_33 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_33;
FLUSH TABLES test.t_33;
CREATE TABLE test.t_32 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_32;
FLUSH TABLES test.t_32;
CREATE TABLE test.t_31 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_31;
FLUSH TABLES test.t_31;
CREATE TABLE test.t_30 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_30;
FLUSH TABLES test.t_30;
CREATE TABLE test.t_29 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_29;
FLUSH TABLES test.t_29;
CREATE TABLE test.t_28 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_28;
FLUSH TABLES test.t_28;
CREATE TABLE test.t_27 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_27;
FLUSH TABLES test.t_27;
CREATE TABLE test.t_26 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_26;
FLUSH TABLES test.t_26;
CREATE TABLE test.t_25 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_25;
FLUSH TABLES test.t_25;
CREATE TABLE test.t_24 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_24;
FLUSH TABLES test.t_24;
CREATE TABLE test.t_23 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_23;
FLUSH TABLES test.t_23;
CREATE TABLE test.t_22 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_22;
FLUSH TABLES test.t_22;
CREATE TABLE test.t_21 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_21;
FLUSH TABLES test.t_21;
CREATE TABLE test.t_20 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_20;
FLUSH TABLES test.t_20;
CREATE TABLE test.t_19 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_19;
FLUSH TABLES test.t_19;
CREATE TABLE test.t_18 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_18;
FLUSH TABLES test.t_18;
CREATE TABLE test.t_17 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_17;
FLUSH TABLES test.t_17;
CREATE TABLE test.t_16 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_16;
FLUSH TABLES test.t_16;
CREATE TABLE test.t_15 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_15;
FLUSH TABLES test.t_15;
CREATE TABLE test.t_14 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_14;
FLUSH TABLES test.t_14;
CREATE TABLE test.t_13 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_13;
FLUSH TABLES test.t_13;
CREATE TABLE test.t_12 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_12;
FLUSH TABLES test.t_12;
CREATE TABLE test.t_11 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_11;
FLUSH TABLES test.t_11;
CREATE TABLE test.t_10 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_10;
FLUSH TABLES test.t_10;
CREATE TABLE test.t_9 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_9;
FLUSH TABLES test.t_9;
CREATE TABLE test.t_8 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_8;
FLUSH TABLES test.t_8;
CREATE TABLE test.t_7 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_7;
FLUSH TABLES test.t_7;
CREATE TABLE test.t_6 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_6;
FLUSH TABLES test.t_6;
CREATE TABLE test.t_5 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_5;
FLUSH TABLES test.t_5;
CREATE TABLE test.t_4 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_4;
FLUSH TABLES test.t_4;
CREATE TABLE test.t_3 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_3;
FLUSH TABLES test.t_3;
CREATE TABLE test.t_2 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_2;
FLUSH TABLES test.t_2;
CREATE TABLE test.t_1 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_1;
FLUSH TABLES test.t_1;
CREATE TABLE test.t_0 (i int) TABLESPACE innodb_system;
SELECT * FROM  test.t_0;
FLUSH TABLES test.t_0;
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
SELECT * FROM  test.t_150;
SELECT * FROM  test.t_149;
SELECT * FROM  test.t_148;
SELECT * FROM  test.t_147;
SELECT * FROM  test.t_146;
SELECT * FROM  test.t_145;
SELECT * FROM  test.t_144;
SELECT * FROM  test.t_143;
SELECT * FROM  test.t_142;
SELECT * FROM  test.t_141;
SELECT * FROM  test.t_140;
SELECT * FROM  test.t_139;
SELECT * FROM  test.t_138;
SELECT * FROM  test.t_137;
SELECT * FROM  test.t_136;
SELECT * FROM  test.t_135;
SELECT * FROM  test.t_134;
SELECT * FROM  test.t_133;
SELECT * FROM  test.t_132;
SELECT * FROM  test.t_131;
SELECT * FROM  test.t_130;
SELECT * FROM  test.t_129;
SELECT * FROM  test.t_128;
SELECT * FROM  test.t_127;
SELECT * FROM  test.t_126;
SELECT * FROM  test.t_125;
SELECT * FROM  test.t_124;
SELECT * FROM  test.t_123;
SELECT * FROM  test.t_122;
SELECT * FROM  test.t_121;
SELECT * FROM  test.t_120;
SELECT * FROM  test.t_119;
SELECT * FROM  test.t_118;
SELECT * FROM  test.t_117;
SELECT * FROM  test.t_116;
SELECT * FROM  test.t_115;
SELECT * FROM  test.t_114;
SELECT * FROM  test.t_113;
SELECT * FROM  test.t_112;
SELECT * FROM  test.t_111;
SELECT * FROM  test.t_110;
SELECT * FROM  test.t_109;
SELECT * FROM  test.t_108;
SELECT * FROM  test.t_107;
SELECT * FROM  test.t_106;
SELECT * FROM  test.t_105;
SELECT * FROM  test.t_104;
SELECT * FROM  test.t_103;
SELECT * FROM  test.t_102;
SELECT * FROM  test.t_101;
SELECT * FROM  test.t_100;
SELECT * FROM  test.t_99;
SELECT * FROM  test.t_98;
SELECT * FROM  test.t_97;
SELECT * FROM  test.t_96;
SELECT * FROM  test.t_95;
SELECT * FROM  test.t_94;
SELECT * FROM  test.t_93;
SELECT * FROM  test.t_92;
SELECT * FROM  test.t_91;
SELECT * FROM  test.t_90;
SELECT * FROM  test.t_89;
SELECT * FROM  test.t_88;
SELECT * FROM  test.t_87;
SELECT * FROM  test.t_86;
SELECT * FROM  test.t_85;
SELECT * FROM  test.t_84;
SELECT * FROM  test.t_83;
SELECT * FROM  test.t_82;
SELECT * FROM  test.t_81;
SELECT * FROM  test.t_80;
SELECT * FROM  test.t_79;
SELECT * FROM  test.t_78;
SELECT * FROM  test.t_77;
SELECT * FROM  test.t_76;
SELECT * FROM  test.t_75;
SELECT * FROM  test.t_74;
SELECT * FROM  test.t_73;
SELECT * FROM  test.t_72;
SELECT * FROM  test.t_71;
SELECT * FROM  test.t_70;
SELECT * FROM  test.t_69;
SELECT * FROM  test.t_68;
SELECT * FROM  test.t_67;
SELECT * FROM  test.t_66;
SELECT * FROM  test.t_65;
SELECT * FROM  test.t_64;
SELECT * FROM  test.t_63;
SELECT * FROM  test.t_62;
SELECT * FROM  test.t_61;
SELECT * FROM  test.t_60;
SELECT * FROM  test.t_59;
SELECT * FROM  test.t_58;
SELECT * FROM  test.t_57;
SELECT * FROM  test.t_56;
SELECT * FROM  test.t_55;
SELECT * FROM  test.t_54;
SELECT * FROM  test.t_53;
SELECT * FROM  test.t_52;
SELECT * FROM  test.t_51;
SELECT * FROM  test.t_50;
SELECT * FROM  test.t_49;
SELECT * FROM  test.t_48;
SELECT * FROM  test.t_47;
SELECT * FROM  test.t_46;
SELECT * FROM  test.t_45;
SELECT * FROM  test.t_44;
SELECT * FROM  test.t_43;
SELECT * FROM  test.t_42;
SELECT * FROM  test.t_41;
SELECT * FROM  test.t_40;
SELECT * FROM  test.t_39;
SELECT * FROM  test.t_38;
SELECT * FROM  test.t_37;
SELECT * FROM  test.t_36;
SELECT * FROM  test.t_35;
SELECT * FROM  test.t_34;
SELECT * FROM  test.t_33;
SELECT * FROM  test.t_32;
SELECT * FROM  test.t_31;
SELECT * FROM  test.t_30;
SELECT * FROM  test.t_29;
SELECT * FROM  test.t_28;
SELECT * FROM  test.t_27;
SELECT * FROM  test.t_26;
SELECT * FROM  test.t_25;
SELECT * FROM  test.t_24;
SELECT * FROM  test.t_23;
SELECT * FROM  test.t_22;
SELECT * FROM  test.t_21;
SELECT * FROM  test.t_20;
SELECT * FROM  test.t_19;
SELECT * FROM  test.t_18;
SELECT * FROM  test.t_17;
SELECT * FROM  test.t_16;
SELECT * FROM  test.t_15;
SELECT * FROM  test.t_14;
SELECT * FROM  test.t_13;
SELECT * FROM  test.t_12;
SELECT * FROM  test.t_11;
SELECT * FROM  test.t_10;
SELECT * FROM  test.t_9;
SELECT * FROM  test.t_8;
SELECT * FROM  test.t_7;
SELECT * FROM  test.t_6;
SELECT * FROM  test.t_5;
SELECT * FROM  test.t_4;
SELECT * FROM  test.t_3;
SELECT * FROM  test.t_2;
SELECT * FROM  test.t_1;
SELECT * FROM  test.t_0;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP TABLE  test.t_150;
DROP TABLE  test.t_149;
DROP TABLE  test.t_148;
DROP TABLE  test.t_147;
DROP TABLE  test.t_146;
DROP TABLE  test.t_145;
DROP TABLE  test.t_144;
DROP TABLE  test.t_143;
DROP TABLE  test.t_142;
DROP TABLE  test.t_141;
DROP TABLE  test.t_140;
DROP TABLE  test.t_139;
DROP TABLE  test.t_138;
DROP TABLE  test.t_137;
DROP TABLE  test.t_136;
DROP TABLE  test.t_135;
DROP TABLE  test.t_134;
DROP TABLE  test.t_133;
DROP TABLE  test.t_132;
DROP TABLE  test.t_131;
DROP TABLE  test.t_130;
DROP TABLE  test.t_129;
DROP TABLE  test.t_128;
DROP TABLE  test.t_127;
DROP TABLE  test.t_126;
DROP TABLE  test.t_125;
DROP TABLE  test.t_124;
DROP TABLE  test.t_123;
DROP TABLE  test.t_122;
DROP TABLE  test.t_121;
DROP TABLE  test.t_120;
DROP TABLE  test.t_119;
DROP TABLE  test.t_118;
DROP TABLE  test.t_117;
DROP TABLE  test.t_116;
DROP TABLE  test.t_115;
DROP TABLE  test.t_114;
DROP TABLE  test.t_113;
DROP TABLE  test.t_112;
DROP TABLE  test.t_111;
DROP TABLE  test.t_110;
DROP TABLE  test.t_109;
DROP TABLE  test.t_108;
DROP TABLE  test.t_107;
DROP TABLE  test.t_106;
DROP TABLE  test.t_105;
DROP TABLE  test.t_104;
DROP TABLE  test.t_103;
DROP TABLE  test.t_102;
DROP TABLE  test.t_101;
DROP TABLE  test.t_100;
DROP TABLE  test.t_99;
DROP TABLE  test.t_98;
DROP TABLE  test.t_97;
DROP TABLE  test.t_96;
DROP TABLE  test.t_95;
DROP TABLE  test.t_94;
DROP TABLE  test.t_93;
DROP TABLE  test.t_92;
DROP TABLE  test.t_91;
DROP TABLE  test.t_90;
DROP TABLE  test.t_89;
DROP TABLE  test.t_88;
DROP TABLE  test.t_87;
DROP TABLE  test.t_86;
DROP TABLE  test.t_85;
DROP TABLE  test.t_84;
DROP TABLE  test.t_83;
DROP TABLE  test.t_82;
DROP TABLE  test.t_81;
DROP TABLE  test.t_80;
DROP TABLE  test.t_79;
DROP TABLE  test.t_78;
DROP TABLE  test.t_77;
DROP TABLE  test.t_76;
DROP TABLE  test.t_75;
DROP TABLE  test.t_74;
DROP TABLE  test.t_73;
DROP TABLE  test.t_72;
DROP TABLE  test.t_71;
DROP TABLE  test.t_70;
DROP TABLE  test.t_69;
DROP TABLE  test.t_68;
DROP TABLE  test.t_67;
DROP TABLE  test.t_66;
DROP TABLE  test.t_65;
DROP TABLE  test.t_64;
DROP TABLE  test.t_63;
DROP TABLE  test.t_62;
DROP TABLE  test.t_61;
DROP TABLE  test.t_60;
DROP TABLE  test.t_59;
DROP TABLE  test.t_58;
DROP TABLE  test.t_57;
DROP TABLE  test.t_56;
DROP TABLE  test.t_55;
DROP TABLE  test.t_54;
DROP TABLE  test.t_53;
DROP TABLE  test.t_52;
DROP TABLE  test.t_51;
DROP TABLE  test.t_50;
DROP TABLE  test.t_49;
DROP TABLE  test.t_48;
DROP TABLE  test.t_47;
DROP TABLE  test.t_46;
DROP TABLE  test.t_45;
DROP TABLE  test.t_44;
DROP TABLE  test.t_43;
DROP TABLE  test.t_42;
DROP TABLE  test.t_41;
DROP TABLE  test.t_40;
DROP TABLE  test.t_39;
DROP TABLE  test.t_38;
DROP TABLE  test.t_37;
DROP TABLE  test.t_36;
DROP TABLE  test.t_35;
DROP TABLE  test.t_34;
DROP TABLE  test.t_33;
DROP TABLE  test.t_32;
DROP TABLE  test.t_31;
DROP TABLE  test.t_30;
DROP TABLE  test.t_29;
DROP TABLE  test.t_28;
DROP TABLE  test.t_27;
DROP TABLE  test.t_26;
DROP TABLE  test.t_25;
DROP TABLE  test.t_24;
DROP TABLE  test.t_23;
DROP TABLE  test.t_22;
DROP TABLE  test.t_21;
DROP TABLE  test.t_20;
DROP TABLE  test.t_19;
DROP TABLE  test.t_18;
DROP TABLE  test.t_17;
DROP TABLE  test.t_16;
DROP TABLE  test.t_15;
DROP TABLE  test.t_14;
DROP TABLE  test.t_13;
DROP TABLE  test.t_12;
DROP TABLE  test.t_11;
DROP TABLE  test.t_10;
DROP TABLE  test.t_9;
DROP TABLE  test.t_8;
DROP TABLE  test.t_7;
DROP TABLE  test.t_6;
DROP TABLE  test.t_5;
DROP TABLE  test.t_4;
DROP TABLE  test.t_3;
DROP TABLE  test.t_2;
DROP TABLE  test.t_1;
DROP TABLE  test.t_0;
CREATE SCHEMA s;
CREATE TABLE s.t_99 (i int, j int, k int, l int);
SELECT * FROM s.t_99;
CREATE TABLE s.t_98 (i int, j int, k int, l int);
SELECT * FROM s.t_98;
CREATE TABLE s.t_97 (i int, j int, k int, l int);
SELECT * FROM s.t_97;
CREATE TABLE s.t_96 (i int, j int, k int, l int);
SELECT * FROM s.t_96;
CREATE TABLE s.t_95 (i int, j int, k int, l int);
SELECT * FROM s.t_95;
CREATE TABLE s.t_94 (i int, j int, k int, l int);
SELECT * FROM s.t_94;
CREATE TABLE s.t_93 (i int, j int, k int, l int);
SELECT * FROM s.t_93;
CREATE TABLE s.t_92 (i int, j int, k int, l int);
SELECT * FROM s.t_92;
CREATE TABLE s.t_91 (i int, j int, k int, l int);
SELECT * FROM s.t_91;
CREATE TABLE s.t_90 (i int, j int, k int, l int);
SELECT * FROM s.t_90;
CREATE TABLE s.t_89 (i int, j int, k int, l int);
SELECT * FROM s.t_89;
CREATE TABLE s.t_88 (i int, j int, k int, l int);
SELECT * FROM s.t_88;
CREATE TABLE s.t_87 (i int, j int, k int, l int);
SELECT * FROM s.t_87;
CREATE TABLE s.t_86 (i int, j int, k int, l int);
SELECT * FROM s.t_86;
CREATE TABLE s.t_85 (i int, j int, k int, l int);
SELECT * FROM s.t_85;
CREATE TABLE s.t_84 (i int, j int, k int, l int);
SELECT * FROM s.t_84;
CREATE TABLE s.t_83 (i int, j int, k int, l int);
SELECT * FROM s.t_83;
CREATE TABLE s.t_82 (i int, j int, k int, l int);
SELECT * FROM s.t_82;
CREATE TABLE s.t_81 (i int, j int, k int, l int);
SELECT * FROM s.t_81;
CREATE TABLE s.t_80 (i int, j int, k int, l int);
SELECT * FROM s.t_80;
CREATE TABLE s.t_79 (i int, j int, k int, l int);
SELECT * FROM s.t_79;
CREATE TABLE s.t_78 (i int, j int, k int, l int);
SELECT * FROM s.t_78;
CREATE TABLE s.t_77 (i int, j int, k int, l int);
SELECT * FROM s.t_77;
CREATE TABLE s.t_76 (i int, j int, k int, l int);
SELECT * FROM s.t_76;
CREATE TABLE s.t_75 (i int, j int, k int, l int);
SELECT * FROM s.t_75;
CREATE TABLE s.t_74 (i int, j int, k int, l int);
SELECT * FROM s.t_74;
CREATE TABLE s.t_73 (i int, j int, k int, l int);
SELECT * FROM s.t_73;
CREATE TABLE s.t_72 (i int, j int, k int, l int);
SELECT * FROM s.t_72;
CREATE TABLE s.t_71 (i int, j int, k int, l int);
SELECT * FROM s.t_71;
CREATE TABLE s.t_70 (i int, j int, k int, l int);
SELECT * FROM s.t_70;
CREATE TABLE s.t_69 (i int, j int, k int, l int);
SELECT * FROM s.t_69;
CREATE TABLE s.t_68 (i int, j int, k int, l int);
SELECT * FROM s.t_68;
CREATE TABLE s.t_67 (i int, j int, k int, l int);
SELECT * FROM s.t_67;
CREATE TABLE s.t_66 (i int, j int, k int, l int);
SELECT * FROM s.t_66;
CREATE TABLE s.t_65 (i int, j int, k int, l int);
SELECT * FROM s.t_65;
CREATE TABLE s.t_64 (i int, j int, k int, l int);
SELECT * FROM s.t_64;
CREATE TABLE s.t_63 (i int, j int, k int, l int);
SELECT * FROM s.t_63;
CREATE TABLE s.t_62 (i int, j int, k int, l int);
SELECT * FROM s.t_62;
CREATE TABLE s.t_61 (i int, j int, k int, l int);
SELECT * FROM s.t_61;
CREATE TABLE s.t_60 (i int, j int, k int, l int);
SELECT * FROM s.t_60;
CREATE TABLE s.t_59 (i int, j int, k int, l int);
SELECT * FROM s.t_59;
CREATE TABLE s.t_58 (i int, j int, k int, l int);
SELECT * FROM s.t_58;
CREATE TABLE s.t_57 (i int, j int, k int, l int);
SELECT * FROM s.t_57;
CREATE TABLE s.t_56 (i int, j int, k int, l int);
SELECT * FROM s.t_56;
CREATE TABLE s.t_55 (i int, j int, k int, l int);
SELECT * FROM s.t_55;
CREATE TABLE s.t_54 (i int, j int, k int, l int);
SELECT * FROM s.t_54;
CREATE TABLE s.t_53 (i int, j int, k int, l int);
SELECT * FROM s.t_53;
CREATE TABLE s.t_52 (i int, j int, k int, l int);
SELECT * FROM s.t_52;
CREATE TABLE s.t_51 (i int, j int, k int, l int);
SELECT * FROM s.t_51;
CREATE TABLE s.t_50 (i int, j int, k int, l int);
SELECT * FROM s.t_50;
CREATE TABLE s.t_49 (i int, j int, k int, l int);
SELECT * FROM s.t_49;
CREATE TABLE s.t_48 (i int, j int, k int, l int);
SELECT * FROM s.t_48;
CREATE TABLE s.t_47 (i int, j int, k int, l int);
SELECT * FROM s.t_47;
CREATE TABLE s.t_46 (i int, j int, k int, l int);
SELECT * FROM s.t_46;
CREATE TABLE s.t_45 (i int, j int, k int, l int);
SELECT * FROM s.t_45;
CREATE TABLE s.t_44 (i int, j int, k int, l int);
SELECT * FROM s.t_44;
CREATE TABLE s.t_43 (i int, j int, k int, l int);
SELECT * FROM s.t_43;
CREATE TABLE s.t_42 (i int, j int, k int, l int);
SELECT * FROM s.t_42;
CREATE TABLE s.t_41 (i int, j int, k int, l int);
SELECT * FROM s.t_41;
CREATE TABLE s.t_40 (i int, j int, k int, l int);
SELECT * FROM s.t_40;
CREATE TABLE s.t_39 (i int, j int, k int, l int);
SELECT * FROM s.t_39;
CREATE TABLE s.t_38 (i int, j int, k int, l int);
SELECT * FROM s.t_38;
CREATE TABLE s.t_37 (i int, j int, k int, l int);
SELECT * FROM s.t_37;
CREATE TABLE s.t_36 (i int, j int, k int, l int);
SELECT * FROM s.t_36;
CREATE TABLE s.t_35 (i int, j int, k int, l int);
SELECT * FROM s.t_35;
CREATE TABLE s.t_34 (i int, j int, k int, l int);
SELECT * FROM s.t_34;
CREATE TABLE s.t_33 (i int, j int, k int, l int);
SELECT * FROM s.t_33;
CREATE TABLE s.t_32 (i int, j int, k int, l int);
SELECT * FROM s.t_32;
CREATE TABLE s.t_31 (i int, j int, k int, l int);
SELECT * FROM s.t_31;
CREATE TABLE s.t_30 (i int, j int, k int, l int);
SELECT * FROM s.t_30;
CREATE TABLE s.t_29 (i int, j int, k int, l int);
SELECT * FROM s.t_29;
CREATE TABLE s.t_28 (i int, j int, k int, l int);
SELECT * FROM s.t_28;
CREATE TABLE s.t_27 (i int, j int, k int, l int);
SELECT * FROM s.t_27;
CREATE TABLE s.t_26 (i int, j int, k int, l int);
SELECT * FROM s.t_26;
CREATE TABLE s.t_25 (i int, j int, k int, l int);
SELECT * FROM s.t_25;
CREATE TABLE s.t_24 (i int, j int, k int, l int);
SELECT * FROM s.t_24;
CREATE TABLE s.t_23 (i int, j int, k int, l int);
SELECT * FROM s.t_23;
CREATE TABLE s.t_22 (i int, j int, k int, l int);
SELECT * FROM s.t_22;
CREATE TABLE s.t_21 (i int, j int, k int, l int);
SELECT * FROM s.t_21;
CREATE TABLE s.t_20 (i int, j int, k int, l int);
SELECT * FROM s.t_20;
CREATE TABLE s.t_19 (i int, j int, k int, l int);
SELECT * FROM s.t_19;
CREATE TABLE s.t_18 (i int, j int, k int, l int);
SELECT * FROM s.t_18;
CREATE TABLE s.t_17 (i int, j int, k int, l int);
SELECT * FROM s.t_17;
CREATE TABLE s.t_16 (i int, j int, k int, l int);
SELECT * FROM s.t_16;
CREATE TABLE s.t_15 (i int, j int, k int, l int);
SELECT * FROM s.t_15;
CREATE TABLE s.t_14 (i int, j int, k int, l int);
SELECT * FROM s.t_14;
CREATE TABLE s.t_13 (i int, j int, k int, l int);
SELECT * FROM s.t_13;
CREATE TABLE s.t_12 (i int, j int, k int, l int);
SELECT * FROM s.t_12;
CREATE TABLE s.t_11 (i int, j int, k int, l int);
SELECT * FROM s.t_11;
CREATE TABLE s.t_10 (i int, j int, k int, l int);
SELECT * FROM s.t_10;
CREATE TABLE s.t_9 (i int, j int, k int, l int);
SELECT * FROM s.t_9;
CREATE TABLE s.t_8 (i int, j int, k int, l int);
SELECT * FROM s.t_8;
CREATE TABLE s.t_7 (i int, j int, k int, l int);
SELECT * FROM s.t_7;
CREATE TABLE s.t_6 (i int, j int, k int, l int);
SELECT * FROM s.t_6;
CREATE TABLE s.t_5 (i int, j int, k int, l int);
SELECT * FROM s.t_5;
CREATE TABLE s.t_4 (i int, j int, k int, l int);
SELECT * FROM s.t_4;
CREATE TABLE s.t_3 (i int, j int, k int, l int);
SELECT * FROM s.t_3;
CREATE TABLE s.t_2 (i int, j int, k int, l int);
SELECT * FROM s.t_2;
CREATE TABLE s.t_1 (i int, j int, k int, l int);
SELECT * FROM s.t_1;
CREATE TABLE s.t_0 (i int, j int, k int, l int);
SELECT * FROM s.t_0;
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP SCHEMA s;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
CREATE SCHEMA s1;
CREATE TABLE s1.t_myisam(i INT) ENGINE=MYISAM;
CREATE VIEW s1.v1 AS SELECT * FROM s1.t_myisam;
SELECT * FROM s1.v1;
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP SCHEMA s1;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
CREATE SCHEMA s2;
CREATE TABLE s2.t_innodb(i INT) TABLESPACE=innodb_system;
CREATE VIEW v2 AS SELECT * FROM s2.t_innodb;
SELECT * FROM v2;
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP SCHEMA s2;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP VIEW v2;
CREATE SCHEMA s3;
CREATE TABLE s3.t_innodb(i INT) TABLESPACE=innodb_system;
CREATE VIEW s3.v3 AS SELECT * FROM s3.t_innodb;
SELECT * FROM s3.v3;
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP SCHEMA s3;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
CREATE SCHEMA s4;
CREATE VIEW s4.v4 AS SELECT 1 AS i;
CREATE VIEW s4.v5 AS SELECT * FROM s4.v4;
SELECT * FROM s4.v5;
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP SCHEMA s4;
SET @diff = (SELECT COUNT_ALLOC - N_alloc FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT COUNT_FREE - N_free FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
SET @diff = (SELECT CURRENT_COUNT_USED - N_curr FROM performance_schema.memory_summary_global_by_event_name, dd_pfs.mem_events WHERE EVENT_NAME = 'memory/sql/dd::objects' AND EVENT_NAME = Name AND Query = 'savepoint');
DELETE FROM dd_pfs.mem_events WHERE Query = 'savepoint';
INSERT INTO dd_pfs.mem_events (Name, N_alloc, N_free, N_curr, Sz_alloc, Sz_free, Sz_curr, Query) SELECT EVENT_NAME AS Name, COUNT_ALLOC AS N_alloc, COUNT_FREE AS N_free, CURRENT_COUNT_USED AS N_curr, SUM_NUMBER_OF_BYTES_ALLOC AS Sz_alloc, SUM_NUMBER_OF_BYTES_FREE AS Sz_free, CURRENT_NUMBER_OF_BYTES_USED AS Sz_curr, 'savepoint' AS Query FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME = 'memory/sql/dd::infrastructure' OR EVENT_NAME = 'memory/sql/dd::objects' OR EVENT_NAME = 'memory/sql/dd::String_type';
DROP TABLE dd_pfs.mem_events;
DROP SCHEMA dd_pfs;
