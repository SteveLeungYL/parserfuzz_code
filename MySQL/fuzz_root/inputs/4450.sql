SET optimizer_switch='subquery_to_derived=on';
CREATE TABLE t1(a INT);
CREATE TABLE t2(a INT);
INSERT INTO t1 VALUES (1),(2),(3),(4);
INSERT INTO t2 VALUES (1),(2);
CREATE TABLE t0 AS SELECT * FROM t1;
CREATE TABLE t3(a INT, b INT);
INSERT INTO t3 VALUES (1,3), (2,3);
ANALYZE TABLE t1, t2, t0, t3;
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2);
SELECT t1.* FROM t1 LEFT OUTER JOIN (SELECT COUNT(a) AS cnt FROM t2) AS derived ON TRUE WHERE t1.a > derived.cnt;
explain SELECT t1.* FROM t1 LEFT OUTER JOIN (SELECT COUNT(a) AS cnt FROM t2) AS derived ON TRUE WHERE t1.a > derived.cnt;
SELECT t0.*, t1.* FROM t0 LEFT OUTER JOIN t1 ON t0.a != t1.a WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2);
explain SELECT t0.*, t1.* FROM t0 LEFT OUTER JOIN t1 ON t0.a != t1.a WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2);
SELECT * FROM t0 LEFT OUTER JOIN t1 on t0.a = t1.a WHERE t0.a > (SELECT COUNT(a) AS cnt FROM t2);
explain SELECT * FROM t0 LEFT OUTER JOIN t1 on t0.a = t1.a WHERE t0.a > (SELECT COUNT(a) AS cnt FROM t2);
SELECT t0.*, t1.* FROM (t0 LEFT OUTER JOIN t1 ON t0.a != t1.a) LEFT OUTER JOIN (SELECT COUNT(a) AS cnt FROM t2) AS derived ON TRUE WHERE t1.a > derived.cnt;
explain SELECT t0.*, t1.* FROM (t0 LEFT OUTER JOIN t1 ON t0.a != t1.a) LEFT OUTER JOIN (SELECT COUNT(a) AS cnt FROM t2) AS derived ON TRUE WHERE t1.a > derived.cnt;
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2) OR t1.a = 2;
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2) OR t1.a = 2;
SELECT t1.* FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2) AND t1.a < (SELECT MAX(a) * 4 AS mx FROM t2);
explain SELECT t1.* FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2) AND t1.a < (SELECT MAX(a) * 4 AS mx FROM t2);
SELECT t1.* FROM t1 LEFT JOIN (SELECT COUNT(a) AS cnt FROM t2) AS lj1 ON TRUE LEFT JOIN (SELECT MAX(a) * 4 AS mx FROM t2) AS lj2 ON TRUE WHERE t1.a > cnt AND t1.a < mx;
explain SELECT t1.* FROM t1 LEFT JOIN (SELECT COUNT(a) AS cnt FROM t2) AS lj1 ON TRUE LEFT JOIN (SELECT MAX(a) * 4 AS mx FROM t2) AS lj2 ON TRUE WHERE t1.a > cnt AND t1.a < mx;
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t3);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t3);
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t3 GROUP BY a);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t3 GROUP BY a);
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1);
SELECT * FROM t1 WHERE t1.a > (SELECT a from t1 WHERE false);
explain SELECT * FROM t1 WHERE t1.a > (SELECT a from t1 WHERE false);
SELECT a + (SELECT a from t1 WHERE false) FROM t1;
explain SELECT a + (SELECT a from t1 WHERE false) FROM t1;
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 1);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 1);
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 1 OFFSET 1);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 1 OFFSET 1);
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 1 OFFSET 0);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 1 OFFSET 0);
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 2 OFFSET 0);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 2 OFFSET 0);
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 2 OFFSET 1);
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION SELECT 1 LIMIT 2 OFFSET 1);
SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION (SELECT 1 LIMIT 1));
explain SELECT * FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2 UNION (SELECT 1 LIMIT 1));
SELECT * FROM t1 WHERE t1.a > (SELECT a FROM t2 LIMIT 1);
explain SELECT * FROM t1 WHERE t1.a > (SELECT a FROM t2 LIMIT 1);
SELECT * FROM t1 WHERE t1.a > (SELECT a FROM t2);
explain SELECT * FROM t1 WHERE t1.a > (SELECT a FROM t2);
EXPLAIN SELECT (SELECT SUM(a) + (SELECT SUM(t1.a) FROM t1) + SUM(t3.a) FROM t2) FROM t3;
EXPLAIN SELECT SUM(a), (SELECT SUM(b) FROM t3) scalar FROM t1 HAVING SUM(a) > scalar;
EXPLAIN SELECT t1.a + (@foo:=3) FROM t1 WHERE t1.a > (SELECT COUNT(a) AS cnt FROM t2);
explain SELECT DISTINCT 3 + (SELECT COUNT(a) + RAND() FROM t1) FROM t1;
SELECT COUNT(*) > 1 FROM (SELECT DISTINCT 3 + (SELECT COUNT(a) + RAND() FROM t1) FROM t1) AS dt;
SELECT t1.a, t2.a FROM t1 JOIN t2 ON t1.a+t2.a = (SELECT COUNT(*) FROM t1);
explain SELECT t1.a, t2.a FROM t1 JOIN t2 ON t1.a+t2.a = (SELECT COUNT(*) FROM t1);
SELECT t1.a, t2.a, t3.a FROM t1 JOIN t2 ON t1.a+t2.a = (SELECT COUNT(*) FROM t1) JOIN t3 ON t1.a + (SELECT MIN(a) FROM t1) = t3.b;
explain SELECT t1.a, t2.a, t3.a FROM t1 JOIN t2 ON t1.a+t2.a = (SELECT COUNT(*) FROM t1) JOIN t3 ON t1.a + (SELECT MIN(a) FROM t1) = t3.b;
SELECT t1.a, t2.a, t3.a FROM t1 LEFT JOIN ( t2 JOIN t3 ON t2.a = (SELECT COUNT(*) FROM t1) ) ON t1.a + (SELECT MIN(a) FROM t1) = t3.b;
explain SELECT t1.a, t2.a, t3.a FROM t1 LEFT JOIN ( t2 JOIN t3 ON t2.a = (SELECT COUNT(*) FROM t1) ) ON t1.a + (SELECT MIN(a) FROM t1) = t3.b;
SET optimizer_switch='subquery_to_derived=default';
SELECT t1.a, t2.a, t3.a FROM t1 LEFT JOIN ( t2 JOIN t3 ON t2.a = (SELECT COUNT(*) FROM t1) ) ON t1.a + (SELECT MIN(a) FROM t1) = t3.b;
SET optimizer_switch='subquery_to_derived=on';
SELECT t1.a, t2.a, t3.a FROM t1 LEFT JOIN (SELECT MIN(a) FROM t1) derived_1 ON TRUE LEFT JOIN ( t2 LEFT JOIN (SELECT COUNT(*) FROM t1) AS derived_2 ON TRUE JOIN t3 ON t2.a = derived_2.`COUNT(*)` ) ON t1.a + derived_1.`MIN(a)` = t3.b;
explain SELECT t1.a, t2.a, t3.a FROM t1 LEFT JOIN (SELECT MIN(a) FROM t1) derived_1 ON TRUE LEFT JOIN ( t2 LEFT JOIN (SELECT COUNT(*) FROM t1) AS derived_2 ON TRUE JOIN t3 ON t2.a = derived_2.`COUNT(*)` ) ON t1.a + derived_1.`MIN(a)` = t3.b;
SELECT t1.a, t2.a, t3.a FROM t1 STRAIGHT_JOIN ( t2 STRAIGHT_JOIN t3 ON t2.a = (SELECT COUNT(*) FROM t1) ) ON t1.a + (SELECT MIN(a) FROM t1) = t3.b;
explain SELECT t1.a, t2.a, t3.a FROM t1 STRAIGHT_JOIN ( t2 STRAIGHT_JOIN t3 ON t2.a = (SELECT COUNT(*) FROM t1) ) ON t1.a + (SELECT MIN(a) FROM t1) = t3.b;
SELECT a + (SELECT -SUM(a) FROM t1) AS cnt FROM t2;
explain SELECT a + (SELECT -SUM(a) FROM t1) AS cnt FROM t2;
SELECT a + derived.cnt FROM t2 LEFT OUTER JOIN (SELECT -SUM(a) AS cnt FROM t1) AS derived ON TRUE;
explain SELECT a + derived.cnt FROM t2 LEFT OUTER JOIN (SELECT -SUM(a) AS cnt FROM t1) AS derived ON TRUE;
SELECT a + (SELECT SUM(a) FROM t1) FROM t1 UNION ALL SELECT a + (SELECT SUM(a) FROM t1) FROM t1;
explain SELECT a + (SELECT SUM(a) FROM t1) FROM t1 UNION ALL SELECT a + (SELECT SUM(a) FROM t1) FROM t1;
SELECT a + (SELECT SUM(a) + (SELECT COUNT(a) FROM t1) FROM t1) AS cnt FROM t2;
explain SELECT a + (SELECT SUM(a) + (SELECT COUNT(a) FROM t1) FROM t1) AS cnt FROM t2;
SELECT (t2.a + derived_1_0.sum_plus_cnt) AS cnt FROM t2 LEFT JOIN (SELECT (derived_2_0.tmp_aggr_1 + derived_2_1.count_a) AS sum_plus_cnt FROM (SELECT STRAIGHT_JOIN SUM(t1.a) AS tmp_aggr_1 from t1) derived_2_0 LEFT JOIN (SELECT COUNT(t1.a) AS count_a from t1) derived_2_1 ON TRUE) derived_1_0 ON TRUE;
explain SELECT (t2.a + derived_1_0.sum_plus_cnt) AS cnt FROM t2 LEFT JOIN (SELECT (derived_2_0.tmp_aggr_1 + derived_2_1.count_a) AS sum_plus_cnt FROM (SELECT STRAIGHT_JOIN SUM(t1.a) AS tmp_aggr_1 from t1) derived_2_0 LEFT JOIN (SELECT COUNT(t1.a) AS count_a from t1) derived_2_1 ON TRUE) derived_1_0 ON TRUE;
SELECT a + (SELECT SUM(a) + (SELECT COUNT(a) FROM t1) FROM (SELECT * from t1) t11) AS cnt FROM t2;
SELECT AVG(a) OVER () AS `avg`, a + (SELECT SUM(a) + (SELECT COUNT(a) FROM t1) FROM (SELECT * from t1) t11) AS cnt FROM t2;
DROP TABLE t0, t1, t2, t3;
CREATE TABLE t1(a INT, b INT);
INSERT INTO t1 (a) VALUES (1), (2);
CREATE TABLE t2 SELECT * FROM t1;
ANALYZE TABLE t1, t2;
SELECT (WITH RECURSIVE dt AS (SELECT t1.a AS a UNION SELECT a+1 FROM dt WHERE a<10) SELECT t1.a * CONCAT(COUNT(*), '.', FLOOR(AVG(dt.a))) FROM dt) AS subq FROM t1;
explain SELECT (WITH RECURSIVE dt AS (SELECT t1.a AS a UNION SELECT a+1 FROM dt WHERE a<10) SELECT t1.a * CONCAT(COUNT(*), '.', FLOOR(AVG(dt.a))) FROM dt) AS subq FROM t1;
SELECT derived0.cnct AS subq FROM t1 LEFT JOIN LATERAL (WITH RECURSIVE dt AS (SELECT t1.a AS a UNION SELECT (dt.a + 1) FROM dt WHERE dt.a < 10) SELECT t1.a * CONCAT(COUNT(0), '.', FLOOR(AVG(dt.a))) AS cnct FROM dt) derived0 ON TRUE;
explain SELECT derived0.cnct AS subq FROM t1 LEFT JOIN LATERAL (WITH RECURSIVE dt AS (SELECT t1.a AS a UNION SELECT (dt.a + 1) FROM dt WHERE dt.a < 10) SELECT t1.a * CONCAT(COUNT(0), '.', FLOOR(AVG(dt.a))) AS cnct FROM dt) derived0 ON TRUE;
DROP TABLE t1, t2;
CREATE TABLE t1(i INT);
CREATE TABLE t2(a INT);
CREATE TABLE t3(x INT);
ANALYZE TABLE t1, t2, t3;
EXPLAIN SELECT ( SELECT (SELECT COUNT(*) FROM t2) + (SELECT AVG(a) FROM t2 WHERE t2.a = t3.x) AS aggs FROM t1 ) AS bignest FROM t3;
EXPLAIN SELECT ( SELECT (SELECT COUNT(*) FROM t2) AS aggs FROM t1 ) AS bignest FROM t3;
DROP TABLE t1, t2, t3;
CREATE TABLE t1 (a INT NOT NULL, b SMALLINT);
INSERT INTO t1 VALUES (12,12);
ANALYZE TABLE t1;
SELECT (SELECT COUNT(*) FROM t1 WHERE a=11725) AS tot, IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 WHERE false;
explain SELECT (SELECT COUNT(*) FROM t1 WHERE a=11725) AS tot, IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 WHERE false;
SELECT (SELECT COUNT(*) FROM t1 WHERE a=11725) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 WHERE false;
explain SELECT (SELECT COUNT(*) FROM t1 WHERE a=11725) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 WHERE false;
INSERT INTO t1 VALUES (13, 12);
SELECT DISTINCT (SELECT COUNT(*) FROM t1) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 WHERE a > 5 GROUP BY a;
explain SELECT DISTINCT (SELECT COUNT(*) FROM t1) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 WHERE a > 5 GROUP BY a;
SELECT (SELECT COUNT(*) FROM t1) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 GROUP BY a LIMIT 1;
explain SELECT (SELECT COUNT(*) FROM t1) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 GROUP BY a LIMIT 1;
SELECT (SELECT (SELECT COUNT(*) FROM t1) + MAX(t1.b) + MIN(t1_outer.a) AS tot FROM t1) FROM t1 AS t1_outer;
explain SELECT (SELECT (SELECT COUNT(*) FROM t1) + MAX(t1.b) + MIN(t1_outer.a) AS tot FROM t1) FROM t1 AS t1_outer;
SELECT (SELECT COUNT(*) FROM t1) + MAX(b) + (SELECT MIN(a) + AVG(top.a) FROM t1) AS tot FROM t1 top;
explain SELECT (SELECT COUNT(*) FROM t1) + MAX(b) + (SELECT MIN(a) + AVG(top.a) FROM t1) AS tot FROM t1 top;
SELECT (SELECT COUNT(*) + `outer`.a FROM t1) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 AS `outer` GROUP BY a;
explain SELECT (SELECT COUNT(*) + `outer`.a FROM t1) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 AS `outer` GROUP BY a;
SELECT (SELECT COUNT(*) + derived_1.d_1 FROM t1) + IFNULL(derived_1.`MAX(b)`,0) + 1 + 5 AS mx FROM (SELECT STRAIGHT_JOIN MAX(outer_t.b) AS `MAX(b)`, outer_t.a AS d_1 FROM t1 outer_t GROUP BY outer_t.a) derived_1;
SELECT (derived_1.`COUNT(*) + outer_t.a` + IFNULL(derived_0.`MAX(b)`,0)) + 1 + 5 AS mx FROM (SELECT STRAIGHT_JOIN MAX(outer_t.b) AS `MAX(b)`, outer_t.a AS d_1 FROM t1 outer_t GROUP BY outer_t.a) derived_0 LEFT JOIN LATERAL (SELECT (COUNT(0) + derived_0.d_1) AS `COUNT(*) + outer_t.a`                         FROM t1) derived_1 ON(true) WHERE true;
SELECT (SELECT COUNT(*) + MAX(outer_t.b) FROM t1) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 AS outer_t GROUP BY a;
explain SELECT (SELECT COUNT(*) + MAX(outer_t.b) FROM t1) + IFNULL(MAX(b),0)+1 + 5 AS mx FROM t1 AS outer_t GROUP BY a;
DROP TABLE t1;
CREATE VIEW events_digest AS SELECT * FROM performance_schema.events_statements_summary_by_digest;
SELECT s2.avg_us avg_us, IFNULL(SUM(s1.cnt)/NULLIF((SELECT COUNT(*) FROM events_digest), 0), 0) percentile FROM sys.`x$ps_digest_avg_latency_distribution` AS s1 JOIN sys.`x$ps_digest_avg_latency_distribution` AS s2 ON s1.avg_us <= s2.avg_us GROUP BY s2.avg_us HAVING IFNULL(SUM(s1.cnt)/ NULLIF((SELECT COUNT(*) FROM events_digest), 0), 0) > 0.95 ORDER BY percentile LIMIT 1;
EXPLAIN SELECT s2.avg_us avg_us, IFNULL(SUM(s1.cnt)/NULLIF((SELECT COUNT(*) FROM events_digest), 0), 0) percentile FROM sys.`x$ps_digest_avg_latency_distribution` AS s1 JOIN sys.`x$ps_digest_avg_latency_distribution` AS s2 ON s1.avg_us <= s2.avg_us GROUP BY s2.avg_us HAVING IFNULL(SUM(s1.cnt)/ NULLIF((SELECT COUNT(*) FROM events_digest), 0), 0) > 0.95 ORDER BY percentile LIMIT 1;
SET sql_mode='';
EXPLAIN SELECT s2.avg_us AS avg_us, IFNULL((SUM(s1.cnt) / NULLIF(derived_1_0.`COUNT(*)`,0)),0) AS percentile, derived_1_1.`COUNT(*)` FROM sys.`x$ps_digest_avg_latency_distribution` s1 JOIN sys.`x$ps_digest_avg_latency_distribution` s2 LEFT JOIN (SELECT COUNT(0) AS `COUNT(*)`       FROM performance_schema.events_statements_summary_by_digest) derived_1_0 ON(TRUE) LEFT JOIN (SELECT COUNT(0) AS `COUNT(*)`       FROM performance_schema.events_statements_summary_by_digest) derived_1_1 ON(TRUE) WHERE (s1.avg_us <= s2.avg_us) GROUP BY s2.avg_us HAVING (IFNULL((SUM(s1.cnt) / NULLIF(derived_1_1.`COUNT(*)`,0)),0) > 0.95) ORDER BY percentile LIMIT 1;
SET sql_mode=default;
SELECT AVG(s2.avg_us) OVER () + 3 AS avgsum, s2.avg_us avg_us, s2.avg_us avg_us2, SUM(s2.avg_us) OVER () + 3 AS avgsum2, IFNULL(SUM(s1.cnt)/NULLIF((SELECT COUNT(*) FROM events_digest), 0), 0) percentile FROM sys.`x$ps_digest_avg_latency_distribution` AS s1 JOIN sys.`x$ps_digest_avg_latency_distribution` AS s2 ON s1.avg_us <= s2.avg_us GROUP BY s2.avg_us HAVING IFNULL(SUM(s1.cnt)/ NULLIF((SELECT COUNT(*) FROM events_digest), 0), 0) > 0.95 ORDER BY percentile LIMIT 1;
DROP VIEW events_digest;
CREATE TABLE t1 ( school_name VARCHAR(45) NOT NULL, country     VARCHAR(45) NOT NULL, funds_requested FLOAT NOT NULL, schooltype  VARCHAR(45) NOT NULL );
INSERT INTO t1 VALUES ("the school", "USA", 1200, "Human");
ANALYZE TABLE t1;
SELECT COUNT(country) AS countrycount, SUM(funds_requested) AS smcnt, country, (SELECT SUM(funds_requested) FROM t1) AS total_funds, ROW_NUMBER() OVER (ORDER BY STDDEV_POP(funds_requested)) AS rn FROM t1 GROUP BY country HAVING AVG(funds_requested) > 0 ORDER BY SUM(ABS(funds_requested));
EXPLAIN SELECT COUNT(country) AS countrycount, SUM(funds_requested) AS smcnt, country, (SELECT SUM(funds_requested) FROM t1) AS total_funds, ROW_NUMBER() OVER (ORDER BY STDDEV_POP(funds_requested)) AS rn FROM t1 GROUP BY country HAVING AVG(funds_requested) > 0 ORDER BY SUM(ABS(funds_requested));
SET sql_mode='';
SELECT COUNT(country) AS countrycount, SUM(funds_requested) AS smcnt, country, (SELECT SUM(funds_requested) FROM t1) AS total_funds, ROW_NUMBER() OVER (ORDER BY STDDEV_POP(funds_requested)) AS rn FROM t1 HAVING AVG(funds_requested) > 0 ORDER BY SUM(ABS(funds_requested));
EXPLAIN SELECT COUNT(country) AS countrycount, SUM(funds_requested) AS smcnt, country, (SELECT SUM(funds_requested) FROM t1) AS total_funds, ROW_NUMBER() OVER (ORDER BY STDDEV_POP(funds_requested)) AS rn FROM t1 HAVING AVG(funds_requested) > 0 ORDER BY SUM(ABS(funds_requested));
SELECT derived_1_0.countrycount AS countrycount, derived_1_0.smcnt AS smcnt, derived_1_0.d_1 AS country, derived_1_1.`SUM(funds_requested)` AS total_funds, row_number() OVER (ORDER BY derived_1_1.`SUM(funds_requested)` )  AS rn FROM (SELECT COUNT(t1.country) AS countrycount, SUM(t1.funds_requested) AS smcnt, AVG(t1.funds_requested) AS tmp_aggr_1, STD(t1.funds_requested) AS tmp_aggr_2, t1.country AS d_1 FROM t1 HAVING (AVG(t1.funds_requested) > 0)) derived_1_0 LEFT JOIN (SELECT SUM(t1.funds_requested) AS `SUM(funds_requested)`       FROM t1) derived_1_1 ON(TRUE);
SET sql_mode=default;
DROP TABLE t1;
CREATE TABLE cc (i INT);
INSERT INTO cc VALUES (1);
ANALYZE TABLE cc;
SELECT (SELECT COUNT(i) FROM cc AS cc_alias WHERE (cc.i IN (SELECT cc_alias.i FROM cc))) AS cnt FROM cc GROUP BY i;
EXPLAIN SELECT (SELECT COUNT(i) FROM cc AS cc_alias WHERE (cc.i IN (SELECT cc_alias.i FROM cc))) AS cnt FROM cc GROUP BY i;
DROP TABLE cc;
CREATE TABLE t (a INT);
INSERT INTO t VALUES (1);
ANALYZE TABLE t;
EXPLAIN SELECT ( SELECT GROUP_CONCAT((SELECT COUNT(q.i) FROM t)) FROM t) AS i FROM (SELECT a AS i FROM t) q;
DROP TABLE t;
CREATE TABLE t1 (a INT NOT NULL, b INT NOT NULL);
CREATE TABLE t2 (c INT NOT NULL, d INT NOT NULL);
CREATE TABLE t3 (e INT NOT NULL);
INSERT INTO t1 VALUES (1,10), (2,10), (1,20), (2,20), (3,20), (2,30), (4,40);
INSERT INTO t2 VALUES (2,10), (2,20), (4,10), (5,10), (3,20), (2,40);
INSERT INTO t3 VALUES (10), (30), (10), (20);
ANALYZE TABLE t1, t2, t3;
SELECT * FROM t1 AS ta WHERE ta.a IN (SELECT c FROM t2 AS tb WHERE (SELECT MIN(e) FROM t3 as tc WHERE tc.e IS NOT NULL) < SOME(SELECT e FROM t3 as tc WHERE ta.b=tc.e));
EXPLAIN SELECT * FROM t1 AS ta WHERE ta.a IN (SELECT c FROM t2 AS tb WHERE (SELECT MIN(e) FROM t3 as tc WHERE tc.e IS NOT NULL) < SOME(SELECT e FROM t3 as tc WHERE ta.b=tc.e));
SELECT SUM(t1.a) + (SELECT SUM(t2.c) FROM t2), (SELECT COUNT(t3.e) FROM t3) FROM t1;
EXPLAIN SELECT SUM(t1.a) + (SELECT SUM(t2.c) FROM t2), (SELECT COUNT(t3.e) FROM t3) FROM t1;
DROP TABLE t1, t2, t3;
CREATE TABLE t1( pedcompralote INT NOT NULL, pedcompraseq SMALLINT );
INSERT INTO t1 VALUES (12,12);
CREATE TABLE t2( cod INT NOT NULL, ped INT, PRIMARY KEY (cod), KEY ped (ped) );
INSERT INTO t2 VALUES (11724,1779), (11725,1779), (11726,1779), (11727,1779), (11728,1779), (11729,1779), (11730,1779), (11731,1779);
SELECT (SELECT COUNT(*) FROM t1 WHERE pedcompralote=11725) AS tot, IFNULL(MAX(pedcompraseq),0)+1 AS newcode FROM t1 WHERE pedcompralote IN (SELECT cod FROM t2 WHERE ped=1779);
DROP TABLE t1, t2;
CREATE TABLE t1(i int, j int);
CREATE TABLE t2(i int);
INSERT INTO t1 VALUES (1, 10);
INSERT INTO t1 VALUES (1, 20);
INSERT INTO t1 VALUES (1, 30);
INSERT INTO t1 VALUES (2, 11);
INSERT INTO t1 VALUES (2, 20);
INSERT INTO t1 VALUES (2, 30);
INSERT INTO t2 VALUES (25);
ANALYZE TABLE t1, t2;
SELECT SUM(j) FROM t1 HAVING SUM(j) > (SELECT SUM(t2.i) FROM t2);
EXPLAIN SELECT SUM(j) FROM t1 HAVING SUM(j) > (SELECT SUM(t2.i) FROM t2);
SELECT j FROM t1 HAVING j > (SELECT MIN(t2.i) FROM t2);
EXPLAIN SELECT j FROM t1 HAVING j > (SELECT MIN(t2.i) FROM t2);
SELECT i, j FROM t1 GROUP BY i, j HAVING SUM(j) > (SELECT SUM(t2.i) FROM t2);
EXPLAIN SELECT i, j FROM t1 GROUP BY i, j HAVING SUM(j) > (SELECT SUM(t2.i) FROM t2);
SELECT i, j FROM t1 GROUP BY i, j WITH ROLLUP HAVING SUM(j) > (SELECT SUM(t2.i) FROM t2);
EXPLAIN SELECT i, j FROM t1 GROUP BY i, j WITH ROLLUP HAVING SUM(j) > (SELECT SUM(t2.i) FROM t2);
DROP TABLE t1, t2;
CREATE TABLE supplier ( s_suppkey INT NOT NULL, s_nationkey BIGINT NOT NULL, PRIMARY KEY (s_suppkey) );
CREATE TABLE nation ( n_nationkey INT NOT NULL, n_name CHAR(25) DEFAULT NULL, PRIMARY KEY (n_nationkey) );
CREATE TABLE partsupp ( ps_partkey BIGINT NOT NULL, ps_suppkey BIGINT NOT NULL, ps_availqty INT DEFAULT NULL, ps_supplycost DECIMAL(10,0) DEFAULT NULL, PRIMARY KEY (ps_partkey, ps_suppkey) );
INSERT INTO nation VALUES (1, 'germany'), (2, 'norway'), (3, 'u.k.');
INSERT INTO supplier VALUES (1, 1);
INSERT INTO partsupp VALUES (1, 1, 10, 555), (2, 1, 1, 2222), (3, 1, 300, 700), (4, 1, 259, 400), (5, 1, 20,  400), (6, 1, 1000, 300), (7, 1, 30, 700);
ANALYZE TABLE supplier, nation, partsupp;
SELECT ps_partkey, SUM(ps_supplycost * ps_availqty) AS value FROM partsupp, supplier, nation WHERE ps_suppkey = s_suppkey AND s_nationkey = n_nationkey AND n_name = 'germany' GROUP BY ps_partkey HAVING SUM(ps_supplycost * ps_availqty) > ( SELECT SUM(ps_supplycost * ps_availqty) * 0.1 FROM partsupp, supplier, nation WHERE ps_suppkey = s_suppkey AND s_nationkey = n_nationkey AND n_name = 'germany'         ) ORDER BY value DESC;
EXPLAIN SELECT ps_partkey, SUM(ps_supplycost * ps_availqty) AS value FROM partsupp, supplier, nation WHERE ps_suppkey = s_suppkey AND s_nationkey = n_nationkey AND n_name = 'germany' GROUP BY ps_partkey HAVING SUM(ps_supplycost * ps_availqty) > ( SELECT SUM(ps_supplycost * ps_availqty) * 0.1 FROM partsupp, supplier, nation WHERE ps_suppkey = s_suppkey AND s_nationkey = n_nationkey AND n_name = 'germany'         ) ORDER BY value DESC;
DROP TABLE partsupp, nation, supplier;
CREATE TABLE tbl1 ( login INT NOT NULL, numb DECIMAL(15,2) NOT NULL DEFAULT '0.00', PRIMARY KEY (login), KEY numb (numb) );
CREATE TABLE tbl2 ( login INT NOT NULL, cmd TINYINT NOT NULL, nump DECIMAL(15,2) NOT NULL DEFAULT '0.00', KEY cmd (cmd), KEY login (login) );
SET autocommit = 0;
START TRANSACTION;
insert into tbl1 values(500, '500.');
insert into tbl1 values(499, '499.');
insert into tbl1 values(498, '498.');
insert into tbl1 values(497, '497.');
insert into tbl1 values(496, '496.');
insert into tbl1 values(495, '495.');
insert into tbl1 values(494, '494.');
insert into tbl1 values(493, '493.');
insert into tbl1 values(492, '492.');
insert into tbl1 values(491, '491.');
insert into tbl1 values(490, '490.');
insert into tbl1 values(489, '489.');
insert into tbl1 values(488, '488.');
insert into tbl1 values(487, '487.');
insert into tbl1 values(486, '486.');
insert into tbl1 values(485, '485.');
insert into tbl1 values(484, '484.');
insert into tbl1 values(483, '483.');
insert into tbl1 values(482, '482.');
insert into tbl1 values(481, '481.');
insert into tbl1 values(480, '480.');
insert into tbl1 values(479, '479.');
insert into tbl1 values(478, '478.');
insert into tbl1 values(477, '477.');
insert into tbl1 values(476, '476.');
insert into tbl1 values(475, '475.');
insert into tbl1 values(474, '474.');
insert into tbl1 values(473, '473.');
insert into tbl1 values(472, '472.');
insert into tbl1 values(471, '471.');
insert into tbl1 values(470, '470.');
insert into tbl1 values(469, '469.');
insert into tbl1 values(468, '468.');
insert into tbl1 values(467, '467.');
insert into tbl1 values(466, '466.');
insert into tbl1 values(465, '465.');
insert into tbl1 values(464, '464.');
insert into tbl1 values(463, '463.');
insert into tbl1 values(462, '462.');
insert into tbl1 values(461, '461.');
insert into tbl1 values(460, '460.');
insert into tbl1 values(459, '459.');
insert into tbl1 values(458, '458.');
insert into tbl1 values(457, '457.');
insert into tbl1 values(456, '456.');
insert into tbl1 values(455, '455.');
insert into tbl1 values(454, '454.');
insert into tbl1 values(453, '453.');
insert into tbl1 values(452, '452.');
insert into tbl1 values(451, '451.');
insert into tbl1 values(450, '450.');
insert into tbl1 values(449, '449.');
insert into tbl1 values(448, '448.');
insert into tbl1 values(447, '447.');
insert into tbl1 values(446, '446.');
insert into tbl1 values(445, '445.');
insert into tbl1 values(444, '444.');
insert into tbl1 values(443, '443.');
insert into tbl1 values(442, '442.');
insert into tbl1 values(441, '441.');
insert into tbl1 values(440, '440.');
insert into tbl1 values(439, '439.');
insert into tbl1 values(438, '438.');
insert into tbl1 values(437, '437.');
insert into tbl1 values(436, '436.');
insert into tbl1 values(435, '435.');
insert into tbl1 values(434, '434.');
insert into tbl1 values(433, '433.');
insert into tbl1 values(432, '432.');
insert into tbl1 values(431, '431.');
insert into tbl1 values(430, '430.');
insert into tbl1 values(429, '429.');
insert into tbl1 values(428, '428.');
insert into tbl1 values(427, '427.');
insert into tbl1 values(426, '426.');
insert into tbl1 values(425, '425.');
insert into tbl1 values(424, '424.');
insert into tbl1 values(423, '423.');
insert into tbl1 values(422, '422.');
insert into tbl1 values(421, '421.');
insert into tbl1 values(420, '420.');
insert into tbl1 values(419, '419.');
insert into tbl1 values(418, '418.');
insert into tbl1 values(417, '417.');
insert into tbl1 values(416, '416.');
insert into tbl1 values(415, '415.');
insert into tbl1 values(414, '414.');
insert into tbl1 values(413, '413.');
insert into tbl1 values(412, '412.');
insert into tbl1 values(411, '411.');
insert into tbl1 values(410, '410.');
insert into tbl1 values(409, '409.');
insert into tbl1 values(408, '408.');
insert into tbl1 values(407, '407.');
insert into tbl1 values(406, '406.');
insert into tbl1 values(405, '405.');
insert into tbl1 values(404, '404.');
insert into tbl1 values(403, '403.');
insert into tbl1 values(402, '402.');
insert into tbl1 values(401, '401.');
insert into tbl1 values(400, '400.');
insert into tbl1 values(399, '399.');
insert into tbl1 values(398, '398.');
insert into tbl1 values(397, '397.');
insert into tbl1 values(396, '396.');
insert into tbl1 values(395, '395.');
insert into tbl1 values(394, '394.');
insert into tbl1 values(393, '393.');
insert into tbl1 values(392, '392.');
insert into tbl1 values(391, '391.');
insert into tbl1 values(390, '390.');
insert into tbl1 values(389, '389.');
insert into tbl1 values(388, '388.');
insert into tbl1 values(387, '387.');
insert into tbl1 values(386, '386.');
insert into tbl1 values(385, '385.');
insert into tbl1 values(384, '384.');
insert into tbl1 values(383, '383.');
insert into tbl1 values(382, '382.');
insert into tbl1 values(381, '381.');
insert into tbl1 values(380, '380.');
insert into tbl1 values(379, '379.');
insert into tbl1 values(378, '378.');
insert into tbl1 values(377, '377.');
insert into tbl1 values(376, '376.');
insert into tbl1 values(375, '375.');
insert into tbl1 values(374, '374.');
insert into tbl1 values(373, '373.');
insert into tbl1 values(372, '372.');
insert into tbl1 values(371, '371.');
insert into tbl1 values(370, '370.');
insert into tbl1 values(369, '369.');
insert into tbl1 values(368, '368.');
insert into tbl1 values(367, '367.');
insert into tbl1 values(366, '366.');
insert into tbl1 values(365, '365.');
insert into tbl1 values(364, '364.');
insert into tbl1 values(363, '363.');
insert into tbl1 values(362, '362.');
insert into tbl1 values(361, '361.');
insert into tbl1 values(360, '360.');
insert into tbl1 values(359, '359.');
insert into tbl1 values(358, '358.');
insert into tbl1 values(357, '357.');
insert into tbl1 values(356, '356.');
insert into tbl1 values(355, '355.');
insert into tbl1 values(354, '354.');
insert into tbl1 values(353, '353.');
insert into tbl1 values(352, '352.');
insert into tbl1 values(351, '351.');
insert into tbl1 values(350, '350.');
insert into tbl1 values(349, '349.');
insert into tbl1 values(348, '348.');
insert into tbl1 values(347, '347.');
insert into tbl1 values(346, '346.');
insert into tbl1 values(345, '345.');
insert into tbl1 values(344, '344.');
insert into tbl1 values(343, '343.');
insert into tbl1 values(342, '342.');
insert into tbl1 values(341, '341.');
insert into tbl1 values(340, '340.');
insert into tbl1 values(339, '339.');
insert into tbl1 values(338, '338.');
insert into tbl1 values(337, '337.');
insert into tbl1 values(336, '336.');
insert into tbl1 values(335, '335.');
insert into tbl1 values(334, '334.');
insert into tbl1 values(333, '333.');
insert into tbl1 values(332, '332.');
insert into tbl1 values(331, '331.');
insert into tbl1 values(330, '330.');
insert into tbl1 values(329, '329.');
insert into tbl1 values(328, '328.');
insert into tbl1 values(327, '327.');
insert into tbl1 values(326, '326.');
insert into tbl1 values(325, '325.');
insert into tbl1 values(324, '324.');
insert into tbl1 values(323, '323.');
insert into tbl1 values(322, '322.');
insert into tbl1 values(321, '321.');
insert into tbl1 values(320, '320.');
insert into tbl1 values(319, '319.');
insert into tbl1 values(318, '318.');
insert into tbl1 values(317, '317.');
insert into tbl1 values(316, '316.');
insert into tbl1 values(315, '315.');
insert into tbl1 values(314, '314.');
insert into tbl1 values(313, '313.');
insert into tbl1 values(312, '312.');
insert into tbl1 values(311, '311.');
insert into tbl1 values(310, '310.');
insert into tbl1 values(309, '309.');
insert into tbl1 values(308, '308.');
insert into tbl1 values(307, '307.');
insert into tbl1 values(306, '306.');
insert into tbl1 values(305, '305.');
insert into tbl1 values(304, '304.');
insert into tbl1 values(303, '303.');
insert into tbl1 values(302, '302.');
insert into tbl1 values(301, '301.');
insert into tbl1 values(300, '300.');
insert into tbl1 values(299, '299.');
insert into tbl1 values(298, '298.');
insert into tbl1 values(297, '297.');
insert into tbl1 values(296, '296.');
insert into tbl1 values(295, '295.');
insert into tbl1 values(294, '294.');
insert into tbl1 values(293, '293.');
insert into tbl1 values(292, '292.');
insert into tbl1 values(291, '291.');
insert into tbl1 values(290, '290.');
insert into tbl1 values(289, '289.');
insert into tbl1 values(288, '288.');
insert into tbl1 values(287, '287.');
insert into tbl1 values(286, '286.');
insert into tbl1 values(285, '285.');
insert into tbl1 values(284, '284.');
insert into tbl1 values(283, '283.');
insert into tbl1 values(282, '282.');
insert into tbl1 values(281, '281.');
insert into tbl1 values(280, '280.');
insert into tbl1 values(279, '279.');
insert into tbl1 values(278, '278.');
insert into tbl1 values(277, '277.');
insert into tbl1 values(276, '276.');
insert into tbl1 values(275, '275.');
insert into tbl1 values(274, '274.');
insert into tbl1 values(273, '273.');
insert into tbl1 values(272, '272.');
insert into tbl1 values(271, '271.');
insert into tbl1 values(270, '270.');
insert into tbl1 values(269, '269.');
insert into tbl1 values(268, '268.');
insert into tbl1 values(267, '267.');
insert into tbl1 values(266, '266.');
insert into tbl1 values(265, '265.');
insert into tbl1 values(264, '264.');
insert into tbl1 values(263, '263.');
insert into tbl1 values(262, '262.');
insert into tbl1 values(261, '261.');
insert into tbl1 values(260, '260.');
insert into tbl1 values(259, '259.');
insert into tbl1 values(258, '258.');
insert into tbl1 values(257, '257.');
insert into tbl1 values(256, '256.');
insert into tbl1 values(255, '255.');
insert into tbl1 values(254, '254.');
insert into tbl1 values(253, '253.');
insert into tbl1 values(252, '252.');
insert into tbl1 values(251, '251.');
insert into tbl1 values(250, '250.');
insert into tbl1 values(249, '249.');
insert into tbl1 values(248, '248.');
insert into tbl1 values(247, '247.');
insert into tbl1 values(246, '246.');
insert into tbl1 values(245, '245.');
insert into tbl1 values(244, '244.');
insert into tbl1 values(243, '243.');
insert into tbl1 values(242, '242.');
insert into tbl1 values(241, '241.');
insert into tbl1 values(240, '240.');
insert into tbl1 values(239, '239.');
insert into tbl1 values(238, '238.');
insert into tbl1 values(237, '237.');
insert into tbl1 values(236, '236.');
insert into tbl1 values(235, '235.');
insert into tbl1 values(234, '234.');
insert into tbl1 values(233, '233.');
insert into tbl1 values(232, '232.');
insert into tbl1 values(231, '231.');
insert into tbl1 values(230, '230.');
insert into tbl1 values(229, '229.');
insert into tbl1 values(228, '228.');
insert into tbl1 values(227, '227.');
insert into tbl1 values(226, '226.');
insert into tbl1 values(225, '225.');
insert into tbl1 values(224, '224.');
insert into tbl1 values(223, '223.');
insert into tbl1 values(222, '222.');
insert into tbl1 values(221, '221.');
insert into tbl1 values(220, '220.');
insert into tbl1 values(219, '219.');
insert into tbl1 values(218, '218.');
insert into tbl1 values(217, '217.');
insert into tbl1 values(216, '216.');
insert into tbl1 values(215, '215.');
insert into tbl1 values(214, '214.');
insert into tbl1 values(213, '213.');
insert into tbl1 values(212, '212.');
insert into tbl1 values(211, '211.');
insert into tbl1 values(210, '210.');
insert into tbl1 values(209, '209.');
insert into tbl1 values(208, '208.');
insert into tbl1 values(207, '207.');
insert into tbl1 values(206, '206.');
insert into tbl1 values(205, '205.');
insert into tbl1 values(204, '204.');
insert into tbl1 values(203, '203.');
insert into tbl1 values(202, '202.');
insert into tbl1 values(201, '201.');
insert into tbl1 values(200, '200.');
insert into tbl1 values(199, '199.');
insert into tbl1 values(198, '198.');
insert into tbl1 values(197, '197.');
insert into tbl1 values(196, '196.');
insert into tbl1 values(195, '195.');
insert into tbl1 values(194, '194.');
insert into tbl1 values(193, '193.');
insert into tbl1 values(192, '192.');
insert into tbl1 values(191, '191.');
insert into tbl1 values(190, '190.');
insert into tbl1 values(189, '189.');
insert into tbl1 values(188, '188.');
insert into tbl1 values(187, '187.');
insert into tbl1 values(186, '186.');
insert into tbl1 values(185, '185.');
insert into tbl1 values(184, '184.');
insert into tbl1 values(183, '183.');
insert into tbl1 values(182, '182.');
insert into tbl1 values(181, '181.');
insert into tbl1 values(180, '180.');
insert into tbl1 values(179, '179.');
insert into tbl1 values(178, '178.');
insert into tbl1 values(177, '177.');
insert into tbl1 values(176, '176.');
insert into tbl1 values(175, '175.');
insert into tbl1 values(174, '174.');
insert into tbl1 values(173, '173.');
insert into tbl1 values(172, '172.');
insert into tbl1 values(171, '171.');
insert into tbl1 values(170, '170.');
insert into tbl1 values(169, '169.');
insert into tbl1 values(168, '168.');
insert into tbl1 values(167, '167.');
insert into tbl1 values(166, '166.');
insert into tbl1 values(165, '165.');
insert into tbl1 values(164, '164.');
insert into tbl1 values(163, '163.');
insert into tbl1 values(162, '162.');
insert into tbl1 values(161, '161.');
insert into tbl1 values(160, '160.');
insert into tbl1 values(159, '159.');
insert into tbl1 values(158, '158.');
insert into tbl1 values(157, '157.');
insert into tbl1 values(156, '156.');
insert into tbl1 values(155, '155.');
insert into tbl1 values(154, '154.');
insert into tbl1 values(153, '153.');
insert into tbl1 values(152, '152.');
insert into tbl1 values(151, '151.');
insert into tbl1 values(150, '150.');
insert into tbl1 values(149, '149.');
insert into tbl1 values(148, '148.');
insert into tbl1 values(147, '147.');
insert into tbl1 values(146, '146.');
insert into tbl1 values(145, '145.');
insert into tbl1 values(144, '144.');
insert into tbl1 values(143, '143.');
insert into tbl1 values(142, '142.');
insert into tbl1 values(141, '141.');
insert into tbl1 values(140, '140.');
insert into tbl1 values(139, '139.');
insert into tbl1 values(138, '138.');
insert into tbl1 values(137, '137.');
insert into tbl1 values(136, '136.');
insert into tbl1 values(135, '135.');
insert into tbl1 values(134, '134.');
insert into tbl1 values(133, '133.');
insert into tbl1 values(132, '132.');
insert into tbl1 values(131, '131.');
insert into tbl1 values(130, '130.');
insert into tbl1 values(129, '129.');
insert into tbl1 values(128, '128.');
insert into tbl1 values(127, '127.');
insert into tbl1 values(126, '126.');
insert into tbl1 values(125, '125.');
insert into tbl1 values(124, '124.');
insert into tbl1 values(123, '123.');
insert into tbl1 values(122, '122.');
insert into tbl1 values(121, '121.');
insert into tbl1 values(120, '120.');
insert into tbl1 values(119, '119.');
insert into tbl1 values(118, '118.');
insert into tbl1 values(117, '117.');
insert into tbl1 values(116, '116.');
insert into tbl1 values(115, '115.');
insert into tbl1 values(114, '114.');
insert into tbl1 values(113, '113.');
insert into tbl1 values(112, '112.');
insert into tbl1 values(111, '111.');
insert into tbl1 values(110, '110.');
insert into tbl1 values(109, '109.');
insert into tbl1 values(108, '108.');
insert into tbl1 values(107, '107.');
insert into tbl1 values(106, '106.');
insert into tbl1 values(105, '105.');
insert into tbl1 values(104, '104.');
insert into tbl1 values(103, '103.');
insert into tbl1 values(102, '102.');
insert into tbl1 values(101, '101.');
insert into tbl1 values(100, '100.');
insert into tbl1 values(99, '99.');
insert into tbl1 values(98, '98.');
insert into tbl1 values(97, '97.');
insert into tbl1 values(96, '96.');
insert into tbl1 values(95, '95.');
insert into tbl1 values(94, '94.');
insert into tbl1 values(93, '93.');
insert into tbl1 values(92, '92.');
insert into tbl1 values(91, '91.');
insert into tbl1 values(90, '90.');
insert into tbl1 values(89, '89.');
insert into tbl1 values(88, '88.');
insert into tbl1 values(87, '87.');
insert into tbl1 values(86, '86.');
insert into tbl1 values(85, '85.');
insert into tbl1 values(84, '84.');
insert into tbl1 values(83, '83.');
insert into tbl1 values(82, '82.');
insert into tbl1 values(81, '81.');
insert into tbl1 values(80, '80.');
insert into tbl1 values(79, '79.');
insert into tbl1 values(78, '78.');
insert into tbl1 values(77, '77.');
insert into tbl1 values(76, '76.');
insert into tbl1 values(75, '75.');
insert into tbl1 values(74, '74.');
insert into tbl1 values(73, '73.');
insert into tbl1 values(72, '72.');
insert into tbl1 values(71, '71.');
insert into tbl1 values(70, '70.');
insert into tbl1 values(69, '69.');
insert into tbl1 values(68, '68.');
insert into tbl1 values(67, '67.');
insert into tbl1 values(66, '66.');
insert into tbl1 values(65, '65.');
insert into tbl1 values(64, '64.');
insert into tbl1 values(63, '63.');
insert into tbl1 values(62, '62.');
insert into tbl1 values(61, '61.');
insert into tbl1 values(60, '60.');
insert into tbl1 values(59, '59.');
insert into tbl1 values(58, '58.');
insert into tbl1 values(57, '57.');
insert into tbl1 values(56, '56.');
insert into tbl1 values(55, '55.');
insert into tbl1 values(54, '54.');
insert into tbl1 values(53, '53.');
insert into tbl1 values(52, '52.');
insert into tbl1 values(51, '51.');
insert into tbl1 values(50, '50.');
insert into tbl1 values(49, '49.');
insert into tbl1 values(48, '48.');
insert into tbl1 values(47, '47.');
insert into tbl1 values(46, '46.');
insert into tbl1 values(45, '45.');
insert into tbl1 values(44, '44.');
insert into tbl1 values(43, '43.');
insert into tbl1 values(42, '42.');
insert into tbl1 values(41, '41.');
insert into tbl1 values(40, '40.');
insert into tbl1 values(39, '39.');
insert into tbl1 values(38, '38.');
insert into tbl1 values(37, '37.');
insert into tbl1 values(36, '36.');
insert into tbl1 values(35, '35.');
insert into tbl1 values(34, '34.');
insert into tbl1 values(33, '33.');
insert into tbl1 values(32, '32.');
insert into tbl1 values(31, '31.');
insert into tbl1 values(30, '30.');
insert into tbl1 values(29, '29.');
insert into tbl1 values(28, '28.');
insert into tbl1 values(27, '27.');
insert into tbl1 values(26, '26.');
insert into tbl1 values(25, '25.');
insert into tbl1 values(24, '24.');
insert into tbl1 values(23, '23.');
insert into tbl1 values(22, '22.');
insert into tbl1 values(21, '21.');
insert into tbl1 values(20, '20.');
insert into tbl1 values(19, '19.');
insert into tbl1 values(18, '18.');
insert into tbl1 values(17, '17.');
insert into tbl1 values(16, '16.');
insert into tbl1 values(15, '15.');
insert into tbl1 values(14, '14.');
insert into tbl1 values(13, '13.');
insert into tbl1 values(12, '12.');
insert into tbl1 values(11, '11.');
insert into tbl1 values(10, '10.');
insert into tbl1 values(9, '9.');
insert into tbl1 values(8, '8.');
insert into tbl1 values(7, '7.');
insert into tbl1 values(6, '6.');
insert into tbl1 values(5, '5.');
insert into tbl1 values(4, '4.');
insert into tbl1 values(3, '3.');
insert into tbl1 values(2, '2.');
insert into tbl1 values(1, '1.');
insert into tbl2 values(500, 500%127,'500.');
insert into tbl2 values(499, 499%127,'499.');
insert into tbl2 values(498, 498%127,'498.');
insert into tbl2 values(497, 497%127,'497.');
insert into tbl2 values(496, 496%127,'496.');
insert into tbl2 values(495, 495%127,'495.');
insert into tbl2 values(494, 494%127,'494.');
insert into tbl2 values(493, 493%127,'493.');
insert into tbl2 values(492, 492%127,'492.');
insert into tbl2 values(491, 491%127,'491.');
insert into tbl2 values(490, 490%127,'490.');
insert into tbl2 values(489, 489%127,'489.');
insert into tbl2 values(488, 488%127,'488.');
insert into tbl2 values(487, 487%127,'487.');
insert into tbl2 values(486, 486%127,'486.');
insert into tbl2 values(485, 485%127,'485.');
insert into tbl2 values(484, 484%127,'484.');
insert into tbl2 values(483, 483%127,'483.');
insert into tbl2 values(482, 482%127,'482.');
insert into tbl2 values(481, 481%127,'481.');
insert into tbl2 values(480, 480%127,'480.');
insert into tbl2 values(479, 479%127,'479.');
insert into tbl2 values(478, 478%127,'478.');
insert into tbl2 values(477, 477%127,'477.');
insert into tbl2 values(476, 476%127,'476.');
insert into tbl2 values(475, 475%127,'475.');
insert into tbl2 values(474, 474%127,'474.');
insert into tbl2 values(473, 473%127,'473.');
insert into tbl2 values(472, 472%127,'472.');
insert into tbl2 values(471, 471%127,'471.');
insert into tbl2 values(470, 470%127,'470.');
insert into tbl2 values(469, 469%127,'469.');
insert into tbl2 values(468, 468%127,'468.');
insert into tbl2 values(467, 467%127,'467.');
insert into tbl2 values(466, 466%127,'466.');
insert into tbl2 values(465, 465%127,'465.');
insert into tbl2 values(464, 464%127,'464.');
insert into tbl2 values(463, 463%127,'463.');
insert into tbl2 values(462, 462%127,'462.');
insert into tbl2 values(461, 461%127,'461.');
insert into tbl2 values(460, 460%127,'460.');
insert into tbl2 values(459, 459%127,'459.');
insert into tbl2 values(458, 458%127,'458.');
insert into tbl2 values(457, 457%127,'457.');
insert into tbl2 values(456, 456%127,'456.');
insert into tbl2 values(455, 455%127,'455.');
insert into tbl2 values(454, 454%127,'454.');
insert into tbl2 values(453, 453%127,'453.');
insert into tbl2 values(452, 452%127,'452.');
insert into tbl2 values(451, 451%127,'451.');
insert into tbl2 values(450, 450%127,'450.');
insert into tbl2 values(449, 449%127,'449.');
insert into tbl2 values(448, 448%127,'448.');
insert into tbl2 values(447, 447%127,'447.');
insert into tbl2 values(446, 446%127,'446.');
insert into tbl2 values(445, 445%127,'445.');
insert into tbl2 values(444, 444%127,'444.');
insert into tbl2 values(443, 443%127,'443.');
insert into tbl2 values(442, 442%127,'442.');
insert into tbl2 values(441, 441%127,'441.');
insert into tbl2 values(440, 440%127,'440.');
insert into tbl2 values(439, 439%127,'439.');
insert into tbl2 values(438, 438%127,'438.');
insert into tbl2 values(437, 437%127,'437.');
insert into tbl2 values(436, 436%127,'436.');
insert into tbl2 values(435, 435%127,'435.');
insert into tbl2 values(434, 434%127,'434.');
insert into tbl2 values(433, 433%127,'433.');
insert into tbl2 values(432, 432%127,'432.');
insert into tbl2 values(431, 431%127,'431.');
insert into tbl2 values(430, 430%127,'430.');
insert into tbl2 values(429, 429%127,'429.');
insert into tbl2 values(428, 428%127,'428.');
insert into tbl2 values(427, 427%127,'427.');
insert into tbl2 values(426, 426%127,'426.');
insert into tbl2 values(425, 425%127,'425.');
insert into tbl2 values(424, 424%127,'424.');
insert into tbl2 values(423, 423%127,'423.');
insert into tbl2 values(422, 422%127,'422.');
insert into tbl2 values(421, 421%127,'421.');
insert into tbl2 values(420, 420%127,'420.');
insert into tbl2 values(419, 419%127,'419.');
insert into tbl2 values(418, 418%127,'418.');
insert into tbl2 values(417, 417%127,'417.');
insert into tbl2 values(416, 416%127,'416.');
insert into tbl2 values(415, 415%127,'415.');
insert into tbl2 values(414, 414%127,'414.');
insert into tbl2 values(413, 413%127,'413.');
insert into tbl2 values(412, 412%127,'412.');
insert into tbl2 values(411, 411%127,'411.');
insert into tbl2 values(410, 410%127,'410.');
insert into tbl2 values(409, 409%127,'409.');
insert into tbl2 values(408, 408%127,'408.');
insert into tbl2 values(407, 407%127,'407.');
insert into tbl2 values(406, 406%127,'406.');
insert into tbl2 values(405, 405%127,'405.');
insert into tbl2 values(404, 404%127,'404.');
insert into tbl2 values(403, 403%127,'403.');
insert into tbl2 values(402, 402%127,'402.');
insert into tbl2 values(401, 401%127,'401.');
insert into tbl2 values(400, 400%127,'400.');
insert into tbl2 values(399, 399%127,'399.');
insert into tbl2 values(398, 398%127,'398.');
insert into tbl2 values(397, 397%127,'397.');
insert into tbl2 values(396, 396%127,'396.');
insert into tbl2 values(395, 395%127,'395.');
insert into tbl2 values(394, 394%127,'394.');
insert into tbl2 values(393, 393%127,'393.');
insert into tbl2 values(392, 392%127,'392.');
insert into tbl2 values(391, 391%127,'391.');
insert into tbl2 values(390, 390%127,'390.');
insert into tbl2 values(389, 389%127,'389.');
insert into tbl2 values(388, 388%127,'388.');
insert into tbl2 values(387, 387%127,'387.');
insert into tbl2 values(386, 386%127,'386.');
insert into tbl2 values(385, 385%127,'385.');
insert into tbl2 values(384, 384%127,'384.');
insert into tbl2 values(383, 383%127,'383.');
insert into tbl2 values(382, 382%127,'382.');
insert into tbl2 values(381, 381%127,'381.');
insert into tbl2 values(380, 380%127,'380.');
insert into tbl2 values(379, 379%127,'379.');
insert into tbl2 values(378, 378%127,'378.');
insert into tbl2 values(377, 377%127,'377.');
insert into tbl2 values(376, 376%127,'376.');
insert into tbl2 values(375, 375%127,'375.');
insert into tbl2 values(374, 374%127,'374.');
insert into tbl2 values(373, 373%127,'373.');
insert into tbl2 values(372, 372%127,'372.');
insert into tbl2 values(371, 371%127,'371.');
insert into tbl2 values(370, 370%127,'370.');
insert into tbl2 values(369, 369%127,'369.');
insert into tbl2 values(368, 368%127,'368.');
insert into tbl2 values(367, 367%127,'367.');
insert into tbl2 values(366, 366%127,'366.');
insert into tbl2 values(365, 365%127,'365.');
insert into tbl2 values(364, 364%127,'364.');
insert into tbl2 values(363, 363%127,'363.');
insert into tbl2 values(362, 362%127,'362.');
insert into tbl2 values(361, 361%127,'361.');
insert into tbl2 values(360, 360%127,'360.');
insert into tbl2 values(359, 359%127,'359.');
insert into tbl2 values(358, 358%127,'358.');
insert into tbl2 values(357, 357%127,'357.');
insert into tbl2 values(356, 356%127,'356.');
insert into tbl2 values(355, 355%127,'355.');
insert into tbl2 values(354, 354%127,'354.');
insert into tbl2 values(353, 353%127,'353.');
insert into tbl2 values(352, 352%127,'352.');
insert into tbl2 values(351, 351%127,'351.');
insert into tbl2 values(350, 350%127,'350.');
insert into tbl2 values(349, 349%127,'349.');
insert into tbl2 values(348, 348%127,'348.');
insert into tbl2 values(347, 347%127,'347.');
insert into tbl2 values(346, 346%127,'346.');
insert into tbl2 values(345, 345%127,'345.');
insert into tbl2 values(344, 344%127,'344.');
insert into tbl2 values(343, 343%127,'343.');
insert into tbl2 values(342, 342%127,'342.');
insert into tbl2 values(341, 341%127,'341.');
insert into tbl2 values(340, 340%127,'340.');
insert into tbl2 values(339, 339%127,'339.');
insert into tbl2 values(338, 338%127,'338.');
insert into tbl2 values(337, 337%127,'337.');
insert into tbl2 values(336, 336%127,'336.');
insert into tbl2 values(335, 335%127,'335.');
insert into tbl2 values(334, 334%127,'334.');
insert into tbl2 values(333, 333%127,'333.');
insert into tbl2 values(332, 332%127,'332.');
insert into tbl2 values(331, 331%127,'331.');
insert into tbl2 values(330, 330%127,'330.');
insert into tbl2 values(329, 329%127,'329.');
insert into tbl2 values(328, 328%127,'328.');
insert into tbl2 values(327, 327%127,'327.');
insert into tbl2 values(326, 326%127,'326.');
insert into tbl2 values(325, 325%127,'325.');
insert into tbl2 values(324, 324%127,'324.');
insert into tbl2 values(323, 323%127,'323.');
insert into tbl2 values(322, 322%127,'322.');
insert into tbl2 values(321, 321%127,'321.');
insert into tbl2 values(320, 320%127,'320.');
insert into tbl2 values(319, 319%127,'319.');
insert into tbl2 values(318, 318%127,'318.');
insert into tbl2 values(317, 317%127,'317.');
insert into tbl2 values(316, 316%127,'316.');
insert into tbl2 values(315, 315%127,'315.');
insert into tbl2 values(314, 314%127,'314.');
insert into tbl2 values(313, 313%127,'313.');
insert into tbl2 values(312, 312%127,'312.');
insert into tbl2 values(311, 311%127,'311.');
insert into tbl2 values(310, 310%127,'310.');
insert into tbl2 values(309, 309%127,'309.');
insert into tbl2 values(308, 308%127,'308.');
insert into tbl2 values(307, 307%127,'307.');
insert into tbl2 values(306, 306%127,'306.');
insert into tbl2 values(305, 305%127,'305.');
insert into tbl2 values(304, 304%127,'304.');
insert into tbl2 values(303, 303%127,'303.');
insert into tbl2 values(302, 302%127,'302.');
insert into tbl2 values(301, 301%127,'301.');
insert into tbl2 values(300, 300%127,'300.');
insert into tbl2 values(299, 299%127,'299.');
insert into tbl2 values(298, 298%127,'298.');
insert into tbl2 values(297, 297%127,'297.');
insert into tbl2 values(296, 296%127,'296.');
insert into tbl2 values(295, 295%127,'295.');
insert into tbl2 values(294, 294%127,'294.');
insert into tbl2 values(293, 293%127,'293.');
insert into tbl2 values(292, 292%127,'292.');
insert into tbl2 values(291, 291%127,'291.');
insert into tbl2 values(290, 290%127,'290.');
insert into tbl2 values(289, 289%127,'289.');
insert into tbl2 values(288, 288%127,'288.');
insert into tbl2 values(287, 287%127,'287.');
insert into tbl2 values(286, 286%127,'286.');
insert into tbl2 values(285, 285%127,'285.');
insert into tbl2 values(284, 284%127,'284.');
insert into tbl2 values(283, 283%127,'283.');
insert into tbl2 values(282, 282%127,'282.');
insert into tbl2 values(281, 281%127,'281.');
insert into tbl2 values(280, 280%127,'280.');
insert into tbl2 values(279, 279%127,'279.');
insert into tbl2 values(278, 278%127,'278.');
insert into tbl2 values(277, 277%127,'277.');
insert into tbl2 values(276, 276%127,'276.');
insert into tbl2 values(275, 275%127,'275.');
insert into tbl2 values(274, 274%127,'274.');
insert into tbl2 values(273, 273%127,'273.');
insert into tbl2 values(272, 272%127,'272.');
insert into tbl2 values(271, 271%127,'271.');
insert into tbl2 values(270, 270%127,'270.');
insert into tbl2 values(269, 269%127,'269.');
insert into tbl2 values(268, 268%127,'268.');
insert into tbl2 values(267, 267%127,'267.');
insert into tbl2 values(266, 266%127,'266.');
insert into tbl2 values(265, 265%127,'265.');
insert into tbl2 values(264, 264%127,'264.');
insert into tbl2 values(263, 263%127,'263.');
insert into tbl2 values(262, 262%127,'262.');
insert into tbl2 values(261, 261%127,'261.');
insert into tbl2 values(260, 260%127,'260.');
insert into tbl2 values(259, 259%127,'259.');
insert into tbl2 values(258, 258%127,'258.');
insert into tbl2 values(257, 257%127,'257.');
insert into tbl2 values(256, 256%127,'256.');
insert into tbl2 values(255, 255%127,'255.');
insert into tbl2 values(254, 254%127,'254.');
insert into tbl2 values(253, 253%127,'253.');
insert into tbl2 values(252, 252%127,'252.');
insert into tbl2 values(251, 251%127,'251.');
insert into tbl2 values(250, 250%127,'250.');
insert into tbl2 values(249, 249%127,'249.');
insert into tbl2 values(248, 248%127,'248.');
insert into tbl2 values(247, 247%127,'247.');
insert into tbl2 values(246, 246%127,'246.');
insert into tbl2 values(245, 245%127,'245.');
insert into tbl2 values(244, 244%127,'244.');
insert into tbl2 values(243, 243%127,'243.');
insert into tbl2 values(242, 242%127,'242.');
insert into tbl2 values(241, 241%127,'241.');
insert into tbl2 values(240, 240%127,'240.');
insert into tbl2 values(239, 239%127,'239.');
insert into tbl2 values(238, 238%127,'238.');
insert into tbl2 values(237, 237%127,'237.');
insert into tbl2 values(236, 236%127,'236.');
insert into tbl2 values(235, 235%127,'235.');
insert into tbl2 values(234, 234%127,'234.');
insert into tbl2 values(233, 233%127,'233.');
insert into tbl2 values(232, 232%127,'232.');
insert into tbl2 values(231, 231%127,'231.');
insert into tbl2 values(230, 230%127,'230.');
insert into tbl2 values(229, 229%127,'229.');
insert into tbl2 values(228, 228%127,'228.');
insert into tbl2 values(227, 227%127,'227.');
insert into tbl2 values(226, 226%127,'226.');
insert into tbl2 values(225, 225%127,'225.');
insert into tbl2 values(224, 224%127,'224.');
insert into tbl2 values(223, 223%127,'223.');
insert into tbl2 values(222, 222%127,'222.');
insert into tbl2 values(221, 221%127,'221.');
insert into tbl2 values(220, 220%127,'220.');
insert into tbl2 values(219, 219%127,'219.');
insert into tbl2 values(218, 218%127,'218.');
insert into tbl2 values(217, 217%127,'217.');
insert into tbl2 values(216, 216%127,'216.');
insert into tbl2 values(215, 215%127,'215.');
insert into tbl2 values(214, 214%127,'214.');
insert into tbl2 values(213, 213%127,'213.');
insert into tbl2 values(212, 212%127,'212.');
insert into tbl2 values(211, 211%127,'211.');
insert into tbl2 values(210, 210%127,'210.');
insert into tbl2 values(209, 209%127,'209.');
insert into tbl2 values(208, 208%127,'208.');
insert into tbl2 values(207, 207%127,'207.');
insert into tbl2 values(206, 206%127,'206.');
insert into tbl2 values(205, 205%127,'205.');
insert into tbl2 values(204, 204%127,'204.');
insert into tbl2 values(203, 203%127,'203.');
insert into tbl2 values(202, 202%127,'202.');
insert into tbl2 values(201, 201%127,'201.');
insert into tbl2 values(200, 200%127,'200.');
insert into tbl2 values(199, 199%127,'199.');
insert into tbl2 values(198, 198%127,'198.');
insert into tbl2 values(197, 197%127,'197.');
insert into tbl2 values(196, 196%127,'196.');
insert into tbl2 values(195, 195%127,'195.');
insert into tbl2 values(194, 194%127,'194.');
insert into tbl2 values(193, 193%127,'193.');
insert into tbl2 values(192, 192%127,'192.');
insert into tbl2 values(191, 191%127,'191.');
insert into tbl2 values(190, 190%127,'190.');
insert into tbl2 values(189, 189%127,'189.');
insert into tbl2 values(188, 188%127,'188.');
insert into tbl2 values(187, 187%127,'187.');
insert into tbl2 values(186, 186%127,'186.');
insert into tbl2 values(185, 185%127,'185.');
insert into tbl2 values(184, 184%127,'184.');
insert into tbl2 values(183, 183%127,'183.');
insert into tbl2 values(182, 182%127,'182.');
insert into tbl2 values(181, 181%127,'181.');
insert into tbl2 values(180, 180%127,'180.');
insert into tbl2 values(179, 179%127,'179.');
insert into tbl2 values(178, 178%127,'178.');
insert into tbl2 values(177, 177%127,'177.');
insert into tbl2 values(176, 176%127,'176.');
insert into tbl2 values(175, 175%127,'175.');
insert into tbl2 values(174, 174%127,'174.');
insert into tbl2 values(173, 173%127,'173.');
insert into tbl2 values(172, 172%127,'172.');
insert into tbl2 values(171, 171%127,'171.');
insert into tbl2 values(170, 170%127,'170.');
insert into tbl2 values(169, 169%127,'169.');
insert into tbl2 values(168, 168%127,'168.');
insert into tbl2 values(167, 167%127,'167.');
insert into tbl2 values(166, 166%127,'166.');
insert into tbl2 values(165, 165%127,'165.');
insert into tbl2 values(164, 164%127,'164.');
insert into tbl2 values(163, 163%127,'163.');
insert into tbl2 values(162, 162%127,'162.');
insert into tbl2 values(161, 161%127,'161.');
insert into tbl2 values(160, 160%127,'160.');
insert into tbl2 values(159, 159%127,'159.');
insert into tbl2 values(158, 158%127,'158.');
insert into tbl2 values(157, 157%127,'157.');
insert into tbl2 values(156, 156%127,'156.');
insert into tbl2 values(155, 155%127,'155.');
insert into tbl2 values(154, 154%127,'154.');
insert into tbl2 values(153, 153%127,'153.');
insert into tbl2 values(152, 152%127,'152.');
insert into tbl2 values(151, 151%127,'151.');
insert into tbl2 values(150, 150%127,'150.');
insert into tbl2 values(149, 149%127,'149.');
insert into tbl2 values(148, 148%127,'148.');
insert into tbl2 values(147, 147%127,'147.');
insert into tbl2 values(146, 146%127,'146.');
insert into tbl2 values(145, 145%127,'145.');
insert into tbl2 values(144, 144%127,'144.');
insert into tbl2 values(143, 143%127,'143.');
insert into tbl2 values(142, 142%127,'142.');
insert into tbl2 values(141, 141%127,'141.');
insert into tbl2 values(140, 140%127,'140.');
insert into tbl2 values(139, 139%127,'139.');
insert into tbl2 values(138, 138%127,'138.');
insert into tbl2 values(137, 137%127,'137.');
insert into tbl2 values(136, 136%127,'136.');
insert into tbl2 values(135, 135%127,'135.');
insert into tbl2 values(134, 134%127,'134.');
insert into tbl2 values(133, 133%127,'133.');
insert into tbl2 values(132, 132%127,'132.');
insert into tbl2 values(131, 131%127,'131.');
insert into tbl2 values(130, 130%127,'130.');
insert into tbl2 values(129, 129%127,'129.');
insert into tbl2 values(128, 128%127,'128.');
insert into tbl2 values(127, 127%127,'127.');
insert into tbl2 values(126, 126%127,'126.');
insert into tbl2 values(125, 125%127,'125.');
insert into tbl2 values(124, 124%127,'124.');
insert into tbl2 values(123, 123%127,'123.');
insert into tbl2 values(122, 122%127,'122.');
insert into tbl2 values(121, 121%127,'121.');
insert into tbl2 values(120, 120%127,'120.');
insert into tbl2 values(119, 119%127,'119.');
insert into tbl2 values(118, 118%127,'118.');
insert into tbl2 values(117, 117%127,'117.');
insert into tbl2 values(116, 116%127,'116.');
insert into tbl2 values(115, 115%127,'115.');
insert into tbl2 values(114, 114%127,'114.');
insert into tbl2 values(113, 113%127,'113.');
insert into tbl2 values(112, 112%127,'112.');
insert into tbl2 values(111, 111%127,'111.');
insert into tbl2 values(110, 110%127,'110.');
insert into tbl2 values(109, 109%127,'109.');
insert into tbl2 values(108, 108%127,'108.');
insert into tbl2 values(107, 107%127,'107.');
insert into tbl2 values(106, 106%127,'106.');
insert into tbl2 values(105, 105%127,'105.');
insert into tbl2 values(104, 104%127,'104.');
insert into tbl2 values(103, 103%127,'103.');
insert into tbl2 values(102, 102%127,'102.');
insert into tbl2 values(101, 101%127,'101.');
insert into tbl2 values(100, 100%127,'100.');
insert into tbl2 values(99, 99%127,'99.');
insert into tbl2 values(98, 98%127,'98.');
insert into tbl2 values(97, 97%127,'97.');
insert into tbl2 values(96, 96%127,'96.');
insert into tbl2 values(95, 95%127,'95.');
insert into tbl2 values(94, 94%127,'94.');
insert into tbl2 values(93, 93%127,'93.');
insert into tbl2 values(92, 92%127,'92.');
insert into tbl2 values(91, 91%127,'91.');
insert into tbl2 values(90, 90%127,'90.');
insert into tbl2 values(89, 89%127,'89.');
insert into tbl2 values(88, 88%127,'88.');
insert into tbl2 values(87, 87%127,'87.');
insert into tbl2 values(86, 86%127,'86.');
insert into tbl2 values(85, 85%127,'85.');
insert into tbl2 values(84, 84%127,'84.');
insert into tbl2 values(83, 83%127,'83.');
insert into tbl2 values(82, 82%127,'82.');
insert into tbl2 values(81, 81%127,'81.');
insert into tbl2 values(80, 80%127,'80.');
insert into tbl2 values(79, 79%127,'79.');
insert into tbl2 values(78, 78%127,'78.');
insert into tbl2 values(77, 77%127,'77.');
insert into tbl2 values(76, 76%127,'76.');
insert into tbl2 values(75, 75%127,'75.');
insert into tbl2 values(74, 74%127,'74.');
insert into tbl2 values(73, 73%127,'73.');
insert into tbl2 values(72, 72%127,'72.');
insert into tbl2 values(71, 71%127,'71.');
insert into tbl2 values(70, 70%127,'70.');
insert into tbl2 values(69, 69%127,'69.');
insert into tbl2 values(68, 68%127,'68.');
insert into tbl2 values(67, 67%127,'67.');
insert into tbl2 values(66, 66%127,'66.');
insert into tbl2 values(65, 65%127,'65.');
insert into tbl2 values(64, 64%127,'64.');
insert into tbl2 values(63, 63%127,'63.');
insert into tbl2 values(62, 62%127,'62.');
insert into tbl2 values(61, 61%127,'61.');
insert into tbl2 values(60, 60%127,'60.');
insert into tbl2 values(59, 59%127,'59.');
insert into tbl2 values(58, 58%127,'58.');
insert into tbl2 values(57, 57%127,'57.');
insert into tbl2 values(56, 56%127,'56.');
insert into tbl2 values(55, 55%127,'55.');
insert into tbl2 values(54, 54%127,'54.');
insert into tbl2 values(53, 53%127,'53.');
insert into tbl2 values(52, 52%127,'52.');
insert into tbl2 values(51, 51%127,'51.');
insert into tbl2 values(50, 50%127,'50.');
insert into tbl2 values(49, 49%127,'49.');
insert into tbl2 values(48, 48%127,'48.');
insert into tbl2 values(47, 47%127,'47.');
insert into tbl2 values(46, 46%127,'46.');
insert into tbl2 values(45, 45%127,'45.');
insert into tbl2 values(44, 44%127,'44.');
insert into tbl2 values(43, 43%127,'43.');
insert into tbl2 values(42, 42%127,'42.');
insert into tbl2 values(41, 41%127,'41.');
insert into tbl2 values(40, 40%127,'40.');
insert into tbl2 values(39, 39%127,'39.');
insert into tbl2 values(38, 38%127,'38.');
insert into tbl2 values(37, 37%127,'37.');
insert into tbl2 values(36, 36%127,'36.');
insert into tbl2 values(35, 35%127,'35.');
insert into tbl2 values(34, 34%127,'34.');
insert into tbl2 values(33, 33%127,'33.');
insert into tbl2 values(32, 32%127,'32.');
insert into tbl2 values(31, 31%127,'31.');
insert into tbl2 values(30, 30%127,'30.');
insert into tbl2 values(29, 29%127,'29.');
insert into tbl2 values(28, 28%127,'28.');
insert into tbl2 values(27, 27%127,'27.');
insert into tbl2 values(26, 26%127,'26.');
insert into tbl2 values(25, 25%127,'25.');
insert into tbl2 values(24, 24%127,'24.');
insert into tbl2 values(23, 23%127,'23.');
insert into tbl2 values(22, 22%127,'22.');
insert into tbl2 values(21, 21%127,'21.');
insert into tbl2 values(20, 20%127,'20.');
insert into tbl2 values(19, 19%127,'19.');
insert into tbl2 values(18, 18%127,'18.');
insert into tbl2 values(17, 17%127,'17.');
insert into tbl2 values(16, 16%127,'16.');
insert into tbl2 values(15, 15%127,'15.');
insert into tbl2 values(14, 14%127,'14.');
insert into tbl2 values(13, 13%127,'13.');
insert into tbl2 values(12, 12%127,'12.');
insert into tbl2 values(11, 11%127,'11.');
insert into tbl2 values(10, 10%127,'10.');
insert into tbl2 values(9, 9%127,'9.');
insert into tbl2 values(8, 8%127,'8.');
insert into tbl2 values(7, 7%127,'7.');
insert into tbl2 values(6, 6%127,'6.');
insert into tbl2 values(5, 5%127,'5.');
insert into tbl2 values(4, 4%127,'4.');
insert into tbl2 values(3, 3%127,'3.');
insert into tbl2 values(2, 2%127,'2.');
insert into tbl2 values(1, 1%127,'1.');
COMMIT;
SET autocommit = default;
ANALYZE TABLE tbl1, tbl2;
SELECT t1.login AS tlogin, numb - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) as sp FROM tbl1 t1, tbl2 t2 WHERE t1.login=t2.login GROUP BY t1.login LIMIT 5;
EXPLAIN SELECT t1.login AS tlogin, numb - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) as sp FROM tbl1 t1, tbl2 t2 WHERE t1.login=t2.login GROUP BY t1.login LIMIT 5;
SELECT t1.login AS tlogin, numb - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) as sp FROM tbl1 t1, tbl2 t2 WHERE t1.login=t2.login GROUP BY t1.login ORDER BY sp LIMIT 5;
EXPLAIN SELECT t1.login AS tlogin, numb - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) as sp FROM tbl1 t1, tbl2 t2 WHERE t1.login=t2.login GROUP BY t1.login ORDER BY sp LIMIT 5;
SELECT t1.login AS tlogin, numb - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) as sp FROM tbl1 t1, tbl2 t2 WHERE t1.login=t2.login GROUP BY t1.login ORDER BY numb - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) LIMIT 5;
EXPLAIN SELECT t1.login AS tlogin, numb - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) as sp FROM tbl1 t1, tbl2 t2 WHERE t1.login=t2.login GROUP BY t1.login ORDER BY numb - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) - IFNULL((SELECT sum(nump) FROM tbl2 WHERE login=t1.login), 0) LIMIT 5;
DROP TABLE tbl1, tbl2;
CREATE TABLE t2 (a INT, b INT);
CREATE TABLE t4 (a INT NOT NULL, b INT NOT NULL);
INSERT INTO t2 VALUES (1, 7), (2, 7), (2,10);
INSERT INTO t4 VALUES (4, 8), (3, 8), (5, 9), (12, 7), (1, 7), (10, 9), (9, 6), (7, 6), (3, 9), (1, 10);
ANALYZE TABLE t2, t4;
SELECT b, MAX(a) AS ma FROM t4 GROUP BY b HAVING ma < (SELECT MAX(t2.a) FROM t2 WHERE t2.b=t4.b);
EXPLAIN SELECT b, MAX(a) AS ma FROM t4 GROUP BY b HAVING ma < (SELECT MAX(t2.a) FROM t2 WHERE t2.b=t4.b);
DROP TABLE t2, t4;
INSERT INTO tmp_digests SELECT * FROM performance_schema.events_statements_summary_by_digest;
CREATE TEMPORARY TABLE tmp_digest_avg_latency_distribution1 ( cnt BIGINT UNSIGNED NOT NULL, avg_us DECIMAL(21,0) NOT NULL, PRIMARY KEY (avg_us) ) ENGINE=InnoDB;
CREATE TEMPORARY TABLE tmp_digest_avg_latency_distribution2 ( cnt BIGINT UNSIGNED NOT NULL, avg_us DECIMAL(21,0) NOT NULL, PRIMARY KEY (avg_us) ) ENGINE=InnoDB;
INSERT INTO tmp_digest_avg_latency_distribution1 SELECT COUNT(*) cnt, ROUND(avg_timer_wait/1000000) AS avg_us FROM tmp_digests GROUP BY avg_us;
INSERT INTO tmp_digest_avg_latency_distribution2 SELECT * FROM tmp_digest_avg_latency_distribution1;
CREATE TEMPORARY TABLE tmp_digest_95th_percentile_by_avg_us ( avg_us decimal(21,0) NOT NULL, percentile decimal(46,4) NOT NULL, PRIMARY KEY (avg_us) ) ENGINE=InnoDB;
ANALYZE TABLE tmp_digests;
ANALYZE TABLE tmp_digest_avg_latency_distribution1;
ANALYZE TABLE tmp_digest_avg_latency_distribution2;
ANALYZE TABLE tmp_digest_95th_percentile_by_avg_us;
PREPARE p from 'INSERT INTO tmp_digest_95th_percentile_by_avg_us SELECT s2.avg_us avg_us, IFNULL(SUM(s1.cnt)/ NULLIF((SELECT COUNT(*) FROM tmp_digests), 0), 0) percentile FROM tmp_digest_avg_latency_distribution1 AS s1 JOIN tmp_digest_avg_latency_distribution2 AS s2 ON s1.avg_us <= s2.avg_us GROUP BY s2.avg_us HAVING percentile > 0.95 ORDER BY percentile LIMIT 1';
EXECUTE p;
SELECT * from tmp_digest_95th_percentile_by_avg_us;
EXPLAIN INSERT INTO tmp_digest_95th_percentile_by_avg_us SELECT s2.avg_us avg_us, IFNULL(SUM(s1.cnt)/ NULLIF((SELECT COUNT(*) FROM tmp_digests), 0), 0) percentile FROM tmp_digest_avg_latency_distribution1 AS s1 JOIN tmp_digest_avg_latency_distribution2 AS s2 ON s1.avg_us <= s2.avg_us GROUP BY s2.avg_us HAVING percentile > 0.95 ORDER BY percentile LIMIT 1;
DROP PREPARE p;
DROP TEMPORARY TABLE tmp_digest_95th_percentile_by_avg_us;
DROP TEMPORARY TABLE tmp_digest_avg_latency_distribution2;
DROP TEMPORARY TABLE tmp_digest_avg_latency_distribution1;
DROP TEMPORARY TABLE tmp_digests;
CREATE TABLE t1 (col_int_key int, KEY col_int_key (col_int_key));
INSERT INTO t1 VALUES (0),(8),(1),(8);
CREATE TABLE where_subselect_20070 SELECT table2 .col_int_key AS field1, ( SELECT COUNT( col_int_key ) FROM t1 ) FROM t1 AS table1 JOIN t1 AS table2 ON table2.col_int_key = table1.col_int_key;
ANALYZE TABLE t1, where_subselect_20070;
SELECT * FROM where_subselect_20070 WHERE (field1, ( SELECT COUNT( col_int_key ) FROM t1 )) IN ( SELECT table2 .col_int_key AS field1, ( SELECT COUNT( col_int_key ) FROM t1 ) FROM t1 AS table1 JOIN t1 AS table2 ON table2.col_int_key = table1.col_int_key );
EXPLAIN SELECT * FROM where_subselect_20070 WHERE (field1, ( SELECT COUNT( col_int_key ) FROM t1 )) IN ( SELECT table2 .col_int_key AS field1, ( SELECT COUNT( col_int_key ) FROM t1 ) FROM t1 AS table1 JOIN t1 AS table2 ON table2.col_int_key = table1.col_int_key );
DROP TABLE t1, where_subselect_20070;
CREATE TABLE t1 (a INT, b INT);
INSERT INTO t1 VALUES (1,1), (1,2), (1,3);
ANALYZE TABLE t1;
SELECT COUNT(*), (SELECT count(*) FROM t1 inr WHERE inr.a = outr.a) FROM t1 outr;
DROP TABLE t1;
CREATE TABLE t1(a DATETIME NOT NULL);
INSERT INTO t1 VALUES ('20060606155555');
PREPARE s FROM 'SELECT a FROM t1 WHERE a=(SELECT MAX(a) FROM t1) AND (a="20060606155555")';
SET optimizer_switch='subquery_to_derived=off';
EXECUTE s;
PREPARE s FROM 'SELECT a FROM t1 WHERE a=(SELECT MAX(a) FROM t1) AND (a="20060606155555")';
SET optimizer_switch='subquery_to_derived=on';
EXECUTE s;
DROP TABLE t1;
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES (1),(2),(3),(4);
ANALYZE TABLE t1;
SET optimizer_switch='subquery_to_derived=off';
SELECT (SELECT MIN(a) FROM t1) a, MAX(a) AS mx FROM t1 WHERE FALSE HAVING (SELECT MIN(a) FROM t1) > 0;
SELECT MAX(a) AS mx FROM t1 WHERE FALSE HAVING (SELECT MIN(a) FROM t1) > 0;
SET optimizer_switch='subquery_to_derived=on';
SELECT (SELECT MIN(a) FROM t1) a, MAX(a) AS mx FROM t1 WHERE FALSE HAVING (SELECT MIN(a) FROM t1) > 0;
EXPLAIN SELECT (SELECT MIN(a) FROM t1) a, MAX(a) AS mx FROM t1 WHERE FALSE HAVING (SELECT MIN(a) FROM t1) > 0;
SELECT MAX(a) AS mx FROM t1 WHERE FALSE HAVING (SELECT MIN(a) FROM t1) > 0;
EXPLAIN SELECT MAX(a) AS mx FROM t1 WHERE FALSE HAVING (SELECT MIN(a) FROM t1) > 0;
DROP TABLE t1;
CREATE TABLE tab1(pk int PRIMARY KEY);
SELECT * FROM tab1 AS table1 LEFT JOIN ( tab1 AS table2 JOIN tab1 AS table3 ON 1 <= (SELECT COUNT(pk) FROM tab1) ) ON 1 WHERE (SELECT MIN(pk) FROM tab1);
EXPLAIN SELECT * FROM tab1 AS table1 LEFT JOIN ( tab1 AS table2 JOIN tab1 AS table3 ON 1 <= (SELECT COUNT(pk) FROM tab1) ) ON 1 WHERE (SELECT MIN(pk) FROM tab1);
DROP TABLE tab1;
CREATE TABLE c2 (col_varchar_key VARCHAR(1));
SELECT alias1.col_varchar_key FROM c2 AS alias1 HAVING   alias1.col_varchar_key > SOME (SELECT col_varchar_key FROM c2) ORDER BY alias1.col_varchar_key;
EXPLAIN SELECT alias1.col_varchar_key FROM c2 AS alias1 HAVING   alias1.col_varchar_key > SOME (SELECT col_varchar_key FROM c2) ORDER BY alias1.col_varchar_key;
DROP TABLE c2;
CREATE TABLE t1(col_int INT);
SELECT * FROM ((t1 AS a2 LEFT JOIN t1 AS a1 ON  1 <= SOME (SELECT COUNT(*) FROM t1)) LEFT JOIN t1 ON true);
EXPLAIN SELECT * FROM ((t1 AS a2 LEFT JOIN t1 AS a1 ON  1 <= SOME (SELECT COUNT(*) FROM t1)) LEFT JOIN t1 ON true);
SELECT * FROM ((t1 AS a2 LEFT JOIN t1 AS a1 ON  1 <= ALL (SELECT COUNT(*) FROM t1)) LEFT JOIN t1 ON true);
EXPLAIN SELECT * FROM ((t1 AS a2 LEFT JOIN t1 AS a1 ON  1 <= ALL (SELECT COUNT(*) FROM t1)) LEFT JOIN t1 ON true);
SELECT * FROM (t1 RIGHT JOIN (t1 AS a1 RIGHT JOIN t1 AS a2 ON  1 <= SOME (SELECT COUNT(*) FROM t1)) ON true);
EXPLAIN SELECT * FROM (t1 RIGHT JOIN (t1 AS a1 RIGHT JOIN t1 AS a2 ON  1 <= SOME (SELECT COUNT(*) FROM t1)) ON true);
DROP TABLE t1;
CREATE TABLE t1(pk int PRIMARY KEY);
SELECT t1.pk FROM t1 LEFT JOIN ( SELECT t1.pk AS pk FROM t1 WHERE (1 <= (SELECT MAX(t1.pk) FROM t1)) ) alias2 ON true;
EXPLAIN SELECT t1.pk FROM t1 LEFT JOIN ( SELECT t1.pk AS pk FROM t1 WHERE (1 <= (SELECT MAX(t1.pk) FROM t1)) ) alias2 ON true;
PREPARE p FROM "SELECT t1.pk FROM t1 LEFT JOIN ( SELECT t1.pk AS pk FROM t1 WHERE (1 <= (SELECT MAX(t1.pk) FROM t1)) ) alias2 ON true";
EXECUTE p;
SET optimizer_switch='subquery_to_derived=off';
EXECUTE p;
SET optimizer_switch='subquery_to_derived=on';
EXECUTE p;
SELECT alias1.pk FROM t1 AS alias1 LEFT JOIN t1 AS alias2 LEFT JOIN (SELECT * FROM t1 WHERE 1 <= ANY (SELECT c_sq1_alias1.pk FROM t1 AS c_sq1_alias1 JOIN t1 AS c_sq1_alias2 ON TRUE ) ) AS alias3 ON TRUE ON TRUE;
EXPLAIN SELECT alias1.pk FROM t1 AS alias1 LEFT JOIN t1 AS alias2 LEFT JOIN (SELECT * FROM t1 WHERE 1 <= ANY (SELECT c_sq1_alias1.pk FROM t1 AS c_sq1_alias1 JOIN t1 AS c_sq1_alias2 ON TRUE ) ) AS alias3 ON TRUE ON TRUE;
DROP TABLE t1;
CREATE TABLE X (col_varchar_key VARCHAR(1));
SET OPTIMIZER_SWITCH='subquery_to_derived=on';
PREPARE prep_stmt FROM 'SELECT col_varchar_key  FROM (SELECT * FROM X        WHERE X.col_varchar_key > (SELECT MIN(col_varchar_key)                                   FROM X)) AS table1';
EXECUTE prep_stmt;
DROP TABLE X;
CREATE TABLE n(col_int INT);
INSERT INTO n VALUES (1), (2), (3);
ANALYZE TABLE n;
SELECT alias2.col_int FROM (SELECT * FROM n) AS alias1 JOIN (SELECT * FROM n) AS alias2 JOIN n ON alias2.col_int < (SELECT MAX(col_int) FROM n) ON TRUE;
EXPLAIN SELECT alias2.col_int FROM (SELECT * FROM n) AS alias1 JOIN (SELECT * FROM n) AS alias2 JOIN n ON alias2.col_int < (SELECT MAX(col_int) FROM n) ON TRUE;
DROP TABLE n;
CREATE TABLE x(col_int_key INT);
SELECT table1.col_int_key AS field1 FROM ((SELECT * FROM x WHERE col_int_key <= (SELECT SUM(col_int_key) FROM x WHERE col_int_key < @var1)) AS table1 JOIN x AS table2);
EXPLAIN SELECT table1.col_int_key AS field1 FROM ((SELECT * FROM x WHERE col_int_key <= (SELECT SUM(col_int_key) FROM x WHERE col_int_key < @var1)) AS table1 JOIN x AS table2);
SELECT table1.col_int_key AS field1 FROM ((SELECT * FROM x WHERE col_int_key <= (SELECT SUM(col_int_key) FROM x WHERE col_int_key < 1)) AS table1 JOIN x AS table2);
EXPLAIN SELECT table1.col_int_key AS field1 FROM ((SELECT * FROM x WHERE col_int_key <= (SELECT SUM(col_int_key) FROM x WHERE col_int_key < 1)) AS table1 JOIN x AS table2);
DROP TABLE x;
CREATE TABLE t1(col_varchar VARCHAR(1));
SELECT (SELECT COUNT(*) FROM t1 WHERE 1 <> table1.col_varchar) FROM ((SELECT a2.* FROM (t1 AS a1 JOIN t1 AS a2 ON (1 <> ( SELECT COUNT(*) FROM t1)))) AS table1 JOIN t1 ON 1);
EXPLAIN SELECT (SELECT COUNT(*) FROM t1 WHERE 1 <> table1.col_varchar) FROM ((SELECT a2.* FROM (t1 AS a1 JOIN t1 AS a2 ON (1 <> ( SELECT COUNT(*) FROM t1)))) AS table1 JOIN t1 ON 1);
DROP TABLE t1;
CREATE TABLE a(i INT);
CREATE TABLE b(i INT);
CREATE TABLE c(i INT);
SELECT * FROM b WHERE EXISTS (SELECT * FROM (b JOIN (a AS sq1_alias2 JOIN c ON (sq1_alias2.i >= (SELECT MAX(i) FROM b))) ON (6 IN (SELECT i FROM b))));
EXPLAIN SELECT * FROM b WHERE EXISTS (SELECT * FROM (b JOIN (a AS sq1_alias2 JOIN c ON (sq1_alias2.i >= (SELECT MAX(i) FROM b))) ON (6 IN (SELECT i FROM b))));
DROP TABLE a, b, c;
CREATE TABLE n(i INT);
SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON (table1.i <= ANY (SELECT i FROM n))) WHERE (EXISTS ((SELECT i FROM n)));
EXPLAIN SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON (table1.i <= ANY (SELECT i FROM n))) WHERE (EXISTS ((SELECT i FROM n)));
SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON (table1.i <= (select MAX(`n`.`i`) from `n`))) WHERE (EXISTS ((SELECT i FROM n)));
EXPLAIN SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON (table1.i <= (select MAX(`n`.`i`) from `n`))) WHERE (EXISTS ((SELECT i FROM n)));
SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON  (table2.i <=  (select MAX(`n`.`i`) from `n`))) JOIN n AS table3 ON (table1.i <=  (select MAX(`n`.`i`) from `n`)) WHERE (EXISTS ((SELECT i FROM n)) AND EXISTS ((SELECT i FROM n WHERE i = 5)) AND EXISTS ((SELECT i FROM n WHERE i = 7)));
EXPLAIN SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON  (table2.i <=  (select MAX(`n`.`i`) from `n`))) JOIN n AS table3 ON (table1.i <=  (select MAX(`n`.`i`) from `n`)) WHERE (EXISTS ((SELECT i FROM n)) AND EXISTS ((SELECT i FROM n WHERE i = 5)) AND EXISTS ((SELECT i FROM n WHERE i = 7)));
SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON (table2.i <= (select MAX(`n`.`i`) from `n`))) JOIN n AS table3 ON (table1.i <= (select MAX(`n`.`i`) from `n`)) WHERE (NOT EXISTS ((SELECT n1.i FROM n n1, n n2 WHERE n1.i > n2.i)));
EXPLAIN SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON (table2.i <= (select MAX(`n`.`i`) from `n`))) JOIN n AS table3 ON (table1.i <= (select MAX(`n`.`i`) from `n`)) WHERE (NOT EXISTS ((SELECT n1.i FROM n n1, n n2 WHERE n1.i > n2.i)));
SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON  (table2.i <=  (select MAX(`n`.`i`) from `n`))) JOIN n AS table3 ON (table1.i <=  (select MAX(`n`.`i`) from `n`)) WHERE (EXISTS ((SELECT i FROM n)) AND EXISTS ((SELECT i FROM n WHERE i = 5)) AND EXISTS ((SELECT i FROM n WHERE i = 7)));
EXPLAIN SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON  (table2.i <=  (select MAX(`n`.`i`) from `n`))) JOIN n AS table3 ON (table1.i <=  (select MAX(`n`.`i`) from `n`)) WHERE (EXISTS ((SELECT i FROM n)) AND EXISTS ((SELECT i FROM n WHERE i = 5)) AND EXISTS ((SELECT i FROM n WHERE i = 7)));
SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON  (table2.i <=  (select MAX(`n`.`i`) from `n`))) JOIN n AS table3 ON (table1.i <=  (select MAX(`n`.`i`) from `n`)) WHERE (EXISTS ((SELECT i FROM n)) AND NOT EXISTS ((SELECT i FROM n WHERE i = 4)) AND EXISTS ((SELECT i FROM n WHERE i = 5)) AND EXISTS ((SELECT i FROM n WHERE i = 7)) AND NOT EXISTS ((SELECT i FROM n WHERE i = 3)));
EXPLAIN SELECT (SELECT AVG(n.i) FROM n) AS feild1, SUM(table1.i) FROM (n AS table1 JOIN n AS table2 ON  (table2.i <=  (select MAX(`n`.`i`) from `n`))) JOIN n AS table3 ON (table1.i <=  (select MAX(`n`.`i`) from `n`)) WHERE (EXISTS ((SELECT i FROM n)) AND NOT EXISTS ((SELECT i FROM n WHERE i = 4)) AND EXISTS ((SELECT i FROM n WHERE i = 5)) AND EXISTS ((SELECT i FROM n WHERE i = 7)) AND NOT EXISTS ((SELECT i FROM n WHERE i = 3)));
DROP TABLE n;
CREATE TABLE m(pk INT);
CREATE VIEW view_m AS SELECT * FROM m;
PREPARE prep_stmt FROM 'SELECT (SELECT t2.pk FROM (m AS t1                             JOIN                             (m AS t2                              JOIN m AS t3))),         (SELECT SUM(pk) FROM m),         MIN(table1.pk)  FROM (m AS table1 JOIN        ((view_m AS table2          JOIN          m AS table3))        ON (table3.pk = table2.pk))';
EXECUTE prep_stmt;
DROP VIEW view_m;
DROP TABLE m;
CREATE TABLE t1(field1 INT, field2 VARCHAR(1));
SET optimizer_switch='subquery_to_derived=on';
CREATE TABLE cc1(pk INT NOT NULL, col_varchar_key VARCHAR(1) DEFAULT NULL, PRIMARY KEY (pk));
SELECT COUNT(table1.pk), (SELECT MIN(col_varchar_key) FROM cc1 ) FROM (cc1 AS table1 JOIN (cc1 JOIN cc1 AS table3 ON true) ON true) WHERE (1 <> (SELECT COUNT(*) FROM cc1));
EXPLAIN SELECT COUNT(table1.pk), (SELECT MIN(col_varchar_key) FROM cc1 ) FROM (cc1 AS table1 JOIN (cc1 JOIN cc1 AS table3 ON true) ON true) WHERE (1 <> (SELECT COUNT(*) FROM cc1));
INSERT INTO t1 SELECT COUNT(table1.pk), (SELECT MIN(col_varchar_key) FROM cc1 ) FROM (cc1 AS table1 JOIN (cc1 JOIN cc1 AS table3 ON true) ON true) WHERE (1 <> (SELECT COUNT(*) FROM cc1));
EXPLAIN INSERT INTO t1 SELECT COUNT(table1.pk), (SELECT MIN(col_varchar_key) FROM cc1 ) FROM (cc1 AS table1 JOIN (cc1 JOIN cc1 AS table3 ON true) ON true) WHERE (1 <> (SELECT COUNT(*) FROM cc1));
SELECT * from t1;
CREATE TABLE t2 AS SELECT COUNT(table1.pk), (SELECT MIN(col_varchar_key) FROM cc1 ) FROM (cc1 AS table1 JOIN (cc1 JOIN cc1 AS table3 ON true) ON true) WHERE (1 <> (SELECT COUNT(*) FROM cc1));
DROP TABLE t1, cc1, t2;
CREATE TABLE a ( pk INTEGER );
CREATE TABLE bb ( col_varchar VARCHAR(1) );
CREATE TABLE cc ( pk INTEGER, col_int INTEGER, col_int_key INTEGER, col_time TIME, col_time_key TIME, col_datetime DATETIME, col_datetime_key DATETIME, col_varchar VARCHAR(1), col_varchar_key VARCHAR(1), PRIMARY KEY (pk) );
CREATE INDEX idx_cc_col_varchar_key ON cc(col_varchar_key);
INSERT INTO cc VALUES (1,764578610,1400450503,'04:58:13','15:43:36', '1977-07-20 14:44:30','1998-10-04 17:29:04','0','N');
INSERT INTO cc VALUES (2,-1430323290,761341340,'17:39:46','10:22:47', '2027-06-26 01:50:30','1983-11-11 03:33:36','z','a');
ANALYZE TABLE a, bb, cc;
EXPLAIN FORMAT=tree SELECT AVG(cc.col_varchar_key), ( SELECT SUM(cc.col_int_key) FROM cc,a ) FROM cc STRAIGHT_JOIN bb ON bb.col_varchar = cc.col_varchar_key WHERE cc.col_varchar <> 'w';
DROP TABLE a, bb, cc;
CREATE TABLE n(i INT);
CREATE VIEW view_n AS SELECT * FROM n;
PREPARE p FROM 'SELECT (SELECT MAX(i) FROM n) AS field2,         COUNT(table1.i) AS field3 ,         (SELECT AVG(i) FROM n) AS field4  FROM (n AS table1        JOIN        ( view_n AS table2          JOIN          n AS table3          ON true )        ON (table2.i = table2.i))';
EXECUTE p;
DROP VIEW view_n;
DROP TABLE n;
CREATE TABLE cc ( pk int NOT NULL AUTO_INCREMENT, col_int int DEFAULT NULL, col_int_key int DEFAULT NULL, col_varchar varchar(1) DEFAULT NULL, col_varchar_key varchar(1) DEFAULT NULL, PRIMARY KEY (pk), KEY idx_cc_col_int_key (col_int_key), KEY idx_cc_col_varchar_key (col_varchar_key) ) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
ANALYZE TABLE cc;
CREATE VIEW view_cc AS SELECT * FROM cc;
DROP VIEW view_cc;
DROP TABLE cc;
CREATE TABLE m(col_int INT);
SELECT MIN(table1.col_int)           AS field1, ( SELECT COUNT(col_int ) FROM m AS t1 )              AS field2, AVG(table1.col_int)           AS field4, ( SELECT MAX(t1.col_int) FROM ( m AS t1 JOIN ( m AS t2 JOIN m AS t3 ) ) ) AS field5 FROM ( m AS table1 JOIN ( ( m AS table2 JOIN ( SELECT COUNT(col_int) FROM m ) AS table3 ) ) ) ;
DROP TABLE m;
CREATE TABLE n(col_int INT);
INSERT INTO n VALUES (1), (2), (3);
ANALYZE TABLE n;
CREATE VIEW view_n AS SELECT * FROM n;
SET sql_mode="";
SELECT table_b.col_int               AS field_a, (SELECT MAX(col_int) FROM n)  AS field_b, COUNT(table_a.col_int)        AS field_c, (SELECT AVG(col_int) FROM n)  AS field_d FROM ( n AS table_a JOIN ( view_n AS table_b JOIN n AS table_c) );
EXPLAIN SELECT table_b.col_int               AS field_a, (SELECT MAX(col_int) FROM n)  AS field_b, COUNT(table_a.col_int)        AS field_c, (SELECT AVG(col_int) FROM n)  AS field_d FROM ( n AS table_a JOIN ( view_n AS table_b JOIN n AS table_c) );
DROP VIEW view_n;
CREATE VIEW view_n(col_int2) AS SELECT col_int + 1 FROM n;
SELECT  table_b.col_int2              AS field_e, table_a.col_int, (SELECT MAX(col_int) FROM n)  AS field_a, COUNT(table_a.col_int )       AS field_b, (SELECT AVG(col_int) FROM n)  AS field_c, table_b.col_int2              AS field_d FROM ( n AS table_a JOIN (view_n AS table_b JOIN n AS table_c) );
EXPLAIN SELECT  table_b.col_int2              AS field_e, table_a.col_int, (SELECT MAX(col_int) FROM n)  AS field_a, COUNT(table_a.col_int )       AS field_b, (SELECT AVG(col_int) FROM n)  AS field_c, table_b.col_int2              AS field_d FROM ( n AS table_a JOIN (view_n AS table_b JOIN n AS table_c) );
SET sql_mode=default;
DROP VIEW view_n;
DROP TABLE n;
CREATE TABLE c (pk INTEGER AUTO_INCREMENT, col_int INT , col_int_key INT , col_varchar VARCHAR(1) , col_varchar_key VARCHAR(1) , PRIMARY KEY(pk));
CREATE INDEX idx_c_col_int_key ON c(col_int_key);
CREATE TABLE cc (pk INTEGER AUTO_INCREMENT, col_int INT , col_int_key INT , col_varchar VARCHAR(1) , col_varchar_key VARCHAR(1) , PRIMARY KEY(pk));
INSERT INTO cc VALUES (DEFAULT,1750627978,-2052557260,'0','o');
INSERT INTO c values (DEFAULT,809266110,-169779076,'C','O'), (DEFAULT,3049998,1973362945,'2','O'), (DEFAULT,912437770,-1109570817,'W','G'), (DEFAULT,-1655291083,-1761323512,'q','9'), (DEFAULT,-1276272795,-591291338,'3','O'), (DEFAULT,-1297781203,-970713309,'q','r'), (DEFAULT,-261602165,-2083959767,'7','O'), (DEFAULT,357530836,-746109993,'6','i'), (DEFAULT,1553746652,-1607882572,'G','Y'), (DEFAULT,-1620551574,381511992,'5','n'), (DEFAULT,-1221888549,-1127778040,'l','U'), (DEFAULT,1048455957,-1830777487,'U','T'), (DEFAULT,-541641553,-1731661529,'A','Q'), (DEFAULT,1482963294,-1570976962,'0','s');
ANALYZE TABLES c, cc;
EXPLAIN SELECT MIN( table2.col_int ) AS field1 , SUM( table2.col_int ) AS field2 , ( SELECT MAX( subquery1_t1.pk ) AS subquery1_field1 FROM ( cc AS subquery1_t1 INNER JOIN cc AS subquery1_t2 ON ( subquery1_t2.col_varchar_key = subquery1_t1.col_varchar_key ) ) ) AS field3 FROM ( c AS table1 RIGHT JOIN ( ( cc AS table2 STRAIGHT_JOIN c AS table3 ON ( table2.pk = table2.col_int ) ) ) ON ( table2.col_varchar_key = table2.col_varchar AND table1.col_int_key > ( SELECT 9 FROM cc ) ) ) WHERE ( EXISTS ( SELECT subquery3_t1.col_int AS subquery3_field1 FROM c AS subquery3_t1 WHERE subquery3_t1.col_int_key = table1.pk ) ) AND table1.col_varchar_key <> table2.col_varchar;
DROP TABLE c, cc;
CREATE TABLE b ( pk int NOT NULL AUTO_INCREMENT, col_int int DEFAULT NULL, col_int_key int DEFAULT NULL, col_varchar varchar(1) DEFAULT NULL, col_varchar_key varchar(1) DEFAULT NULL, PRIMARY KEY (pk), KEY idx_b_col_int_key (col_int_key), KEY idx_b_col_varchar_key (col_varchar_key) ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO b VALUES (1,-1155099828,-1879439976,'N','a');
CREATE TABLE c ( pk int NOT NULL AUTO_INCREMENT, col_int int DEFAULT NULL, col_int_key int DEFAULT NULL, col_varchar varchar(1) DEFAULT NULL, col_varchar_key varchar(1) DEFAULT NULL, PRIMARY KEY (pk), KEY idx_c_col_int_key (col_int_key), KEY idx_c_col_varchar_key (col_varchar_key) ) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
CREATE TABLE cc ( pk int NOT NULL AUTO_INCREMENT, col_int int DEFAULT NULL, col_int_key int DEFAULT NULL, col_varchar varchar(1) DEFAULT NULL, col_varchar_key varchar(1) DEFAULT NULL, PRIMARY KEY (pk), KEY idx_cc_col_int_key (col_int_key), KEY idx_cc_col_varchar_key (col_varchar_key) ) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
CREATE VIEW  view_cc AS SELECT cc.col_int_key AS col_int_key, cc.col_varchar AS col_varchar, cc.col_varchar_key AS col_varchar_key from cc;
ANALYZE TABLES b, c, cc;
SET sql_mode='';
DROP VIEW view_cc;
DROP TABLES b, c, cc;
SET sql_mode=default;
CREATE TABLE t1(a INTEGER, b INTEGER);
CREATE TABLE t2(a INTEGER);
INSERT INTO t1 VALUES (1, 10), (2, 20), (2, 21), (3, NULL), (4, 40), (4, 41), (4, 42), (4, 43), (4, 44);
INSERT INTO t2 VALUES (1), (2), (3), (4), (5), (NULL);
ANALYZE TABLE t1,t2;
CREATE VIEW v1 AS SELECT a, b, (SELECT COUNT(*) FROM t2) AS c FROM t1;
SELECT * FROM v1;
EXPLAIN SELECT * FROM v1;
SELECT a FROM v1;
EXPLAIN SELECT a FROM v1;
set sql_mode='';
SELECT a,c FROM v1 GROUP BY b HAVING c > 0;
EXPLAIN SELECT a,c FROM v1 GROUP BY b HAVING c > 0;
set sql_mode=default;
SELECT a FROM v1 WHERE c > 0;
EXPLAIN SELECT a FROM v1 WHERE c > 0;
DROP VIEW v1;
DROP TABLE t1, t2;
CREATE TABLE c ( pk int NOT NULL AUTO_INCREMENT, col_int int DEFAULT NULL, col_int_key int DEFAULT NULL, col_date date DEFAULT NULL, col_date_key date DEFAULT NULL, col_time time DEFAULT NULL, col_time_key time DEFAULT NULL, col_datetime datetime DEFAULT NULL, col_datetime_key datetime DEFAULT NULL, col_varchar varchar(1) DEFAULT NULL, col_varchar_key varchar(1) DEFAULT NULL, PRIMARY KEY (pk), KEY idx_cc_col_int_key (col_int_key), KEY idx_cc_col_date_key (col_date_key), KEY idx_cc_col_time_key (col_time_key), KEY idx_cc_col_datetime_key (col_datetime_key), KEY idx_cc_col_varchar_key (col_varchar_key) ) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
CREATE VIEW view_c AS SELECT alias1.col_int FROM ( c AS alias1 JOIN ( ( c AS alias2 JOIN c AS alias3 ON(1)) ) ON ( alias2.col_int >= ( SELECT MIN( sq1_alias1.col_int ) AS sq1_field1 FROM ( c AS sq1_alias1, c AS sq1_alias2 ) ) ) ) WHERE (  EXISTS ( ( SELECT sq2_alias1.col_int FROM ( c AS sq2_alias1 JOIN c AS sq2_alias2 ON ( sq2_alias2.col_int = sq2_alias1.pk ) )) ) ) ;
SELECT * FROM view_c;
EXPLAIN SELECT * FROM view_c;
DROP VIEW view_c;
DROP TABLE c;
CREATE TABLE t1 (i int);
CREATE TABLE t2 (i int);
SELECT t2.i FROM t2 WHERE ( false ) AND ( t2.i  IN ( SELECT t1.i FROM t1 WHERE t1.i <= SOME ( SELECT 8 UNION  SELECT 3 ) ) );
DROP TABLE t1, t2;
CREATE TABLE t1 (a int);
INSERT INTO t1 VALUES (1), (2);
ANALYZE TABLE t1;
SELECT a FROM t1 WHERE (SELECT 1 FROM DUAL WHERE 1=0) IS NULL;
EXPLAIN SELECT a FROM t1 WHERE (SELECT 1 FROM DUAL WHERE 1=0) IS NULL;
DROP TABLE t1;
CREATE TABLE a (col_varchar_key varchar(1));
SELECT table1.col_varchar_key FROM ( SELECT sub1_t2.* FROM (a JOIN (a AS sub1_t2) ON sub1_t2.col_varchar_key IN (SELECT col_varchar_key FROM a)) WHERE EXISTS (SELECT sub2_t1.col_varchar_key FROM a AS sub2_t1))  AS table1 JOIN (a AS table2 JOIN a ON 1 >= (SELECT MIN( col_varchar_key) FROM a)) ON true;
EXPLAIN SELECT table1.col_varchar_key FROM ( SELECT sub1_t2.* FROM (a JOIN (a AS sub1_t2) ON sub1_t2.col_varchar_key IN (SELECT col_varchar_key FROM a)) WHERE EXISTS (SELECT sub2_t1.col_varchar_key FROM a AS sub2_t1))  AS table1 JOIN (a AS table2 JOIN a ON 1 >= (SELECT MIN( col_varchar_key) FROM a)) ON true;
DROP TABLE a;
CREATE TABLE t1(pk int primary key);
INSERT INTO t1 VALUES(1),(2),(3),(4),(5);
ANALYZE TABLE t1;
SELECT SUM(pk) FROM t1 WHERE ( pk >= ANY ( SELECT MAX(1) FROM DUAL) );
DROP TABLE t1;
CREATE TABLE t1 ( pk INTEGER );
SELECT (SELECT COUNT(*) FROM t1) AS f1, (SELECT COUNT(*) FROM t1) AS f2 FROM t1 GROUP BY f1, f2 WITH ROLLUP;
DROP TABLE t1;
CREATE TABLE t1 ( f1 INTEGER);
INSERT INTO t1 VALUES (0);
SELECT (SELECT MIN(f1) AS min FROM t1 ) AS field1 FROM t1 GROUP BY field1 WITH ROLLUP;
DROP TABLE t1;
CREATE TABLE t1 (f1 INTEGER);
SELECT (SELECT SUM(f1) AS SQ1_field1 FROM t1) as field1 FROM t1 GROUP BY f1 WITH ROLLUP ORDER BY f1;
DROP TABLE t1;
CREATE TABLE t1 (pk integer auto_increment, col_int int , col_datetime datetime , col_char_255 char(255) , col_smallint smallint , col_decimal_10_8 decimal(10,8), primary key(pk)) ;
set sql_mode='';
SELECT alias1.col_decimal_10_8 AS field1 , ( SELECT SUM(table1.col_smallint ) AS SQ1_field1 FROM ( t1 as table1 RIGHT JOIN t1 as table2 ON 1 ) ) AS field2 , GROUPING( LOG(alias1.col_int) ) AS field3 FROM ( t1 AS alias1 JOIN t1 AS alias2 ON 1  ) WHERE alias2.pk IN ( SELECT col_char_255 FROM t1 ) GROUP BY field1, field2, LOG(alias1.col_int) WITH ROLLUP ORDER BY alias1.col_datetime, field1, field2, LOG(alias1.col_int) ;
EXPLAIN SELECT alias1.col_decimal_10_8 AS field1 , ( SELECT SUM(table1.col_smallint ) AS SQ1_field1 FROM ( t1 as table1 RIGHT JOIN t1 as table2 ON 1 ) ) AS field2 , GROUPING( LOG(alias1.col_int) ) AS field3 FROM ( t1 AS alias1 JOIN t1 AS alias2 ON 1  ) WHERE alias2.pk IN ( SELECT col_char_255 FROM t1 ) GROUP BY field1, field2, LOG(alias1.col_int) WITH ROLLUP ORDER BY alias1.col_datetime, field1, field2, LOG(alias1.col_int) ;
set sql_mode=default;
DROP TABLE t1;
CREATE TABLE t1 (f1 INTEGER);
SET optimizer_switch='subquery_to_derived=default';
SELECT SUM(f1), ROW_NUMBER() OVER (PARTITION BY f1), (SELECT MIN(f1) FROM t1) FROM t1;
SELECT SUM(f1), ROW_NUMBER() OVER (), (SELECT MIN(f1) FROM t1) FROM t1 ORDER BY f1;
SET optimizer_switch='subquery_to_derived=on';
SELECT SUM(f1), ROW_NUMBER() OVER (PARTITION BY f1), (SELECT MIN(f1) FROM t1) FROM t1;
SELECT SUM(f1), ROW_NUMBER() OVER (), (SELECT MIN(f1) FROM t1) FROM t1 ORDER BY f1;
SELECT SUM(f1), SUM(f1) OVER (), f1, (SELECT MIN(f1) FROM t1) sq FROM t1 ORDER BY f1;
DROP TABLE t1;
SET optimizer_switch='subquery_to_derived=default';
