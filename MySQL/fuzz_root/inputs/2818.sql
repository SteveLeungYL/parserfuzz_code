CREATE ROLE of;
CREATE ROLE skip;
CREATE ROLE locked;
CREATE ROLE nowait;
DROP ROLE skip, locked, nowait;
CREATE DATABASE db1;
CREATE TABLE db1.t1( a INT );
CREATE TABLE db1.t2( a INT );
CREATE USER mysqltestuser1@localhost;
GRANT SELECT ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
CREATE USER mysqltestuser1@localhost;
GRANT INSERT ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
CREATE USER mysqltestuser1@localhost;
GRANT UPDATE ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
CREATE USER mysqltestuser1@localhost;
GRANT DELETE ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
CREATE USER mysqltestuser1@localhost;
GRANT LOCK TABLES ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
CREATE USER mysqltestuser1@localhost;
GRANT SELECT, UPDATE ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
CREATE USER mysqltestuser1@localhost;
GRANT SELECT, UPDATE, DELETE ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
CREATE USER mysqltestuser1@localhost;
GRANT SELECT, DELETE ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
CREATE USER mysqltestuser1@localhost;
GRANT SELECT, LOCK TABLES ON db1.* TO mysqltestuser1@localhost;
SELECT * FROM t1;
SELECT HIGH_PRIORITY * FROM t1;
SELECT * FROM t1 FOR UPDATE;
SELECT (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM (SELECT * FROM t1 FOR UPDATE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR UPDATE);
SELECT 1 FROM t1, t2 FOR UPDATE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR UPDATE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR UPDATE OF t1);
SELECT * FROM t1 FOR SHARE;
SELECT (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM (SELECT * FROM t1 FOR SHARE) a1;
SELECT 1 WHERE 1 IN (SELECT * FROM t1 FOR SHARE);
SELECT 1 FROM t1, t2 FOR SHARE OF t1;
SELECT (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
SELECT 1 FROM (SELECT 1 FROM t1, t2 FOR SHARE OF t1) a1;
SELECT 1 WHERE 1 IN (SELECT 1 FROM t1, t2 FOR SHARE OF t1);
DROP USER mysqltestuser1@localhost;
DROP DATABASE db1;
CREATE DATABASE db1;
CREATE TABLE db1.t1 ( a INT );
INSERT INTO db1.t1 VALUES ( 1 );
CREATE USER mysqluser1;
GRANT ALL ON db1.t1 TO mysqluser1;
SELECT * FROM t1 WHERE a = 1 FOR UPDATE;
DROP DATABASE db1;
DROP USER mysqluser1;
