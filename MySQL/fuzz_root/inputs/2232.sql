CREATE TABLE t1 ( id int NOT NULL auto_increment PRIMARY KEY, b int NOT NULL, c datetime NOT NULL, INDEX idx_b(b), INDEX idx_c(c) ) ENGINE=InnoDB;
CREATE TABLE t2 ( b int NOT NULL auto_increment PRIMARY KEY, c datetime NOT NULL ) ENGINE= InnoDB;
INSERT INTO t2(c) VALUES ('2007-01-01');
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t1(b,c) SELECT b,c FROM t2;
UPDATE t2 SET c='2007-01-02';
INSERT INTO t1(b,c) SELECT b,c FROM t2;
UPDATE t2 SET c='2007-01-03';
INSERT INTO t1(b,c) SELECT b,c FROM t2;
ANALYZE TABLE t1;
ANALYZE TABLE t2;
set @@sort_buffer_size=8192;
EXPLAIN SELECT COUNT(*) FROM t1 FORCE INDEX(idx_b, idx_c) WHERE (c >= '2007-01-02' AND c <= '2007-01-03') OR b >= 1;
set @@sort_buffer_size=default;
DROP TABLE t1,t2;
set optimizer_switch='semijoin=off';
set optimizer_switch='materialization=off';
CREATE TABLE t1 (topic BIGINT NOT NULL DEFAULT 0);
INSERT INTO t1 (topic) VALUES(1370);
INSERT INTO t1 (topic) VALUES(1369);
INSERT INTO t1 (topic) VALUES(1368);
INSERT INTO t1 (topic) VALUES(1367);
INSERT INTO t1 (topic) VALUES(1366);
INSERT INTO t1 (topic) VALUES(1365);
INSERT INTO t1 (topic) VALUES(1364);
INSERT INTO t1 (topic) VALUES(1363);
INSERT INTO t1 (topic) VALUES(1362);
INSERT INTO t1 (topic) VALUES(1361);
INSERT INTO t1 (topic) VALUES(1360);
INSERT INTO t1 (topic) VALUES(1359);
INSERT INTO t1 (topic) VALUES(1358);
INSERT INTO t1 (topic) VALUES(1357);
INSERT INTO t1 (topic) VALUES(1356);
INSERT INTO t1 (topic) VALUES(1355);
INSERT INTO t1 (topic) VALUES(1354);
INSERT INTO t1 (topic) VALUES(1353);
INSERT INTO t1 (topic) VALUES(1352);
INSERT INTO t1 (topic) VALUES(1351);
INSERT INTO t1 (topic) VALUES(1350);
INSERT INTO t1 (topic) VALUES(1349);
INSERT INTO t1 (topic) VALUES(1348);
INSERT INTO t1 (topic) VALUES(1347);
INSERT INTO t1 (topic) VALUES(1346);
INSERT INTO t1 (topic) VALUES(1345);
INSERT INTO t1 (topic) VALUES(1344);
INSERT INTO t1 (topic) VALUES(1343);
INSERT INTO t1 (topic) VALUES(1342);
INSERT INTO t1 (topic) VALUES(1341);
INSERT INTO t1 (topic) VALUES(1340);
INSERT INTO t1 (topic) VALUES(1339);
INSERT INTO t1 (topic) VALUES(1338);
INSERT INTO t1 (topic) VALUES(1337);
INSERT INTO t1 (topic) VALUES(1336);
