create table t1(f1 int, key f1_idx(f1 desc)) engine=heap;
create table t1(a int, b int, key a_desc_b_asc (a desc, b), key a_asc_b_desc (a, b desc)) engine= innodb;
flush tables;
show create table t1;
insert into t1 values(1,6),(1,5),(2,5),(2,4),(3,4),(3,3), (4,3),(4,2),(5,2),(5,1),(6,1),(NULL,NULL);
analyze table t1;
explain select * from t1 order by a desc;
select * from t1 order by a desc;
explain select * from t1 order by a desc, b asc;
select * from t1 order by a desc, b asc;
explain select * from t1 order by a asc;
select * from t1 order by a asc, b desc;
explain select * from t1 order by a asc, b desc;
select * from t1 order by a asc, b desc;
explain select * from t1 group by a,b order by a, b desc;
select * from t1 group by a,b order by a, b desc;
explain select * from t1 group by a, b;
explain select * from t1 group by a, b order by a;
explain select * from t1 group by a , b order by a desc;
explain select * from t1 group by a, b order by a desc, b;
explain select * from t1 group by a, b order by a asc, b desc;
alter table t1 drop index a_asc_b_desc;
explain select * from t1 group by a, b order by a;
explain select distinct a from t1;
select distinct a from t1;
explain select a from t1 group by a;
select a from t1 group by a;
explain select * from t1 order by a asc;
select * from t1 order by a asc, b desc;
explain select * from t1 order by a asc, b desc;
select * from t1 order by a asc, b desc;
explain select * from t1 order by a desc, b desc;
select * from t1 order by a desc, b desc;
explain select * from t1 order by a asc, b asc;
select * from t1 order by a asc, b asc;
create index i1 on t1 (a desc, a asc);
create index i1 on t1 (a desc, b desc);
show create table t1;
create table t2 (a int auto_increment, primary key (a desc)) engine= innodb;
show create table t2;
insert ignore into t2 select a from t1;
select * from t2;
create table t3 (a varchar(10), key i1(a(5) desc)) engine= innodb;
flush tables;
show create table t3;
create index i2 on t3(a(6));
flush tables;
show create table t3;
alter table t3 add fulltext index fts_idx(a desc);
alter table t3 add fulltext index fts_idx(a asc);
alter table t3 add column b point not null, add spatial index gis_idx(b desc);
alter table t3 add column b point not null, add spatial index gis_idx(b asc);
create table t4 (a text, fulltext key fts(a desc));
create table t4 (a point not null, spatial key gis(a desc));
create table t4 (a text, fulltext key fts(a asc));
create table t4 (a point not null, spatial key gis(a asc));
create table t5 (f1 int, key h(f1 asc) using hash) engine= heap;
create table t5 (f1 int, key h(f1 desc) using hash) engine= heap;
create table t5 (f1 int, key h(f1) using hash) engine= heap;
drop table t1,t2,t3,t5;
CREATE TABLE t0 (i INTEGER);
INSERT INTO t0 VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
CREATE TABLE t1 (i1 INTEGER NOT NULL, i2 INTEGER NOT NULL, i3 INTEGER NOT NULL, KEY k1 (i1 desc, i2) ) ENGINE= innodb;
INSERT INTO t1 SELECT a.i*10 + b.i + 1, a.i*100 + b.i*10 + c.i, a.i FROM t0 AS a, t0 AS b, t0 AS c;
ANALYZE TABLE t1;
EXPLAIN SELECT * FROM t1 WHERE i1 BETWEEN 50 AND 52 AND MOD(i2,2)=1 ORDER BY i1 DESC;
SELECT * FROM t1 WHERE i1 BETWEEN 50 AND 52 AND MOD(i2,2)=1 ORDER BY i1 DESC;
EXPLAIN SELECT * FROM t1 WHERE (i1 BETWEEN 50 AND 52 OR i1 BETWEEN 70 AND 72) AND MOD(i2,2)=1 ORDER BY i1 DESC;
SELECT * FROM t1 WHERE (i1 BETWEEN 50 AND 52 OR i1 BETWEEN 70 AND 72) AND MOD(i2,2)=1 ORDER BY i1 DESC;
EXPLAIN SELECT * FROM t1 WHERE ( (i1=50 AND i2=495) OR i1 BETWEEN 70 AND 72) AND MOD(i2,2)=1 ORDER BY i1 DESC;
SELECT * FROM t1 WHERE ( (i1=50 AND i2=495) OR i1 BETWEEN 70 AND 72) AND MOD(i2,2)=1 ORDER BY i1 DESC;
EXPLAIN SELECT * FROM t1 WHERE i1 >= 50 AND i1 < 52 AND MOD(i2,2)=1 ORDER BY i1 DESC;
SELECT * FROM t1 WHERE i1 >= 50 AND i1 < 52 AND MOD(i2,2)=1 ORDER BY i1 DESC;
EXPLAIN SELECT * FROM t1 WHERE i1 > 50 AND i1 <= 52 AND MOD(i2,2)=1 ORDER BY i1 DESC;
SELECT * FROM t1 WHERE i1 > 50 AND i1 <= 52 AND MOD(i2,2)=1 ORDER BY i1 DESC;
ALTER TABLE t1 DROP INDEX k1, ADD INDEX k1(i1, i2);
ANALYZE TABLE t1;
EXPLAIN SELECT * FROM t1 WHERE i1 BETWEEN 50 AND 52 AND MOD(i2,2)=1 ORDER BY i1 DESC;
SELECT * FROM t1 WHERE i1 BETWEEN 50 AND 52 AND MOD(i2,2)=1 ORDER BY i1 DESC;
ALTER TABLE t1 DROP INDEX k1, ADD INDEX k1(i1, i2 DESC);
ANALYZE TABLE t1;
EXPLAIN SELECT * FROM t1 WHERE i1 BETWEEN 50 AND 52 AND i2 BETWEEN 495 AND 515 ORDER BY i1, i2 DESC;
