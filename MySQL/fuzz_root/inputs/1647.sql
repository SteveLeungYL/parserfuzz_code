CREATE DATABASE testdb;
CREATE USER caching_sha2@localhost IDENTIFIED BY 'caching';
GRANT ALL ON *.* TO caching_sha2@localhost;
SELECT USER(), DATABASE();
USE testdb;
CREATE TABLE t1(i INT, j VARCHAR(2048));
INSERT INTO t1 VALUES(1,repeat('a',1000)),(2,repeat('def',600));
SELECT * FROM t1;
SET GLOBAL max_allowed_packet=4*1024;
SELECT SPACE(@@global.max_allowed_packet);
SET GLOBAL max_allowed_packet=default;
SELECT USER();
SET @@SESSION.wait_timeout = 2;
SELECT SLEEP(10);
SELECT 1;
ALTER USER caching_sha2@localhost ACCOUNT LOCK;
ALTER USER caching_sha2@localhost ACCOUNT UNLOCK;
SELECT "connect succeeded after account is unlocked";
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
SELECT USER();
ALTER USER caching_sha2@localhost IDENTIFIED BY '';
SELECT USER();
CREATE USER sha256@localhost IDENTIFIED WITH 'sha256_password' BY 'auth_string';
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
SELECT USER();
ALTER USER sha256@localhost IDENTIFIED BY '';
SELECT USER();
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
CREATE USER native_user@localhost IDENTIFIED WITH 'mysql_native_password' BY 'native';
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
SELECT USER();
ALTER USER native_user@localhost IDENTIFIED BY '';
SELECT USER();
DROP USER sha256@localhost, native_user@localhost, caching_sha2@localhost;
DROP DATABASE testdb;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
CREATE DATABASE testdb;
CREATE USER caching_sha2@localhost IDENTIFIED BY 'caching';
GRANT ALL ON *.* TO caching_sha2@localhost;
SELECT USER(), DATABASE();
USE testdb;
CREATE TABLE t1(i INT, j VARCHAR(2048));
INSERT INTO t1 VALUES(1,repeat('a',1000)),(2,repeat('def',600));
SELECT * FROM t1;
SET GLOBAL max_allowed_packet=4*1024;
SELECT SPACE(@@global.max_allowed_packet);
SET GLOBAL max_allowed_packet=default;
SELECT USER();
SET @@SESSION.wait_timeout = 2;
SELECT SLEEP(10);
SELECT 1;
ALTER USER caching_sha2@localhost ACCOUNT LOCK;
ALTER USER caching_sha2@localhost ACCOUNT UNLOCK;
SELECT "connect succeeded after account is unlocked";
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
SELECT USER();
ALTER USER caching_sha2@localhost IDENTIFIED BY '';
SELECT USER();
CREATE USER sha256@localhost IDENTIFIED WITH 'sha256_password' BY 'auth_string';
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
SELECT USER();
ALTER USER sha256@localhost IDENTIFIED BY '';
SELECT USER();
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
CREATE USER native_user@localhost IDENTIFIED WITH 'mysql_native_password' BY 'native';
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
SELECT USER();
ALTER USER native_user@localhost IDENTIFIED BY '';
SELECT USER();
DROP USER sha256@localhost, native_user@localhost, caching_sha2@localhost;
DROP DATABASE testdb;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
show session status;
