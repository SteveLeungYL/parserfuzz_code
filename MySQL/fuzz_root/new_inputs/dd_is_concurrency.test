     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   SET GLOBAL debug= '+d,skip_dd_table_access_check';
use test;
CREATE TABLE t1 (f1 int) COMMENT='abc';
CREATE VIEW not_system_view AS  SELECT name as table_name, comment FROM mysql.tables;
SHOW CREATE VIEW not_system_view;
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
START TRANSACTION;
connect(con1,localhost,root,,);
START TRANSACTION;
UPDATE mysql.tables SET comment='mno' where name='t1';
connection default;
SELECT table_name, table_comment  FROM INFORMATION_SCHEMA.TABLES  WHERE table_name='t1';
connection con1;
  performance_schema.data_locks  WHERE OBJECT_SCHEMA='mysql' AND        OBJECT_NAME='tables' and LOCK_STATUS='WAITING';
rollback;
connection default;
commit;
connection default;
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
START TRANSACTION;
connection con1;
START TRANSACTION;
UPDATE mysql.tables SET comment='mno' where name='t1';
connection default;
SELECT table_name, table_comment  FROM INFORMATION_SCHEMA.TABLES  WHERE table_name='t1';
SELECT table_name, comment  FROM not_system_view  WHERE table_name='t1';
commit;
connection con1;
rollback;
connection default;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
START TRANSACTION;
connection con1;
START TRANSACTION;
UPDATE mysql.tables SET comment='mno' where name='t1';
connection default;
SELECT table_name, table_comment  FROM INFORMATION_SCHEMA.TABLES  WHERE table_name='t1';
SELECT table_name, comment  FROM not_system_view  WHERE table_name='t1';
commit;
connection con1;
rollback;
connection default;
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
START TRANSACTION;
connection con1;
START TRANSACTION;
UPDATE mysql.tables SET comment='mno' where name='t1';
connection default;
SELECT table_name, table_comment  FROM INFORMATION_SCHEMA.TABLES  WHERE table_name='t1';
SELECT table_name, comment  FROM not_system_view  WHERE table_name='t1';
commit;
connection con1;
rollback;
connection default;
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
START TRANSACTION;
connection con1;
START TRANSACTION;
UPDATE mysql.tables SET comment='mno' where name='t1';
connection default;
SELECT table_name, table_comment  FROM INFORMATION_SCHEMA.TABLES  WHERE table_name='t1'  LOCK IN SHARE MODE;
SELECT table_name, table_comment  FROM INFORMATION_SCHEMA.TABLES  WHERE table_name='t1'  FOR UPDATE;
connection con1;
rollback;
connection default;
SELECT table_name, table_comment  FROM INFORMATION_SCHEMA.TABLES  WHERE table_name='t1'  LOCK IN SHARE MODE;
SELECT table_name, table_comment  FROM INFORMATION_SCHEMA.TABLES  WHERE table_name='t1'  FOR UPDATE;
SELECT table_name, comment  FROM not_system_view  WHERE table_name='t1'  LOCK IN SHARE MODE;
SELECT table_name, comment  FROM not_system_view  WHERE table_name='t1'  FOR UPDATE;
commit;
connection con1;
disconnect con1;
connection default;
DROP VIEW not_system_view;
DROP TABLE t1;
SET GLOBAL debug= '-d,skip_dd_table_access_check';
