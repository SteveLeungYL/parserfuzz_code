      use strict;
  my $file= $ENV{'_GP_GREP_FILE'} or die "grep_file is not set";
  my $pattern= $ENV{'_GP_GREP_PATTERN'} or die "grep_pattern is not set";
  open(FILE, "$file") or die("Unable to open $file: $!\n");
  my $count = 0;
  my $result = "";
  my $output = $ENV{'_GP_GREP_OUTPUT'};
  if ($output eq 'print_each') {    print "Matching lines are:\n";
  }  my $finished = 0;
  while (<FILE>) {    my $line = $_;
    if (($line =~ /^CURRENT_TEST: /)) {      $result = "";
      $finished = 0;
      $count = 0;
    }    if ($finished == 0 && $line =~ /$pattern/) {      if ($output eq 'print_each') {        $result = $result . $line;
      }      $count++;
      if ($output eq 'boolean') {        $finished = 1;
      }    }  }  print $result;
  if ($count == 0 && $output eq 'print_each') {    print "None\n";
  }  if ($output eq 'boolean') {    print $count ? "Pattern found.\n" : "Pattern not found.\n";
  }  else {    print "Occurrences of '$pattern' in the input file: $count\n";
  }  close(FILE) or die "Error closing $file: $!";
EOFCREATE TABLE t1(s INT);
INSERT INTO t1 VALUES(1);
FLUSH LOGS;
INSERT INTO t1 VALUES(2);
DROP TABLE t1;
RESET MASTER;
      use strict;
  my $file= $ENV{'_GP_GREP_FILE'} or die "grep_file is not set";
  my $pattern= $ENV{'_GP_GREP_PATTERN'} or die "grep_pattern is not set";
  open(FILE, "$file") or die("Unable to open $file: $!\n");
  my $count = 0;
  my $result = "";
  my $output = $ENV{'_GP_GREP_OUTPUT'};
  if ($output eq 'print_each') {    print "Matching lines are:\n";
  }  my $finished = 0;
  while (<FILE>) {    my $line = $_;
    if (($line =~ /^CURRENT_TEST: /)) {      $result = "";
      $finished = 0;
      $count = 0;
    }    if ($finished == 0 && $line =~ /$pattern/) {      if ($output eq 'print_each') {        $result = $result . $line;
      }      $count++;
      if ($output eq 'boolean') {        $finished = 1;
      }    }  }  print $result;
  if ($count == 0 && $output eq 'print_each') {    print "None\n";
  }  if ($output eq 'boolean') {    print $count ? "Pattern found.\n" : "Pattern not found.\n";
  }  else {    print "Occurrences of '$pattern' in the input file: $count\n";
  }  close(FILE) or die "Error closing $file: $!";
EOFCREATE TABLE t1(s INT);
INSERT INTO t1 VALUES(1);
FLUSH LOGS;
INSERT INTO t1 VALUES(2);
DROP TABLE t1;
RESET MASTER;
      use strict;
  my $file= $ENV{'_GP_GREP_FILE'} or die "grep_file is not set";
  my $pattern= $ENV{'_GP_GREP_PATTERN'} or die "grep_pattern is not set";
  open(FILE, "$file") or die("Unable to open $file: $!\n");
  my $count = 0;
  my $result = "";
  my $output = $ENV{'_GP_GREP_OUTPUT'};
  if ($output eq 'print_each') {    print "Matching lines are:\n";
  }  my $finished = 0;
  while (<FILE>) {    my $line = $_;
    if (($line =~ /^CURRENT_TEST: /)) {      $result = "";
      $finished = 0;
      $count = 0;
    }    if ($finished == 0 && $line =~ /$pattern/) {      if ($output eq 'print_each') {        $result = $result . $line;
      }      $count++;
      if ($output eq 'boolean') {        $finished = 1;
      }    }  }  print $result;
  if ($count == 0 && $output eq 'print_each') {    print "None\n";
  }  if ($output eq 'boolean') {    print $count ? "Pattern found.\n" : "Pattern not found.\n";
  }  else {    print "Occurrences of '$pattern' in the input file: $count\n";
  }  close(FILE) or die "Error closing $file: $!";
EOFCREATE TABLE t1(s INT);
INSERT INTO t1 VALUES(1);
FLUSH LOGS;
INSERT INTO t1 VALUES(2);
DROP TABLE t1;
RESET MASTER;
      use strict;
  my $file= $ENV{'_GP_GREP_FILE'} or die "grep_file is not set";
  my $pattern= $ENV{'_GP_GREP_PATTERN'} or die "grep_pattern is not set";
  open(FILE, "$file") or die("Unable to open $file: $!\n");
  my $count = 0;
  my $result = "";
  my $output = $ENV{'_GP_GREP_OUTPUT'};
  if ($output eq 'print_each') {    print "Matching lines are:\n";
  }  my $finished = 0;
  while (<FILE>) {    my $line = $_;
    if (($line =~ /^CURRENT_TEST: /)) {      $result = "";
      $finished = 0;
      $count = 0;
    }    if ($finished == 0 && $line =~ /$pattern/) {      if ($output eq 'print_each') {        $result = $result . $line;
      }      $count++;
      if ($output eq 'boolean') {        $finished = 1;
      }    }  }  print $result;
  if ($count == 0 && $output eq 'print_each') {    print "None\n";
  }  if ($output eq 'boolean') {    print $count ? "Pattern found.\n" : "Pattern not found.\n";
  }  else {    print "Occurrences of '$pattern' in the input file: $count\n";
  }  close(FILE) or die "Error closing $file: $!";
EOFCREATE TABLE t1(s INT);
INSERT INTO t1 VALUES(1);
FLUSH LOGS;
INSERT INTO t1 VALUES(2);
DROP TABLE t1;
RESET MASTER;
      use strict;
  my $file= $ENV{'_GP_GREP_FILE'} or die "grep_file is not set";
  my $pattern= $ENV{'_GP_GREP_PATTERN'} or die "grep_pattern is not set";
  open(FILE, "$file") or die("Unable to open $file: $!\n");
  my $count = 0;
  my $result = "";
  my $output = $ENV{'_GP_GREP_OUTPUT'};
  if ($output eq 'print_each') {    print "Matching lines are:\n";
  }  my $finished = 0;
  while (<FILE>) {    my $line = $_;
    if (($line =~ /^CURRENT_TEST: /)) {      $result = "";
      $finished = 0;
      $count = 0;
    }    if ($finished == 0 && $line =~ /$pattern/) {      if ($output eq 'print_each') {        $result = $result . $line;
      }      $count++;
      if ($output eq 'boolean') {        $finished = 1;
      }    }  }  print $result;
  if ($count == 0 && $output eq 'print_each') {    print "None\n";
  }  if ($output eq 'boolean') {    print $count ? "Pattern found.\n" : "Pattern not found.\n";
  }  else {    print "Occurrences of '$pattern' in the input file: $count\n";
  }  close(FILE) or die "Error closing $file: $!";
EOFCREATE TABLE t1(s INT);
INSERT INTO t1 VALUES(1);
FLUSH LOGS;
INSERT INTO t1 VALUES(2);
DROP TABLE t1;
RESET MASTER;
