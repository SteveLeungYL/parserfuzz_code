        SET @old_lock_wait_timeout= @@lock_wait_timeout;
connect (con1, localhost, root,,);
SET @old_lock_wait_timeout= @@lock_wait_timeout;
connection default;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t2 (j INT) ENGINE=InnoDB;
CREATE TABLE t0 (m INT) ENGINE=MyISAM;
LOCK TABLES t1 WRITE, t2 WRITE, t0 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO t00, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t00, t01, t2;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t0 (l INT) ENGINE=MyISAM;
CREATE DATABASE mysqltest;
LOCK TABLES t0 WRITE, t1 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO mysqltest.t0, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
ALTER DATABASE mysqltest CHARACTER SET latin1;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t01;
DROP DATABASE mysqltest;
        SET @old_lock_wait_timeout= @@lock_wait_timeout;
connect (con1, localhost, root,,);
SET @old_lock_wait_timeout= @@lock_wait_timeout;
connection default;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t2 (j INT) ENGINE=InnoDB;
CREATE TABLE t0 (m INT) ENGINE=MyISAM;
LOCK TABLES t1 WRITE, t2 WRITE, t0 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO t00, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t00, t01, t2;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t0 (l INT) ENGINE=MyISAM;
CREATE DATABASE mysqltest;
LOCK TABLES t0 WRITE, t1 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO mysqltest.t0, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
ALTER DATABASE mysqltest CHARACTER SET latin1;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t01;
DROP DATABASE mysqltest;
        SET @old_lock_wait_timeout= @@lock_wait_timeout;
connect (con1, localhost, root,,);
SET @old_lock_wait_timeout= @@lock_wait_timeout;
connection default;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t2 (j INT) ENGINE=InnoDB;
CREATE TABLE t0 (m INT) ENGINE=MyISAM;
LOCK TABLES t1 WRITE, t2 WRITE, t0 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO t00, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t00, t01, t2;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t0 (l INT) ENGINE=MyISAM;
CREATE DATABASE mysqltest;
LOCK TABLES t0 WRITE, t1 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO mysqltest.t0, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
ALTER DATABASE mysqltest CHARACTER SET latin1;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t01;
DROP DATABASE mysqltest;
        SET @old_lock_wait_timeout= @@lock_wait_timeout;
connect (con1, localhost, root,,);
SET @old_lock_wait_timeout= @@lock_wait_timeout;
connection default;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t2 (j INT) ENGINE=InnoDB;
CREATE TABLE t0 (m INT) ENGINE=MyISAM;
LOCK TABLES t1 WRITE, t2 WRITE, t0 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO t00, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t00, t01, t2;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t0 (l INT) ENGINE=MyISAM;
CREATE DATABASE mysqltest;
LOCK TABLES t0 WRITE, t1 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO mysqltest.t0, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
ALTER DATABASE mysqltest CHARACTER SET latin1;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t01;
DROP DATABASE mysqltest;
        SET @old_lock_wait_timeout= @@lock_wait_timeout;
connect (con1, localhost, root,,);
SET @old_lock_wait_timeout= @@lock_wait_timeout;
connection default;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t2 (j INT) ENGINE=InnoDB;
CREATE TABLE t0 (m INT) ENGINE=MyISAM;
LOCK TABLES t1 WRITE, t2 WRITE, t0 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO t00, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM t00;
SELECT * FROM t1;
SELECT * FROM t01;
SELECT * FROM t2;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t00, t01, t2;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t0 (l INT) ENGINE=MyISAM;
CREATE DATABASE mysqltest;
LOCK TABLES t0 WRITE, t1 WRITE;
SET @@debug='+d,injecting_fault_writing';
RENAME TABLES t0 TO mysqltest.t0, t1 TO t01;
SET @@debug='-d,injecting_fault_writing';
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
connection con1;
SET @@lock_wait_timeout= 1;
SELECT * FROM t0;
SELECT * FROM mysqltest.t0;
SELECT * FROM t1;
SELECT * FROM t01;
ALTER DATABASE mysqltest CHARACTER SET latin1;
SET @@lock_wait_timeout= @old_lock_wait_timeout;
connection default;
UNLOCK TABLES;
DROP TABLES t01;
DROP DATABASE mysqltest;
