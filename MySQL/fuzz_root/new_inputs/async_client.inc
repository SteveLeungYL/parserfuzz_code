CREATE USER foo@localhost IDENTIFIED BY 'pwd';
enable_async_client;
 connect(foo_con,localhost,foo,pwd,,,,SSL $COMPRESS_OPTION,,$COMPRESS_ALGORITHM);
connect(foo_con,localhost,foo,pwd,,,,SSL,,);
 die "Digests do not match";
connection default;
disconnect foo_con;
disable_async_client;
DROP USER foo@localhost;
CREATE USER foo@localhost IDENTIFIED BY 'pwd';
enable_async_client;
 connect(foo_con,localhost,foo,pwd,,,,SSL $COMPRESS_OPTION,,$COMPRESS_ALGORITHM);
connect(foo_con,localhost,foo,pwd,,,,SSL,,);
 die "Digests do not match";
connection default;
disconnect foo_con;
disable_async_client;
DROP USER foo@localhost;
CREATE USER foo@localhost IDENTIFIED BY 'pwd';
enable_async_client;
 connect(foo_con,localhost,foo,pwd,,,,SSL $COMPRESS_OPTION,,$COMPRESS_ALGORITHM);
connect(foo_con,localhost,foo,pwd,,,,SSL,,);
 die "Digests do not match";
connection default;
disconnect foo_con;
disable_async_client;
DROP USER foo@localhost;
CREATE USER foo@localhost IDENTIFIED BY 'pwd';
enable_async_client;
 connect(foo_con,localhost,foo,pwd,,,,SSL $COMPRESS_OPTION,,$COMPRESS_ALGORITHM);
connect(foo_con,localhost,foo,pwd,,,,SSL,,);
 die "Digests do not match";
connection default;
disconnect foo_con;
disable_async_client;
DROP USER foo@localhost;
CREATE USER foo@localhost IDENTIFIED BY 'pwd';
enable_async_client;
 connect(foo_con,localhost,foo,pwd,,,,SSL $COMPRESS_OPTION,,$COMPRESS_ALGORITHM);
connect(foo_con,localhost,foo,pwd,,,,SSL,,);
 die "Digests do not match";
connection default;
disconnect foo_con;
disable_async_client;
DROP USER foo@localhost;
