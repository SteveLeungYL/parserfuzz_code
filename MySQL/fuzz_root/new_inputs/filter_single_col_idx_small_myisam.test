  set optimizer_switch='condition_fanout_filter=off';
EXPLAIN SELECT * FROM t1 WHERE col3=5;
EXPLAIN SELECT * FROM t1 WHERE col1_idx>1;
EXPLAIN SELECT * FROM t1 JOIN t2 WHERE t1.col1_idx=t2.col1_idx;
set optimizer_switch='condition_fanout_filter=on';
EXPLAIN SELECT * FROM t1 WHERE col3=5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3=5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<=>5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3>5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3>=5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<=5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3!=5;
EXPLAIN SELECT * FROM t1 WHERE NOT t1.col3<=5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3 BETWEEN 5 AND 10;
EXPLAIN SELECT * FROM t1 WHERE t1.col3 NOT BETWEEN 5 AND 10;
EXPLAIN SELECT * FROM t1 WHERE t1.col3 IN (5, 6);
EXPLAIN SELECT * FROM t1 WHERE t1.col3 IN (5, 6, 7, 8);
EXPLAIN SELECT * FROM t1 WHERE t1.col3 IN (1, (SELECT col3 FROM t2 where col3=t1.col4 LIMIT 1));
EXPLAIN SELECT * FROM t1 WHERE t1.col3 NOT IN (5, 6);
EXPLAIN SELECT * FROM t1 WHERE t1.col3 NOT IN (5, 6, 7, 8);
EXPLAIN SELECT * FROM t1 WHERE (t1.col3, t1.col4) IN ((5,5),(6,6),(7,7));
EXPLAIN   SELECT * FROM t1 WHERE (t1.col3, t1.col4) IN ((5,5),(6,6),(7,7),(8,8),(9,9),(10,10));
EXPLAIN SELECT * FROM t1 WHERE (t1.col3, 1) IN ((5,5),(6,6),(7,7));
EXPLAIN SELECT * FROM t1 WHERE (t1.col3, t1.col4) NOT IN ((5,5),(6,6),(7,7));
EXPLAIN SELECT * FROM t1 WHERE (t1.col3, 1) NOT IN ((5,5),(6,6),(7,7));
EXPLAIN SELECT * FROM t1 WHERE t1.col3 IS NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col3 = NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col3>NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col3>=NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<=NULL;
EXPLAIN SELECT * FROM t1 WHERE NULL>t1.col3;
EXPLAIN SELECT * FROM t1 WHERE NULL>=t1.col3;
EXPLAIN SELECT * FROM t1 WHERE NULL<t1.col3;
EXPLAIN SELECT * FROM t1 WHERE NULL<=t1.col3;
EXPLAIN SELECT * FROM t1 WHERE t1.col3 IS NOT NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col3 != NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col4 IS NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col4 = NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col4>NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col4>=NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col4<NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col4<=NULL;
EXPLAIN SELECT * FROM t1 WHERE NULL>t1.col4;
EXPLAIN SELECT * FROM t1 WHERE NULL>=t1.col4;
EXPLAIN SELECT * FROM t1 WHERE NULL<t1.col4;
EXPLAIN SELECT * FROM t1 WHERE NULL<=t1.col4;
EXPLAIN SELECT * FROM t1 WHERE t1.col4 IS NOT NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col4 != NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.vc LIKE 'america';
EXPLAIN SELECT * FROM t1 WHERE t1.vc LIKE '%america';
EXPLAIN SELECT * FROM t1 WHERE t1.vc LIKE 'amer%';
EXPLAIN SELECT * FROM t1 WHERE t1.vc NOT LIKE 'america';
EXPLAIN SELECT * FROM t1 WHERE t1.vc NOT LIKE '%america';
EXPLAIN SELECT * FROM t1 WHERE t1.vc NOT LIKE 'amer%';
EXPLAIN SELECT * FROM t1 WHERE MATCH(t1.vc) AGAINST ('+norway' IN BOOLEAN MODE);
EXPLAIN SELECT * FROM t1 WHERE MATCH(t1.vc_ft) AGAINST ('+norway');
EXPLAIN SELECT * FROM t1 WHERE MATCH(t1.vc_ft) AGAINST ('norway');
EXPLAIN SELECT * FROM t1 WHERE NOT MATCH(t1.vc) AGAINST ('+norway' IN BOOLEAN MODE);
EXPLAIN SELECT * FROM t1 WHERE NOT MATCH(t1.vc_ft) AGAINST ('+norway');
EXPLAIN SELECT * FROM t1 WHERE NOT MATCH(t1.vc_ft) AGAINST ('norway');
EXPLAIN SELECT * FROM t1 WHERE length(t1.vc) > 3;
EXPLAIN SELECT * FROM t1 WHERE length(t1.vc) = 3;
EXPLAIN SELECT * FROM t1 WHERE length(t1.vc) IS NULL;
EXPLAIN SELECT * FROM t1 WHERE length(t1.vc) IS NOT NULL;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<5;
EXPLAIN SELECT * FROM t1 WHERE t1.col4<5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<5 OR col4<5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<5 AND col4<5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<5 XOR col4<5;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<5 XOR col4<5 XOR col1_idx>3;
EXPLAIN SELECT * FROM t1 WHERE t1.col3<5 XOR (col4<5 AND col4>1);
while ($iterations)  # Should there be a filter on semijoin nests? No - #rows=1 is enough      EXPLAIN SELECT * FROM t1 WHERE t1.col3 IN (SELECT col3 FROM t2);
      EXPLAIN SELECT * FROM t1 WHERE t1.col3 IN (SELECT col3 FROM t2 where col1_idx>2);
      EXPLAIN SELECT * FROM t1 WHERE t1.col3 IN (SELECT col3 FROM t2 where col3=3);
      EXPLAIN SELECT * FROM t1 WHERE EXISTS (SELECT col3 FROM t2 where col1_idx>2);
      EXPLAIN SELECT * FROM t1 WHERE EXISTS (SELECT col3 FROM t2 where col3=3);
      EXPLAIN SELECT * FROM t1 WHERE EXISTS (SELECT col3 FROM t2 where col1_idx>2 and col3=3);
        EXPLAIN SELECT * FROM t1 WHERE EXISTS (SELECT 1 FROM t2 where col1_idx>t1.col3);
      EXPLAIN SELECT * FROM t1 WHERE col3 =   (SELECT 1 FROM t2);
  EXPLAIN SELECT * FROM t1 WHERE col3 <=> (SELECT 1 FROM t2);
  EXPLAIN SELECT * FROM t1 WHERE col3 >   (SELECT 1 FROM t2);
  EXPLAIN SELECT * FROM t1 WHERE col3 >=  (SELECT 1 FROM t2);
  EXPLAIN SELECT * FROM t1 WHERE col3 <   (SELECT 1 FROM t2);
  EXPLAIN SELECT * FROM t1 WHERE col3 <=  (SELECT 1 FROM t2);
  EXPLAIN SELECT * FROM t1 WHERE col3 between (SELECT 1 FROM t2) and 2;
  EXPLAIN SELECT * FROM t1 WHERE col1_idx =   (SELECT 1 FROM t2 LIMIT 1);
  EXPLAIN SELECT * FROM t1 WHERE col1_idx <=> (SELECT 1 FROM t2 LIMIT 1);
  EXPLAIN SELECT * FROM t1 WHERE col1_idx >   (SELECT 1 FROM t2 LIMIT 1);
  EXPLAIN SELECT * FROM t1 WHERE col1_idx >=  (SELECT 1 FROM t2 LIMIT 1);
  EXPLAIN SELECT * FROM t1 WHERE col1_idx <   (SELECT 1 FROM t2 LIMIT 1);
  EXPLAIN SELECT * FROM t1 WHERE col1_idx <=  (SELECT 1 FROM t2 LIMIT 1);
  EXPLAIN SELECT * FROM t1 WHERE col1_idx between (SELECT 1 FROM t2 LIMIT 1) and 2;
    set optimizer_switch='semijoin=off';
    dec $iterations;
set optimizer_switch=default;
EXPLAIN SELECT * FROM t1 AS t1a JOIN t1 AS t1b ON t1a.col1_idx=t1b.col1_idx WHERE t1b.col3=5;
EXPLAIN SELECT * FROM t1 JOIN t2 ON t1.col1_idx=t2.col1_idxWHERE t2.col3=5;
EXPLAIN SELECT *FROM t1 JOIN t2 ON t1.col1_idx=t2.col1_idxWHERE t1.col3=t2.col3;
EXPLAIN SELECT *FROM t1 JOIN t2 ON t1.col1_idx=t2.col1_idxWHERE t1.col2_idx=1 AND t2.col2_idx=1;
EXPLAIN SELECT * FROM t1 JOIN t2 ON t1.col1_idx=t2.col1_idxWHERE t1.col2_idx>1 AND t2.col2_idx>1;
EXPLAIN SELECT * FROM t1 JOIN t2 ON t1.col1_idx>t2.col1_idxWHERE t1.col2_idx>1 AND t2.col2_idx>1;
EXPLAIN SELECT * FROM t1 JOIN t2 ON t1.col1_idx>t2.col1_idxWHERE t1.col1_idx>1 AND t2.col1_idx>1;
EXPLAIN SELECT * FROM t1 JOIN t2 ON t1.col1_idx>t2.col1_idxWHERE t1.col1_idx!=1 AND t2.col1_idx>4;
EXPLAIN SELECT * FROM t1 JOIN t2 ON t1.col1_idx>t2.col1_idx;
EXPLAIN SELECT * FROM t1 WHERE col1_idx > 500 AND col2_idx > 500;
EXPLAIN SELECT * FROM t1 WHERE col1_idx > 120 AND col2_idx > 120;
EXPLAIN SELECT * FROM t1 WHERE col1_idx IN (120,121,122) AND col2_idx IN (120,121,122);
EXPLAIN SELECT * FROM t1 WHERE col1_idx IN (120,121,122) AND col2_idx NOT IN (120,121,122);
EXPLAIN SELECT * FROM t1 WHERE col1_idx IN (120,121,122) AND col3 IN (120,121,122);
EXPLAIN SELECT * FROM t1 WHERE col1_idx IN (120,121,122) AND col3 NOT IN (120,121,122);
EXPLAIN SELECT * FROM t1 JOIN t2 ON t1.col3=t2.col1_idx WHERE t2.col1_idx>20;
EXPLAIN SELECT * FROM t1 JOIN t2 ON t1.col3=t2.col1_idx WHERE t2.col1_idx=20;
CREATE TABLE t1(  col1_idx INT DEFAULT NULL,  col2_idx INT DEFAULT NULL,  col3 INT DEFAULT NULL,  col4 INT NOT NULL,  vc VARCHAR(20),  vc_ft VARCHAR(20),  KEY(col1_idx),  KEY(col2_idx),  FULLTEXT(vc_ft)) ENGINE=myisam;
CREATE TABLE t2(  col1_idx INT DEFAULT NULL,  col2_idx INT DEFAULT NULL,  col3 INT DEFAULT NULL,  KEY(col1_idx),  KEY(col2_idx)) ENGINE=myisam;
insert into t1 values (1,1,1,1,'america', 'america'),(2,2,2,2,'england','england');
while ($iteration < 3)  eval insert into t1 select col1_idx+$i, col2_idx+$i, col3+$i, col4+$i, vc, vc_ft from t1;
  let $i=$i*2;
  inc $iteration;
insert into t1 select col1_idx, col2_idx, col3, col4, 'america', 'america' from t1;
insert into t1 select col1_idx, col2_idx, col3, col4, 'england america', 'england america' from t1;
insert ignore into t1 select col1_idx, col2_idx, col3, col4, 'germany england america', 'germany england america' from t1;
insert into t2 select col1_idx,col2_idx,col3 from t1;
analyze table t1;
analyze table t2;
DROP TABLE t1,t2;
