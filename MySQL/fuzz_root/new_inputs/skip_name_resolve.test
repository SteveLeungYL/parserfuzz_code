CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
CREATE USER IF NOT EXISTS 'root'@'::1';
GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1' WITH GRANT OPTION;
    let $os_version = `SELECT CONVERT(@@version_compile_os using latin1) NOT IN ("Win32","Win64","Windows")`;
  if ($os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK);
  }  if (!$os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK,PIPE);
  }  CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
  CREATE USER IF NOT EXISTS 'root'@'::1';
  GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1';
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   DROP USER 'root'@'::1';
DROP USER 'root'@'127.0.0.1';
    DROP USER 'root'@'127.0.0.1';
  DROP USER 'root'@'::1';
  RESET MASTER;
    CREATE USER mysqltest_1@'127.0.0.1/255.255.255.255';
GRANT ALL ON test.* TO mysqltest_1@'127.0.0.1/255.255.255.255';
SHOW GRANTS FOR mysqltest_1@'127.0.0.1/255.255.255.255';
REVOKE ALL ON test.* FROM mysqltest_1@'127.0.0.1/255.255.255.255';
DROP USER mysqltest_1@'127.0.0.1/255.255.255.255';
connect (con1, localhost, root, , test, $MASTER_MYPORT, );
SELECT USER();
SHOW PROCESSLIST;
connection default;
disconnect con1;
SHOW VARIABLES LIKE 'skip_name_resolve';
SHOW GLOBAL VARIABLES LIKE 'skip_name_resolve';
SHOW SESSION VARIABLES LIKE 'skip_name_resolve';
SELECT @@skip_name_resolve;
SELECT @@LOCAL.skip_name_resolve;
SELECT @@GLOBAL.skip_name_resolve;
SET @@skip_name_resolve=0;
SET @@LOCAL.skip_name_resolve=0;
SET @@GLOBAL.skip_name_resolve=0;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost1' WHERE user='b20438524';
FLUSH PRIVILEGES;
DELETE FROM mysql.user WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost' WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
DELETE FROM mysql.user WHERE user='b20438524';
CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
CREATE USER IF NOT EXISTS 'root'@'::1';
GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1' WITH GRANT OPTION;
    let $os_version = `SELECT CONVERT(@@version_compile_os using latin1) NOT IN ("Win32","Win64","Windows")`;
  if ($os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK);
  }  if (!$os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK,PIPE);
  }  CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
  CREATE USER IF NOT EXISTS 'root'@'::1';
  GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1';
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   DROP USER 'root'@'::1';
DROP USER 'root'@'127.0.0.1';
    DROP USER 'root'@'127.0.0.1';
  DROP USER 'root'@'::1';
  RESET MASTER;
    CREATE USER mysqltest_1@'127.0.0.1/255.255.255.255';
GRANT ALL ON test.* TO mysqltest_1@'127.0.0.1/255.255.255.255';
SHOW GRANTS FOR mysqltest_1@'127.0.0.1/255.255.255.255';
REVOKE ALL ON test.* FROM mysqltest_1@'127.0.0.1/255.255.255.255';
DROP USER mysqltest_1@'127.0.0.1/255.255.255.255';
connect (con1, localhost, root, , test, $MASTER_MYPORT, );
SELECT USER();
SHOW PROCESSLIST;
connection default;
disconnect con1;
SHOW VARIABLES LIKE 'skip_name_resolve';
SHOW GLOBAL VARIABLES LIKE 'skip_name_resolve';
SHOW SESSION VARIABLES LIKE 'skip_name_resolve';
SELECT @@skip_name_resolve;
SELECT @@LOCAL.skip_name_resolve;
SELECT @@GLOBAL.skip_name_resolve;
SET @@skip_name_resolve=0;
SET @@LOCAL.skip_name_resolve=0;
SET @@GLOBAL.skip_name_resolve=0;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost1' WHERE user='b20438524';
FLUSH PRIVILEGES;
DELETE FROM mysql.user WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost' WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
DELETE FROM mysql.user WHERE user='b20438524';
CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
CREATE USER IF NOT EXISTS 'root'@'::1';
GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1' WITH GRANT OPTION;
    let $os_version = `SELECT CONVERT(@@version_compile_os using latin1) NOT IN ("Win32","Win64","Windows")`;
  if ($os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK);
  }  if (!$os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK,PIPE);
  }  CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
  CREATE USER IF NOT EXISTS 'root'@'::1';
  GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1';
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   DROP USER 'root'@'::1';
DROP USER 'root'@'127.0.0.1';
    DROP USER 'root'@'127.0.0.1';
  DROP USER 'root'@'::1';
  RESET MASTER;
    CREATE USER mysqltest_1@'127.0.0.1/255.255.255.255';
GRANT ALL ON test.* TO mysqltest_1@'127.0.0.1/255.255.255.255';
SHOW GRANTS FOR mysqltest_1@'127.0.0.1/255.255.255.255';
REVOKE ALL ON test.* FROM mysqltest_1@'127.0.0.1/255.255.255.255';
DROP USER mysqltest_1@'127.0.0.1/255.255.255.255';
connect (con1, localhost, root, , test, $MASTER_MYPORT, );
SELECT USER();
SHOW PROCESSLIST;
connection default;
disconnect con1;
SHOW VARIABLES LIKE 'skip_name_resolve';
SHOW GLOBAL VARIABLES LIKE 'skip_name_resolve';
SHOW SESSION VARIABLES LIKE 'skip_name_resolve';
SELECT @@skip_name_resolve;
SELECT @@LOCAL.skip_name_resolve;
SELECT @@GLOBAL.skip_name_resolve;
SET @@skip_name_resolve=0;
SET @@LOCAL.skip_name_resolve=0;
SET @@GLOBAL.skip_name_resolve=0;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost1' WHERE user='b20438524';
FLUSH PRIVILEGES;
DELETE FROM mysql.user WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost' WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
DELETE FROM mysql.user WHERE user='b20438524';
CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
CREATE USER IF NOT EXISTS 'root'@'::1';
GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1' WITH GRANT OPTION;
    let $os_version = `SELECT CONVERT(@@version_compile_os using latin1) NOT IN ("Win32","Win64","Windows")`;
  if ($os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK);
  }  if (!$os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK,PIPE);
  }  CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
  CREATE USER IF NOT EXISTS 'root'@'::1';
  GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1';
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   DROP USER 'root'@'::1';
DROP USER 'root'@'127.0.0.1';
    DROP USER 'root'@'127.0.0.1';
  DROP USER 'root'@'::1';
  RESET MASTER;
    CREATE USER mysqltest_1@'127.0.0.1/255.255.255.255';
GRANT ALL ON test.* TO mysqltest_1@'127.0.0.1/255.255.255.255';
SHOW GRANTS FOR mysqltest_1@'127.0.0.1/255.255.255.255';
REVOKE ALL ON test.* FROM mysqltest_1@'127.0.0.1/255.255.255.255';
DROP USER mysqltest_1@'127.0.0.1/255.255.255.255';
connect (con1, localhost, root, , test, $MASTER_MYPORT, );
SELECT USER();
SHOW PROCESSLIST;
connection default;
disconnect con1;
SHOW VARIABLES LIKE 'skip_name_resolve';
SHOW GLOBAL VARIABLES LIKE 'skip_name_resolve';
SHOW SESSION VARIABLES LIKE 'skip_name_resolve';
SELECT @@skip_name_resolve;
SELECT @@LOCAL.skip_name_resolve;
SELECT @@GLOBAL.skip_name_resolve;
SET @@skip_name_resolve=0;
SET @@LOCAL.skip_name_resolve=0;
SET @@GLOBAL.skip_name_resolve=0;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost1' WHERE user='b20438524';
FLUSH PRIVILEGES;
DELETE FROM mysql.user WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost' WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
DELETE FROM mysql.user WHERE user='b20438524';
CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
CREATE USER IF NOT EXISTS 'root'@'::1';
GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1' WITH GRANT OPTION;
    let $os_version = `SELECT CONVERT(@@version_compile_os using latin1) NOT IN ("Win32","Win64","Windows")`;
  if ($os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK);
  }  if (!$os_version)  {    connect (slave_init_con,localhost,root,,test,$SLAVE_MYPORT,$SLAVE_MYSOCK,PIPE);
  }  CREATE USER IF NOT EXISTS 'root'@'127.0.0.1';
  CREATE USER IF NOT EXISTS 'root'@'::1';
  GRANT ALL ON *.* TO 'root'@'127.0.0.1', 'root'@'::1';
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   DROP USER 'root'@'::1';
DROP USER 'root'@'127.0.0.1';
    DROP USER 'root'@'127.0.0.1';
  DROP USER 'root'@'::1';
  RESET MASTER;
    CREATE USER mysqltest_1@'127.0.0.1/255.255.255.255';
GRANT ALL ON test.* TO mysqltest_1@'127.0.0.1/255.255.255.255';
SHOW GRANTS FOR mysqltest_1@'127.0.0.1/255.255.255.255';
REVOKE ALL ON test.* FROM mysqltest_1@'127.0.0.1/255.255.255.255';
DROP USER mysqltest_1@'127.0.0.1/255.255.255.255';
connect (con1, localhost, root, , test, $MASTER_MYPORT, );
SELECT USER();
SHOW PROCESSLIST;
connection default;
disconnect con1;
SHOW VARIABLES LIKE 'skip_name_resolve';
SHOW GLOBAL VARIABLES LIKE 'skip_name_resolve';
SHOW SESSION VARIABLES LIKE 'skip_name_resolve';
SELECT @@skip_name_resolve;
SELECT @@LOCAL.skip_name_resolve;
SELECT @@GLOBAL.skip_name_resolve;
SET @@skip_name_resolve=0;
SET @@LOCAL.skip_name_resolve=0;
SET @@GLOBAL.skip_name_resolve=0;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost1' WHERE user='b20438524';
FLUSH PRIVILEGES;
DELETE FROM mysql.user WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
CREATE USER b20438524@'%' IDENTIFIED BY 'pwd';
UPDATE mysql.user SET host='localhost' WHERE user='b20438524';
FLUSH PRIVILEGES;
source include/search_pattern.inc;
DELETE FROM mysql.user WHERE user='b20438524';
