    eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t0, t1, t2, t3, t4;
create table t0  key1 int not null,  key2 int not null,  key3 int not null,  key4 int not null,  key5 int not null,  key6 int not null,  key7 int not null,  key8 int not null,  INDEX i1(key1),  INDEX i2(key2),  INDEX i3(key3),  INDEX i4(key4),  INDEX i5(key5),  INDEX i6(key6),  INDEX i7(key7),  INDEX i8(key8));
insert into t0 values (1,1,1,1,1,1,1,1023),(2,2,2,2,2,2,2,1022);
set @d=2;
while ($1)  eval insert into t0 select key1+@d, key2+@d, key3+@d, key4+@d, key5+@d,                             key6+@d, key7+@d, key8-@d from t0;
  eval set @d=@d*2;
  dec $1;
analyze table t0;
explain select * from t0 where key1 < 3 or key1 > 1020;
explainselect * from t0 where key1 < 3 or key2 > 1020;
select * from t0 where key1 < 3 or key2 > 1020;
  explain select * from t0 where key1 < 2 or key2 <3;
  explainselect * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
select * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
  explain select * from t0 ignore index (i2) where key1 < 3 or key2 <4;
  explain select * from t0 where (key1 < 3 or key2 <4) and key3 = 50;
  explain select * from t0 use index (i1,i2) where (key1 < 2 or key2 <3) and key3 = 50;
  explain select * from t0 where (key1 > 1 or key2  > 2);
  explain select * from t0 force index (i1,i2) where (key1 > 1 or key2  > 2);
  explain  select * from t0 where key1<2 or key2<3 or (key1>5 and key1<7) or  (key1>10 and key1<12) or (key2>100 and key2<102);
  explain select * from t0 where key2 = 45 or key1 <=> null;
  explain select * from t0 where key2 = 45 or key1 is not null;
  explain select * from t0 where key2 = 45 or key1 is null;
  explain select * from t0 where key2=10 or key3=3 or key4 <=> null;
  explain select * from t0 where key2=10 or key3=3 or key4 is null;
  explain select key1 from t0 where (key1 <=> null) or (key2 < 2) or                                   (key3=10) or (key4 <=> null);
  explain select key1 from t0 where (key1 <=> null) or (key1 < 5) or                                   (key3=10) or (key4 <=> null);
  explain select * from t0 where  (key1 < 2 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 5 or key6 < 5);
  explainselect * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
select * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
  explain select * from t0 where  (key1 < 3 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 2 or key6 < 2);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 70);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 1000);
  explain select * from t0 where    ((key1 < 3 or key2 < 3) and (key2 <4 or key3 < 3))  or    key2 > 4;
  explain select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
  explain select * from t0 where    ((key1 < 2 or key2 < 2) and (key3 <4 or key5 < 3))  or    ((key5 < 3 or key6 < 3) and (key7 <3 or key8 < 3));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key7 <5 or key8 < 3) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 4))  or    ((key3 <4 or key5 < 2) and (key5 < 5 or key6 < 3));
  explain select * from t0 where    ((key3 <4 or key5 < 3) and (key1 < 3 or key2 < 3))  or    (((key3 <5 and key7 < 5) or key5 < 2) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >5 or key5 < 2) and (key5 < 5 or key6 < 6));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key3 >4 or key5 < 2) and (key5 < 5 or key6 < 4));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >=5 or key5 < 2) and (key5 < 5 or key6 < 6));
select * from t0 where key1 < 3 or key8 < 2 order by key1;
  explainselect * from t0 where key1 < 3 or key8 < 2 order by key1;
create table t2 like t0;
insert into t2 select * from t0;
alter table t2 add index i1_3(key1, key3);
alter table t2 add index i2_3(key2, key3);
alter table t2 drop index i1;
alter table t2 drop index i2;
alter table t2 add index i321(key3, key2, key1);
analyze table t2;
  explain select key3 from t2 where key1 = 100 or key2 = 100;
  explain select key3 from t2 where key1 <100 or key2 < 100;
  explain select key7 from t2 where key1 <100 or key2 < 100;
create table t4 (  key1a int not null,  key1b int not null,  key2  int not null,  key2_1 int not null,  key2_2 int not null,  key3  int not null,  index i1a (key1a, key1b),  index i1b (key1b, key1a),  index i2_1(key2, key2_1),  index i2_2(key2, key2_1));
insert into t4 select key1,key1,key1 div 10, key1 % 10, key1 % 10, key1 from t0;
analyze table t4;
select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key3 = 5);
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key2_2 = 5);
  explain select * from t4 where key2_1 = 1 or key2_2 = 5;
create table t1 like t0;
insert into t1 select * from t0;
analyze table t1;
explain select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
explainselect * from t0,t1 where (t0.key1=t1.key1) and ( t0.key1=3 or t0.key2=4);
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2=4) and t1.key1<200;
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2<4) and t1.key1=2;
explain select * from t0,t1 where t0.key1 = 5 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
  explain select * from t0,t1 where t0.key1 < 3 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
explain select * from t1 where key1=3 or key2=4  union select * from t1 where key1<4 or key3=5;
explain select * from (select * from t1 where key1 = 3 or key2 =3) as z where key8 >5;
create table t3 like t0;
insert into t3 select * from t0;
alter table t3 add key9 int not null, add index i9(key9);
alter table t3 add keyA int not null, add index iA(keyA);
alter table t3 add keyB int not null, add index iB(keyB);
alter table t3 add keyC int not null, add index iC(keyC);
update t3 set key9=key1,keyA=key1,keyB=key1,keyC=key1;
analyze table t3;
explain select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
explain select * from t0 where key1 < 3 or key2 < 4;
select * from t0 where key1 < 3 or key2 < 4;
update t0 set key8=123 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
delete from t0 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
select count(*) from t0;
drop table t4;
create table t4 (a int);
insert into t4 values (1),(4),(3);
analyze table t4;
set @save_join_buffer_size=@@join_buffer_size;
set join_buffer_size= 4096;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
update t0 set key1=1;
analyze table t0;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
alter table t0 add filler1 char(200), add filler2 char(200), add filler3 char(200);
update t0 set key2=1, key3=1, key4=1, key5=1,key6=1,key7=1 where key7 < 500;
analyze table t0;
  # Too unstable for innodb      explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5)   from t0 as a, t0 as b   where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)    and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a, t0 as b where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)  and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
set join_buffer_size= @save_join_buffer_size;
drop table t0, t1, t2, t3, t4;
CREATE TABLE t1 (  cola char(3) not null, colb char(3) not null,  filler char(200),  key(cola), key(colb));
INSERT INTO t1 VALUES ('foo','bar', 'ZZ'),('fuz','baz', 'ZZ');
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola = 'foo';
  dec $1;
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola <> 'foo';
  dec $1;
OPTIMIZE TABLE t1;
select count(*) from t1;
analyze table t1;
  explain select * from t1 WHERE cola = 'foo' AND colb = 'bar';
  explain select * from t1 force index(cola,colb) WHERE cola = 'foo' AND colb = 'bar';
drop table t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b));
insert into t1 select @v:= A.a, @v, 't1', 'filler2' from t0 A, t0 B, t0 C;
create table t2 like t1;
create table t3 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b)) engine=merge union=(t1,t2);
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
explain select * from t1 where a=1 and b=1;
explain select * from t3 where a=1 and b=1;
drop table t3;
drop table t0, t1, t2;
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES(1);
CREATE TABLE t2(a INT, b INT, dummy CHAR(16) DEFAULT '', KEY(a), KEY(b));
INSERT INTO t2(a,b) VALUES(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(1,2);
LOCK TABLES t1 WRITE, t2 WRITE;
INSERT INTO t2(a,b) VALUES(1,2);
SELECT t2.a FROM t1,t2 WHERE t2.b=2 AND t2.a=1;
UNLOCK TABLES;
DROP TABLE t1, t2;
CREATE TABLE `t1` (  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY `a` (`a`),  KEY `b` (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t1 values(0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (10, 'filler', 10), (11, 'filler', 11), (12, 'filler', 12), (13, 'filler', 13),(14, 'filler', 14), (15, 'filler', 15), (16, 'filler', 16), (17, 'filler', 17), (18, 'filler', 18), (19, 'filler', 19), (4, '5      ', 0), (5, '4      ', 0), (4, '4      ', 0), (4, 'qq     ', 5), (5, 'qq     ', 4), (4, 'zz     ', 4);
create table t2(  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY USING BTREE (`a`),  KEY USING BTREE (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t2 select * from t1;
analyze table t1;
analyze table t2;
explain select * from t1 where a=4 or b=4;
select * from t1 where a=4 or b=4;
select * from t1 ignore index(a,b) where a=4 or b=4;
explain select * from t2 where a=4 or b=4;
select * from t2 where a=4 or b=4;
drop table t1, t2;
CREATE TABLE t1 (a varchar(8), b set('a','b','c','d','e','f','g','h'),                 KEY b(b), KEY a(a));
INSERT INTO t1 VALUES ('y',''), ('z','');
SELECT b,a from t1 WHERE (b!='c' AND b!='f' && b!='h') OR   (a='pure-S') OR (a='DE80337a') OR (a='DE80799');
DROP TABLE t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (a int);
insert into t1 values (1),(2);
create table t2(a int, b int);
insert into t2 values (1,1), (2, 1000);
create table t3 (a int, b int, filler char(100), key(a), key(b));
insert into t3 select 1000, 1000,'filler' from t0 A, t0 B, t0 C; insert into t3 values (1,1,'data');
insert into t3 values (1,1,'data');
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
  explain select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
drop table t0, t1, t2, t3;
CREATE TABLE t1(a VARCHAR(128),b VARCHAR(128),KEY(A),KEY(B)) charset latin1;
INSERT INTO t1 VALUES (REPEAT('a',128),REPEAT('b',128));
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
analyze table t1;
SET SESSION sort_buffer_size=1;
  EXPLAIN SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SET SESSION sort_buffer_size=DEFAULT;
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t0,t1,t2;
create table t1  /* Field names reflect value(rowid) distribution, st=STairs, swt= SaWTooth */  st_a int not null default 0,  swt1a int not null default 0,  swt2a int not null default 0,  st_b int not null default 0,  swt1b int not null default 0,  swt2b int not null default 0,  /* fields/keys for row retrieval tests */  key1 int,  key2 int,  key3 int,  key4 int,  /* make rows much bigger then keys */  filler1 char (200),  filler2 char (200),  filler3 char (200),  filler4 char (200),  filler5 char (200),  filler6 char (200),  /* order of keys is important */  key sta_swt12a(st_a,swt1a,swt2a),  key sta_swt1a(st_a,swt1a),  key sta_swt2a(st_a,swt2a),  key sta_swt21a(st_a,swt2a,swt1a),  key st_a(st_a),  key stb_swt1a_2b(st_b,swt1b,swt2a),  key stb_swt1b(st_b,swt1b),  key st_b(st_b),  key(key1),  key(key2),  key(key3),  key(key4)) ;
create table t0 as select * from t1;
while ($cnt)  eval insert into t0 values (1, 2, 3, 1, 2, 3, 0, 0, 0, 0, 'data1', 'data2', 'data3', 'data4', 'data5', 'data6');
  dec $cnt;
alter table t1 disable keys;
while ($1)  let $2=4;
  while ($2)  {    let $3=4;
    while ($3)    {      eval insert into t1 select $1, $2, $3, $1 ,$2, $3, key1, key2, key3, key4, filler1, filler2, filler3, filler4, filler5, filler6 from t0;
      dec $3;
    }    dec $2;
  } dec $1;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 100, 100,'key1-key2-key3-key4');
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (100, -1, 100, -1,'key1-key3');
  dec $cnt;
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (-1, 100, -1, 100,'key2-key4');
  dec $cnt;
alter table t1 enable keys;
select count(*) from t1;
analyze table t0;
analyze table t1;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain format=json select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, -1, -1, 'key1-key2');
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 100, 100, 'key4-key3');
analyze table t1;
explain select key1,key2,filler1 from t1 where key1=100 and key2=100;
select key1,key2,filler1 from t1 where key1=100 and key2=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
insert into t1 (key1,key2,key3,key4,filler1) values (101,101,101,101, 'key1234-101');
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2, filler1 from t1 where key1=100 and key2=100;
update t1 set filler1='to be deleted' where key1=100 and key2=100;
update t1 set key1=200,key2=200 where key1=100 and key2=100;
delete from t1 where key1=200 and key2=200;
analyze table t1;
select key1,key2,filler1 from t1 where key2=100 and key2=200;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
delete from t1 where key3=100 and key4=100;
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-1');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-2');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, -1, 200,'key4');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 200, -1,'key3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
  # Too unstable on InnoDB  explain select * from t1 where st_a=1 and st_b=1;
  explain select st_a,st_b from t1 where st_a=1 and st_b=1;
  explain select st_a from t1 ignore index (st_a) where st_a=1 and st_b=1;
explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1;
explain select * from t1 where st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b, stb_swt1b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
drop table t0,t1;
create table t2 (  a char(10),  b char(10),  filler1 char(255),  filler2 char(255),  key(a(5)),  key(b(5)));
while ($1)  eval insert into t2 values (repeat(char($1+64), 8),repeat(char($1+64), 8),'filler1', 'filler2');
  dec $1;
insert into t2 select * from t2;
insert into t2 select * from t2;
select count(a) from t2 where a='BBBBBBBB';
select count(a) from t2 where b='BBBBBBBB';
analyze table t2;
explain select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 ignore index(a,b) where a='AAAAAAAA' and b='AAAAAAAA';
insert into t2 values ('ab', 'ab', 'uh', 'oh');
analyze table t2;
explain select a from t2 where a='ab';
drop table t2;
CREATE TABLE t1(c1 INT, c2 INT DEFAULT 0, c3 CHAR(255) DEFAULT '',KEY(c1), KEY(c2), KEY(c3)) charset latin1;
INSERT INTO t1(c1) VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0);
INSERT INTO t1 VALUES(0,0,0);
CREATE TABLE t2(c1 int);
INSERT INTO t2 VALUES(1);
DELETE t1 FROM t1,t2 WHERE t1.c1=0 AND t1.c2=0;
SELECT * FROM t1;
DROP TABLE t1,t2;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1,t2;
create table t1  key1 int not null,  key2 int not null,  INDEX i1(key1),  INDEX i2(key2)) charset latin1;
while ($1)  eval insert into t1 values (200-$1, $1);
  dec $1;
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
alter table t1 add str1 char (255) not null,                add zeroval int not null default 0,                add str2 char (255) not null,                add str3 char (255) not null;
update t1 set str1='aaa', str2='bbb', str3=concat(key2, '-', key1 div 2, '_' ,if(key1 mod 2 = 0, 'a', 'A'));
alter table t1 add primary key (str1, zeroval, str2, str3);
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
drop table t1;
create table t1 (  pk    integer not null auto_increment primary key,  key1  integer,  key2  integer not null,  filler char  (200),  index (key1),  index (key2)) charset latin1;
show warnings;
while ($1)  eval insert into t1 (key1, key2, filler) values ($1/4, $1/8, 'filler-data');
  dec $1;
analyze table t1;
explain select pk from t1 where key1 = 1 and key2 = 1;
select pk from t1 where key2 = 1 and key1 = 1;
select pk from t1 ignore index(key1,key2) where key2 = 1 and key1 = 1;
drop table t1;
create table t1 (  pk int primary key auto_increment,  key1a  int,  key2a  int,  key1b  int,  key2b  int,  dummy1 int,  dummy2 int,  dummy3 int,  dummy4 int,  key3a  int,  key3b  int,  filler1 char (200),  index i1(key1a, key1b),  index i2(key2a, key2b),  index i3(key3a, key3b));
create table t2 (a int);
insert into t2 values (0),(1),(2),(3),(4),(NULL);
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select A.a, B.a, C.a, D.a, C.a, D.a from t2 A,t2 B,t2 C, t2 D;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
analyze table t1;
select count(*) from t1;
analyze table t2;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and  key2a = 2 and key2b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key2a = 2 and key2b is null;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
drop table t1,t2;
create table t1 (  id1 int,  id2 date ,  index idx2 (id1,id2),  index idx1 (id2));
insert into t1 values(1,'20040101'), (2,'20040102');
select * from t1  where id1 = 1  and id2= '20040101';
drop table t1;
drop view if exists v1;
CREATE TABLE t1 (  `oid` int(11) unsigned NOT NULL auto_increment,  `fk_bbk_niederlassung` int(11) unsigned NOT NULL,  `fk_wochentag` int(11) unsigned NOT NULL,  `uhrzeit_von` time NOT NULL COMMENT 'HH:MM',  `uhrzeit_bis` time NOT NULL COMMENT 'HH:MM',  `geloescht` tinyint(4) NOT NULL,  `version` int(5) NOT NULL,  PRIMARY KEY  (`oid`),  KEY `fk_bbk_niederlassung` (`fk_bbk_niederlassung`),  KEY `fk_wochentag` (`fk_wochentag`),  KEY `ix_version` (`version`)) DEFAULT CHARSET=latin1;
insert  into t1 values(1, 38, 1, '08:00:00', '13:00:00', 0, 1),(2, 38, 2, '08:00:00', '13:00:00', 0, 1),(3, 38, 3, '08:00:00', '13:00:00', 0, 1),(4, 38, 4, '08:00:00', '13:00:00', 0, 1),(5, 38, 5, '08:00:00', '13:00:00', 0, 1),(6, 38, 5, '08:00:00', '13:00:00', 1, 2),(7, 38, 3, '08:00:00', '13:00:00', 1, 2),(8, 38, 1, '08:00:00', '13:00:00', 1, 2),(9, 38, 2, '08:00:00', '13:00:00', 1, 2),(10, 38, 4, '08:00:00', '13:00:00', 1, 2),(11, 38, 1, '08:00:00', '13:00:00', 0, 3),(12, 38, 2, '08:00:00', '13:00:00', 0, 3),(13, 38, 3, '08:00:00', '13:00:00', 0, 3),(14, 38, 4, '08:00:00', '13:00:00', 0, 3),(15, 38, 5, '08:00:00', '13:00:00', 0, 3),(16, 38, 4, '08:00:00', '13:00:00', 0, 4),(17, 38, 5, '08:00:00', '13:00:00', 0, 4),(18, 38, 1, '08:00:00', '13:00:00', 0, 4),(19, 38, 2, '08:00:00', '13:00:00', 0, 4),(20, 38, 3, '08:00:00', '13:00:00', 0, 4),(21, 7, 1, '08:00:00', '13:00:00', 0, 1),(22, 7, 2, '08:00:00', '13:00:00', 0, 1),(23, 7, 3, '08:00:00', '13:00:00', 0, 1),(24, 7, 4, '08:00:00', '13:00:00', 0, 1),(25, 7, 5, '08:00:00', '13:00:00', 0, 1);
create view v1 asselect  zeit1.oid AS oid,  zeit1.fk_bbk_niederlassung AS fk_bbk_niederlassung,  zeit1.fk_wochentag AS fk_wochentag,  zeit1.uhrzeit_von AS uhrzeit_von,  zeit1.uhrzeit_bis AS uhrzeit_bis,  zeit1.geloescht AS geloescht,  zeit1.version AS versionfrom  t1 zeit1where(zeit1.version =  (select max(zeit2.version) AS `max(version)`   from t1 zeit2   where     ((zeit1.fk_bbk_niederlassung = zeit2.fk_bbk_niederlassung) and      (zeit1.fk_wochentag = zeit2.fk_wochentag) and      (zeit1.uhrzeit_von = zeit2.uhrzeit_von) and      (zeit1.uhrzeit_bis = zeit2.uhrzeit_bis)     )  )and (zeit1.geloescht = 0);
select * from v1 where oid = 21;
drop view v1;
drop table t1;
CREATE TABLE t1(  t_cpac varchar(2) NOT NULL,  t_vers varchar(4) NOT NULL,  t_rele varchar(2) NOT NULL,  t_cust varchar(4) NOT NULL,  filler1 char(250) default NULL,  filler2 char(250) default NULL,  PRIMARY KEY (t_cpac,t_vers,t_rele,t_cust),  UNIQUE KEY IX_4 (t_cust,t_cpac,t_vers,t_rele),  KEY IX_5 (t_vers,t_rele,t_cust)) charset latin1;
insert into t1 values('tm','2.5 ','a ','    ','',''), ('tm','2.5U','a ','stnd','',''),('da','3.3 ','b ','    ','',''), ('da','3.3U','b ','stnd','',''),('tl','7.6 ','a ','    ','',''), ('tt','7.6 ','a ','    ','',''),('bc','B61 ','a ','    ','',''), ('bp','B61 ','a ','    ','',''),('ca','B61 ','a ','    ','',''), ('ci','B61 ','a ','    ','',''),('cp','B61 ','a ','    ','',''), ('dm','B61 ','a ','    ','',''),('ec','B61 ','a ','    ','',''), ('ed','B61 ','a ','    ','',''),('fm','B61 ','a ','    ','',''), ('nt','B61 ','a ','    ','',''),('qm','B61 ','a ','    ','',''), ('tc','B61 ','a ','    ','',''),('td','B61 ','a ','    ','',''), ('tf','B61 ','a ','    ','',''),('tg','B61 ','a ','    ','',''), ('ti','B61 ','a ','    ','',''),('tp','B61 ','a ','    ','',''), ('ts','B61 ','a ','    ','',''),('wh','B61 ','a ','    ','',''), ('bc','B61U','a ','stnd','',''),('bp','B61U','a ','stnd','',''), ('ca','B61U','a ','stnd','',''),('ci','B61U','a ','stnd','',''), ('cp','B61U','a ','stnd','',''),('dm','B61U','a ','stnd','',''), ('ec','B61U','a ','stnd','',''),('fm','B61U','a ','stnd','',''), ('nt','B61U','a ','stnd','',''),('qm','B61U','a ','stnd','',''), ('tc','B61U','a ','stnd','',''),('td','B61U','a ','stnd','',''), ('tf','B61U','a ','stnd','',''),('tg','B61U','a ','stnd','',''), ('ti','B61U','a ','stnd','',''),('tp','B61U','a ','stnd','',''), ('ts','B61U','a ','stnd','',''),('wh','B61U','a ','stnd','','');
show create table t1;
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6';
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6'  and t_rele='a' and t_cust = ' ';
drop table t1;
create table t1 (  pk int(11) not null auto_increment,  a int(11) not null default '0',  b int(11) not null default '0',  c int(11) not null default '0',  filler1 datetime, filler2 varchar(15),  filler3 longtext,  kp1 varchar(4), kp2 varchar(7),  kp3 varchar(2), kp4 varchar(4),  kp5 varchar(7),  filler4 char(1),  primary key (pk),  key idx1(a,b,c),  key idx2(c),  key idx3(kp1,kp2,kp3,kp4,kp5)) default charset=latin1;
set @fill= uncompress(unhex(concat('F91D0000789CDD993D6FDB301086F7FE0A6D4E0105B8E3F1335D5BA028DA0EEDE28E1D320408','52A0713BF4D7571FB62C51A475924839080307B603E77DEE787C8FA41F9E9EEF7F1F8A87A7C3','AFE280C5DF9F8F7FEE9F8B1B2CB114D6902E918455245DB91300FA16E42D5201FA4EE29DA05D','B9FB3718A33718A3FA8C30AEFAFDE1F317D016AA67BA7A60FDE45BF5F8BA7B5BDE8812AA9F1A','069DB03C9804346644F3A3A6A1338DB572756A3C4D1BCC804CABF912C654AE9BB855A2B85962','3A479259CAE6A86C0411D01AE5483581EDCBD9A39C45252D532E533979EB9F82E971D979BDB4','8531105670740AFBFD1E34AAB0029E4AD0A1D46A6D0946A21A16038A5CD965CD2D524673F712','20C304477315CE18405EAF9BD0AFFEAC74FDA14F1FBF5BD34C769D73FBBEDF4750ADD4E5A99C','5C8DC04934AFA275D483D536D174C11B12AF27F8F888B41B6FC9DBA569E1FD7BD72D698130B7','91B23A98803512B3D31881E8DCDA2AC1754E3644C4BB3A8466750B911681274A39E35E8624B7','444A42AC1213F354758E3CF1A4CDD5A688C767CF1B11ABC5867CB15D8A18E0B91E9EC275BB94','58F33C2936F64690D55BC29E4A293D95A798D84217736CEAAA538CE1354269EE2162053FBC66','496D90CB53323CB279D3A6AF651B4B22B9E430743D83BE48E995A09D4FC9871C22D8D189B945','706911BCB8C3C774B9C08D2FC6ED853ADACA37A14A4CB2E027630E5B80ECACD939431B1CDF62','7D71487536EA2C678F59685E91F4B6C144BCCB94C1EBA9FA6F5552DDCA4E4539BE326A2720CB','45ED028EB3616AC93C46E775FEA9FA6DA7CFCEC6DEBA5FCD1F915EED4D983BDDB881528AD9AB','43C1576F29AAB35BDFBC21D422F52B307D350589D45225A887AC46C8EDD72D99EC3ED2E1BCEF','7AF26FC4C74097B6768A5EDAFA660CC64278F7E63F99AC954B')));
prepare x from @fill;
execute x;
deallocate prepare x;
set @fill=NULL;
SELECT COUNT(*) FROM t1 WHERE b = 0 AND a = 0 AND c = 13286427 AND kp1='279' AND kp2='ELM0678' AND kp3='6' AND kp4='10' AND  kp5 = 'R        ';
drop table t1;
create table t1  key1 int not null,   key2 int not null default 0,  key3 int not null default 0);
insert into t1(key1) values (1),(2),(3),(4),(5),(6),(7),(8);
set @d=8;
while ($1)  eval insert into t1 (key1) select key1+@d from t1;
  eval set @d=@d*2;
  dec $1;
alter table t1 add index i2(key2);
alter table t1 add index i3(key3);
update t1 set key2=key1,key3=key1;
analyze table t1;
  explain select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
drop table t1;
CREATE TABLE t1 (  a INT,  b INT,  c INT,  d INT,  PRIMARY KEY (a),  KEY (c),  KEY bd (b,d));
INSERT INTO t1 VALUES(1, 0, 1, 0),(2, 1, 1, 1),(3, 1, 1, 1),(4, 0, 1, 1);
analyze table t1;
EXPLAINSELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
CREATE TABLE t2 ( a INT )SELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1( a INT, b INT, KEY(a), KEY(b) );
INSERT INTO t1 VALUES (1, 2), (1, 2), (1, 2), (1, 2);
SELECT * FROM t1 FORCE INDEX(a, b) WHERE a = 1 AND b = 2;
DROP TABLE t1;
CREATE TABLE t1 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b INT);
INSERT INTO t1 (b) VALUES (1);
UPDATE t1 SET b = 2 WHERE a = 1;
SELECT * FROM t1;
CREATE TABLE t2 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(1) );
INSERT INTO t2 (b) VALUES ('a');
UPDATE t2 SET b = 'b' WHERE a = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 (  pk INT NOT NULL,  col_int_key INT NOT NULL,  col_varchar_key VARCHAR(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES (1,1,'a'), (2,2,'b');
analyze table t1;
EXPLAINSELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
SELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1;
create table t1 (  pk int primary key,  key1 int,  key2 int,  filler char(200),  filler2 char(200),  index(key1),  index(key2));
while ($1)  eval insert into t1 values($1, $1, $1, 'filler-data','filler-data-2');
  dec $1;
select * from t1 where (key1 >= 2 and key1 <= 10) or (pk >= 4 and pk <=8 );
set @maxv=1000;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1=18 or key1=60;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1 < 3 or key1 > @maxv-11;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or  (key1 < 5) or (key1 > 10 and key1 < 15) or (key1 >= 50 and key1 < 55 ) or (key1 > @maxv-10);
select * from t1 where  (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 )  or  (key1 < 5) or (key1 > @maxv-10);
drop table t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t1;
create table t1  pk1 int not null,  pk2 int not null,  key1 int not null,  key2 int not null,  pktail1ok  int not null,  pktail2ok  int not null,  pktail3bad int not null,  pktail4bad int not null,  pktail5bad int not null,  pk2copy int not null,  badkey  int not null,  filler1 char (200),  filler2 char (200),  key (key1),  key (key2),  /* keys with tails from CPK members */  key (pktail1ok, pk1),  key (pktail2ok, pk1, pk2),  key (pktail3bad, pk2, pk1),  key (pktail4bad, pk1, pk2copy),  key (pktail5bad, pk1, pk2, pk2copy),  primary key (pk1, pk2));
set autocommit=0;
while ($1)  eval insert into t1 values ($1 div 10,$1 mod 100,   $1/100,$1/100,   $1/100,$1/100,$1/100,$1/100,$1/100, $1 mod 100, $1/1000,'filler-data-$1','filler2');
  dec $1;
set autocommit=1;
analyze table t1;
explain select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
explain select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
explain select * from t1 where badkey=1 and key1=10;
explain select * from t1 where pk1 < 7500 and key1 = 10;
explain select * from t1 where pktail1ok=1 and key1=10;
explain select * from t1 where pktail2ok=1 and key1=10;
explain select * from t1 where (pktail2ok=1 and pk1< 50000) or key1=10;
explain select * from t1 where pktail3bad=1 and key1=10;
explain select * from t1 where pktail4bad=1 and key1=10;
explain select * from t1 where pktail5bad=1 and key1=10;
explain select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
drop table t1;
create table t1  RUNID varchar(22),  SUBMITNR varchar(5),  ORDERNR char(1),  PROGRAMM varchar(8),  TESTID varchar(4),  UCCHECK char(1),  ETEXT varchar(80),  ETEXT_TYPE char(1),  INFO char(1),  SEVERITY tinyint(3),  TADIRFLAG char(1),  PRIMARY KEY  (RUNID,SUBMITNR,ORDERNR,PROGRAMM,TESTID,UCCHECK),  KEY `TVERM~KEY`  (PROGRAMM,TESTID,UCCHECK)) DEFAULT CHARSET=latin1;
update t1 set `ETEXT` = '', `ETEXT_TYPE`='', `INFO`='', `SEVERITY`='', `TADIRFLAG`=''WHERE `RUNID`= '' AND `SUBMITNR`= '' AND `ORDERNR`='' AND `PROGRAMM`='' AND `TESTID`='' AND `UCCHECK`='';
drop table t1;
CREATE TABLE t1 (f1 INT, PRIMARY KEY (f1));
INSERT INTO t1 VALUES (2);
CREATE TABLE t2 (f1 INT, f2 INT, f3 char(1),                 PRIMARY KEY (f1), KEY (f2), KEY (f3) );
INSERT INTO t2 VALUES (1, 1, 'h'), (2, 3, 'h'), (3, 2, ''), (4, 2, '');
SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
analyze table t1;
analyze table t2;
EXPLAIN SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
DROP TABLE t1,t2;
SET sql_mode = '';
CREATE TABLE t1 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES(1,2,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','2','2'),(109,25,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','1','7');
CREATE TABLE t2 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t2 VALUES(10,2,4,'2000-04-16','2000-04-16','17:02:34','17:02:34','2009-08-04 02:49:10','2009-08-04 02:49:10','u','u'),(11,6,5,'1900-01-01','1900-01-01','12:31:32','12:31:32','2004-05-24 22:22:06','2004-05-24 22:22:06','b','b'),(12,6,0,'2005-05-14','2005-05-14','16:49:31','16:49:31','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(13,94,140,'2001-05-23','2001-05-23','00:00:00','00:00:00','2003-07-28 07:31:49','2003-07-28 07:31:49','f','f'),(14,10,230,'2000-06-04','2000-06-04','20:23:27','20:23:27','2000-02-04 21:03:36','2000-02-04 21:03:36','g','g'),(15,8,2,'1900-01-01','1900-01-01','10:31:09','10:31:09','2005-05-22 11:48:12','2005-05-22 11:48:12','q','q'),(16,43,110,'2008-03-18','2008-03-18','09:58:35','09:58:35','1900-01-01 00:00:00','1900-01-01 00:00:00','n','n'),(17,1,8,'2007-02-25','2007-02-25','05:39:28','05:39:28','2005-05-06 00:53:37','2005-05-06 00:53:37','c','c'),(18,6,5,'2001-11-22','2001-11-22','00:00:00','00:00:00','2002-08-08 23:43:46','2002-08-08 23:43:46','x','x'),(19,5,8,'0000-00-00','0000-00-00','00:00:00','00:00:00','2009-10-26 04:07:22','2009-10-26 04:07:22','n','n'),(20,1,5,'2001-08-07','2001-08-07','14:06:09','14:06:09','2005-03-12 22:55:23','2005-03-12 22:55:23','r','r'),(21,195,70,'2000-08-03','2000-08-03','00:00:00','00:00:00','2008-05-03 22:34:19','2008-05-03 22:34:19','j','j'),(22,1,0,'2007-04-21','2007-04-21','17:43:27','17:43:27','2001-10-12 13:30:14','2001-10-12 13:30:14','l','l'),(23,0,9,'2000-06-13','2000-06-13','12:23:15','12:23:15','2007-10-07 03:53:06','2007-10-07 03:53:06','h','h'),(24,7,3,'0000-00-00','0000-00-00','19:35:06','19:35:06','2005-12-27 20:58:56','2005-12-27 20:58:56','z','z'),(25,1,9,'2004-07-08','2004-07-08','10:16:08','10:16:08','2009-05-16 18:44:21','2009-05-16 18:44:21','z','z'),(26,4,3,'2003-06-01','2003-06-01','00:00:00','00:00:00','2008-10-02 00:00:00','2008-10-02 00:00:00','d','d'),(27,76,22,'0000-00-00','0000-00-00','16:51:15','16:51:15','2001-03-20 00:00:00','2001-03-20 00:00:00','l','l'),(28,6,1,'1900-01-01','1900-01-01','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(29,7,3,'2007-01-22','2007-01-22','00:00:00','00:00:00','2000-01-10 23:19:37','2000-01-10 23:19:37','k','k'),(30,6,3,'2006-10-19','2006-10-19','21:46:20','21:46:20','2008-06-21 16:56:37','2008-06-21 16:56:37','l','l'),(31,6,8,'2005-02-27','2005-02-27','00:00:00','00:00:00','2002-03-01 00:34:37','2002-03-01 00:34:37','t','t'),(32,1,4,'2001-09-10','2001-09-10','03:34:16','03:34:16','2003-02-05 18:41:00','2003-02-05 18:41:00','n','n'),(33,5,1,'2002-09-06','2002-09-06','11:25:31','11:25:31','2004-01-18 13:28:24','2004-01-18 13:28:24','z','z'),(34,2,3,'2005-01-15','2005-01-15','17:00:53','17:00:53','2002-12-03 01:06:27','2002-12-03 01:06:27','f','f'),(35,1,3,'1900-01-01','1900-01-01','23:32:47','23:32:47','2006-03-03 02:58:59','2006-03-03 02:58:59','q','q'),(36,185,63,'2006-12-20','2006-12-20','00:00:00','00:00:00','2002-07-01 10:13:39','2002-07-01 10:13:39','l','l'),(37,3,4,'2002-04-17','2002-04-17','12:15:05','12:15:05','2009-01-13 20:47:01','2009-01-13 20:47:01','a','a'),(38,7,8,'2004-01-10','2004-01-10','22:26:38','22:26:38','2008-07-18 13:35:29','2008-07-18 13:35:29','c','c'),(39,8,6,'2008-03-24','2008-03-24','00:00:00','00:00:00','2001-03-15 02:44:57','2001-03-15 02:44:57','c','c'),(40,1,4,'2007-08-18','2007-08-18','00:00:00','00:00:00','2000-06-25 14:03:55','2000-06-25 14:03:55','i','i'),(41,3,9,'2005-07-22','2005-07-22','00:00:00','00:00:00','2005-12-13 21:32:03','2005-12-13 21:32:03','r','r'),(42,8,2,'2008-07-12','2008-07-12','08:59:37','08:59:37','2009-03-18 19:27:29','2009-03-18 19:27:29','g','g'),(43,159,118,'2003-08-18','2003-08-18','07:19:50','07:19:50','2004-04-10 02:50:59','2004-04-10 02:50:59','l','l'),(44,112,10,'2002-02-26','2002-02-26','03:51:46','03:51:46','2008-09-27 06:49:19','2008-09-27 06:49:19','w','w'),(45,0,9,'2007-07-26','2007-07-26','15:57:32','15:57:32','2006-02-04 15:10:41','2006-02-04 15:10:41','b','b'),(46,2,9,'1900-01-01','1900-01-01','02:57:08','02:57:08','2004-01-04 18:45:14','2004-01-04 18:45:14','i','i'),(47,1,1,'2000-07-26','2000-07-26','00:21:15','00:21:15','2009-04-04 02:52:09','2009-04-04 02:52:09','o','o'),(48,7,6,'2005-03-06','2005-03-06','23:35:02','23:35:02','2001-03-20 12:50:17','2001-03-20 12:50:17','f','f'),(49,5,2,'2005-04-16','2005-04-16','09:21:51','09:21:51','2001-11-15 10:51:46','2001-11-15 10:51:46','a','a'),(50,2,2,'2004-04-09','2004-04-09','19:21:02','19:21:02','2007-08-13 00:00:00','2007-08-13 00:00:00','j','j'),(51,5,3,'2003-05-13','2003-05-13','03:16:22','03:16:22','1900-01-01 00:00:00','1900-01-01 00:00:00','k','k'),(52,5,0,'0000-00-00','0000-00-00','00:00:00','00:00:00','2008-01-24 08:37:15','2008-01-24 08:37:15','x','x'),(53,2,8,'2000-05-27','2000-05-27','18:19:51','18:19:51','2003-03-02 10:18:02','2003-03-02 10:18:02','r','r'),(54,2,5,'2004-07-04','2004-07-04','01:42:17','01:42:17','2003-04-25 07:35:13','2003-04-25 07:35:13','t','t'),(55,9,0,'2006-03-07','2006-03-07','00:00:00','00:00:00','2006-07-11 23:31:13','2006-07-11 23:31:13','p','p'),(56,3,1,'2002-08-17','2002-08-17','20:32:51','20:32:51','2009-08-08 16:55:59','2009-08-08 16:55:59','g','g'),(57,2,9,'2003-06-08','2003-06-08','10:04:19','10:04:19','1900-01-01 00:00:00','1900-01-01 00:00:00','q','q'),(58,7,4,'1900-01-01','1900-01-01','06:39:26','06:39:26','2000-12-22 10:27:41','2000-12-22 10:27:41','m','m'),(59,4,7,'2003-10-09','2003-10-09','15:48:26','15:48:26','2002-07-20 00:00:00','2002-07-20 00:00:00','l','l'),(60,5,6,'2007-08-12','2007-08-12','02:17:23','02:17:23','2007-09-24 00:12:11','2007-09-24 00:12:11','d','d'),(61,3,3,'2008-12-13','2008-12-13','07:48:47','07:48:47','2009-01-05 06:13:21','2009-01-05 06:13:21','n','n'),(62,0,8,'0000-00-00','0000-00-00','09:09:14','09:09:14','2008-11-23 18:13:35','2008-11-23 18:13:35','l','l'),(63,1,2,'2003-07-27','2003-07-27','22:46:23','22:46:23','2002-12-19 00:00:00','2002-12-19 00:00:00','c','c'),(64,5,5,'2003-04-13','2003-04-13','19:42:42','19:42:42','2003-04-03 16:16:35','2003-04-03 16:16:35','v','v'),(65,0,3,'2007-04-25','2007-04-25','15:15:32','15:15:32','2009-04-13 13:44:41','2009-04-13 13:44:41','z','z'),(66,4,4,'2000-03-04','2000-03-04','02:50:26','02:50:26','2007-04-19 20:49:24','2007-04-19 20:49:24','h','h'),(67,0,9,'2001-08-03','2001-08-03','14:44:31','14:44:31','2002-11-15 23:36:04','2002-11-15 23:36:04','y','y'),(68,2,0,'2006-04-13','2006-04-13','00:00:00','00:00:00','2000-05-16 00:00:00','2000-05-16 00:00:00','o','o'),(69,2,1,'2006-04-22','2006-04-22','07:31:27','07:31:27','2002-06-08 06:51:27','2002-06-08 06:51:27','h','h'),(70,8,5,'2004-08-26','2004-08-26','10:48:57','10:48:57','2006-12-07 01:49:26','2006-12-07 01:49:26','h','h'),(71,8,6,'2002-11-26','2002-11-26','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(72,5,2,'2002-01-07','2002-01-07','23:06:00','23:06:00','2000-09-27 16:26:23','2000-09-27 16:26:23','m','m'),(73,1,0,'2005-05-07','2005-05-07','05:56:02','05:56:02','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(74,0,0,'2001-04-21','2001-04-21','10:44:22','10:44:22','2008-02-13 04:28:14','2008-02-13 04:28:14','t','t'),(75,7,9,'2000-09-01','2000-09-01','00:00:00','00:00:00','2000-03-10 06:17:52','2000-03-10 06:17:52','r','r'),(76,6,8,'2004-07-06','2004-07-06','01:44:26','01:44:26','2003-05-23 00:00:00','2003-05-23 00:00:00','u','u'),(77,0,6,'0000-00-00','0000-00-00','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','h','h'),(78,6,0,'2001-02-21','2001-02-21','17:01:49','17:01:49','2003-10-27 12:45:52','2003-10-27 12:45:52','p','p'),(79,9,0,'2004-01-28','2004-01-28','16:27:14','16:27:14','2004-08-06 00:00:00','2004-08-06 00:00:00','z','z'),(80,5,3,'2008-10-07','2008-10-07','00:00:00','00:00:00','2001-10-05 05:13:39','2001-10-05 05:13:39','h','h'),(81,5,5,'0000-00-00','0000-00-00','10:34:22','10:34:22','2001-03-25 04:24:51','2001-03-25 04:24:51','q','q'),(82,6,0,'2008-03-04','2008-03-04','10:48:51','10:48:51','2006-08-20 11:54:04','2006-08-20 11:54:04','l','l'),(83,1,0,'2009-05-08','2009-05-08','16:55:06','16:55:06','2003-05-16 18:14:52','2003-05-16 18:14:52','p','p'),(84,1,1,'2005-03-19','2005-03-19','14:46:32','14:46:32','2009-10-24 13:39:35','2009-10-24 13:39:35','t','t'),(85,9,8,'2007-09-14','2007-09-14','16:26:50','16:26:50','2001-08-10 00:00:00','2001-08-10 00:00:00','o','o'),(86,249,190,'2007-02-10','2007-02-10','06:35:32','06:35:32','2001-09-06 10:15:08','2001-09-06 10:15:08','o','o'),(87,3,0,'2000-06-12','2000-06-12','02:28:38','02:28:38','2006-09-27 00:00:00','2006-09-27 00:00:00','p','p'),(88,6,4,'2002-07-06','2002-07-06','00:00:00','00:00:00','2002-02-27 20:12:29','2002-02-27 20:12:29','e','e'),(89,7,2,'2001-02-25','2001-02-25','04:52:29','04:52:29','1900-01-01 00:00:00','1900-01-01 00:00:00','u','u'),(90,5,8,'2000-04-27','2000-04-27','00:00:00','00:00:00','2005-08-18 00:00:00','2005-08-18 00:00:00','z','z'),(91,4,0,'2005-08-23','2005-08-23','09:11:04','09:11:04','2000-10-15 15:52:54','2000-10-15 15:52:54','j','j'),(92,24,137,'2006-01-07','2006-01-07','22:38:18','22:38:18','2007-11-22 13:52:22','2007-11-22 13:52:22','e','e'),(93,3,7,'2007-07-08','2007-07-08','13:23:13','13:23:13','2005-09-20 09:09:48','2005-09-20 09:09:48','k','k'),(94,179,153,'2000-01-06','2000-01-06','15:33:10','15:33:10','2008-01-11 17:35:34','2008-01-11 17:35:34','d','d'),(95,5,7,'0000-00-00','0000-00-00','09:20:10','09:20:10','2002-11-01 00:00:00','2002-11-01 00:00:00','q','q'),(96,7,9,'2002-02-22','2002-02-22','11:19:10','11:19:10','2009-06-27 00:00:00','2009-06-27 00:00:00','j','j'),(97,7,2,'2001-04-17','2001-04-17','08:08:41','08:08:41','2000-09-25 14:11:58','2000-09-25 14:11:58','j','j'),(98,1,0,'2005-06-26','2005-06-26','10:17:36','10:17:36','2004-01-05 04:49:39','2004-01-05 04:49:39','e','e'),(99,5,6,'2008-09-14','2008-09-14','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','f','f'),(100,7,6,'0000-00-00','0000-00-00','01:05:02','01:05:02','2001-01-17 23:16:24','2001-01-17 23:16:24','a','a'),(101,9,2,'2001-12-20','2001-12-20','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','o','o'),(102,5,9,'2001-11-05','2001-11-05','00:00:00','00:00:00','2008-07-15 00:00:00','2008-07-15 00:00:00','y','y'),(103,4,4,'1900-01-01','1900-01-01','15:32:04','15:32:04','2001-03-06 10:00:37','2001-03-06 10:00:37','d','d'),(104,8,7,'2009-02-13','2009-02-13','20:25:36','20:25:36','2004-08-15 00:00:00','2004-08-15 00:00:00','z','z'),(105,8,6,'2008-03-25','2008-03-25','21:33:53','21:33:53','2006-10-12 06:13:06','2006-10-12 06:13:06','s','s');
analyze table t1;
analyze table t2;
EXPLAIN UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
DROP TABLE t1, t2;
SET sql_mode = default;
CREATE TABLE t1 (  id INT NOT NULL PRIMARY KEY,  id2 INT NOT NULL,  id3 INT NOT NULL,  KEY (id2),  KEY (id3),  KEY covering_index (id2,id3)) ENGINE=InnoDB;
INSERT INTO t1 VALUES (0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 3, 3), (4, 4, 4), (5, 5, 5), (6, 6, 6), (7, 7, 7);
INSERT INTO t1 SELECT id + 8, id2 + 8, id3 +8 FROM t1;
INSERT INTO t1 SELECT id + 16, 7, 0 FROM t1;
analyze table t1;
EXPLAIN SELECT count(*) FROM t1 WHERE id2=7 AND id3=0;
DROP TABLE t1;
CREATE TABLE t1 (  c1 VARCHAR(2),  d1 DATETIME NOT NULL);
CREATE TABLE t2 (  pk INTEGER NOT NULL,  c1 VARCHAR(2),  c2 VARCHAR(2),  PRIMARY KEY (pk),  KEY (c1),  KEY (c2)) PARTITION BY KEY(pk) PARTITIONS 2;
SELECT c1FROM t1WHERE c1 IN  SELECT t2.c1  FROM t2  WHERE t2.c1 = 'f'     OR t2.c2 < 'y'AND t1.d1 IS NULL;
DROP TABLE t1, t2;
    eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t0, t1, t2, t3, t4;
create table t0  key1 int not null,  key2 int not null,  key3 int not null,  key4 int not null,  key5 int not null,  key6 int not null,  key7 int not null,  key8 int not null,  INDEX i1(key1),  INDEX i2(key2),  INDEX i3(key3),  INDEX i4(key4),  INDEX i5(key5),  INDEX i6(key6),  INDEX i7(key7),  INDEX i8(key8));
insert into t0 values (1,1,1,1,1,1,1,1023),(2,2,2,2,2,2,2,1022);
set @d=2;
while ($1)  eval insert into t0 select key1+@d, key2+@d, key3+@d, key4+@d, key5+@d,                             key6+@d, key7+@d, key8-@d from t0;
  eval set @d=@d*2;
  dec $1;
analyze table t0;
explain select * from t0 where key1 < 3 or key1 > 1020;
explainselect * from t0 where key1 < 3 or key2 > 1020;
select * from t0 where key1 < 3 or key2 > 1020;
  explain select * from t0 where key1 < 2 or key2 <3;
  explainselect * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
select * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
  explain select * from t0 ignore index (i2) where key1 < 3 or key2 <4;
  explain select * from t0 where (key1 < 3 or key2 <4) and key3 = 50;
  explain select * from t0 use index (i1,i2) where (key1 < 2 or key2 <3) and key3 = 50;
  explain select * from t0 where (key1 > 1 or key2  > 2);
  explain select * from t0 force index (i1,i2) where (key1 > 1 or key2  > 2);
  explain  select * from t0 where key1<2 or key2<3 or (key1>5 and key1<7) or  (key1>10 and key1<12) or (key2>100 and key2<102);
  explain select * from t0 where key2 = 45 or key1 <=> null;
  explain select * from t0 where key2 = 45 or key1 is not null;
  explain select * from t0 where key2 = 45 or key1 is null;
  explain select * from t0 where key2=10 or key3=3 or key4 <=> null;
  explain select * from t0 where key2=10 or key3=3 or key4 is null;
  explain select key1 from t0 where (key1 <=> null) or (key2 < 2) or                                   (key3=10) or (key4 <=> null);
  explain select key1 from t0 where (key1 <=> null) or (key1 < 5) or                                   (key3=10) or (key4 <=> null);
  explain select * from t0 where  (key1 < 2 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 5 or key6 < 5);
  explainselect * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
select * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
  explain select * from t0 where  (key1 < 3 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 2 or key6 < 2);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 70);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 1000);
  explain select * from t0 where    ((key1 < 3 or key2 < 3) and (key2 <4 or key3 < 3))  or    key2 > 4;
  explain select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
  explain select * from t0 where    ((key1 < 2 or key2 < 2) and (key3 <4 or key5 < 3))  or    ((key5 < 3 or key6 < 3) and (key7 <3 or key8 < 3));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key7 <5 or key8 < 3) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 4))  or    ((key3 <4 or key5 < 2) and (key5 < 5 or key6 < 3));
  explain select * from t0 where    ((key3 <4 or key5 < 3) and (key1 < 3 or key2 < 3))  or    (((key3 <5 and key7 < 5) or key5 < 2) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >5 or key5 < 2) and (key5 < 5 or key6 < 6));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key3 >4 or key5 < 2) and (key5 < 5 or key6 < 4));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >=5 or key5 < 2) and (key5 < 5 or key6 < 6));
select * from t0 where key1 < 3 or key8 < 2 order by key1;
  explainselect * from t0 where key1 < 3 or key8 < 2 order by key1;
create table t2 like t0;
insert into t2 select * from t0;
alter table t2 add index i1_3(key1, key3);
alter table t2 add index i2_3(key2, key3);
alter table t2 drop index i1;
alter table t2 drop index i2;
alter table t2 add index i321(key3, key2, key1);
analyze table t2;
  explain select key3 from t2 where key1 = 100 or key2 = 100;
  explain select key3 from t2 where key1 <100 or key2 < 100;
  explain select key7 from t2 where key1 <100 or key2 < 100;
create table t4 (  key1a int not null,  key1b int not null,  key2  int not null,  key2_1 int not null,  key2_2 int not null,  key3  int not null,  index i1a (key1a, key1b),  index i1b (key1b, key1a),  index i2_1(key2, key2_1),  index i2_2(key2, key2_1));
insert into t4 select key1,key1,key1 div 10, key1 % 10, key1 % 10, key1 from t0;
analyze table t4;
select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key3 = 5);
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key2_2 = 5);
  explain select * from t4 where key2_1 = 1 or key2_2 = 5;
create table t1 like t0;
insert into t1 select * from t0;
analyze table t1;
explain select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
explainselect * from t0,t1 where (t0.key1=t1.key1) and ( t0.key1=3 or t0.key2=4);
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2=4) and t1.key1<200;
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2<4) and t1.key1=2;
explain select * from t0,t1 where t0.key1 = 5 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
  explain select * from t0,t1 where t0.key1 < 3 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
explain select * from t1 where key1=3 or key2=4  union select * from t1 where key1<4 or key3=5;
explain select * from (select * from t1 where key1 = 3 or key2 =3) as z where key8 >5;
create table t3 like t0;
insert into t3 select * from t0;
alter table t3 add key9 int not null, add index i9(key9);
alter table t3 add keyA int not null, add index iA(keyA);
alter table t3 add keyB int not null, add index iB(keyB);
alter table t3 add keyC int not null, add index iC(keyC);
update t3 set key9=key1,keyA=key1,keyB=key1,keyC=key1;
analyze table t3;
explain select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
explain select * from t0 where key1 < 3 or key2 < 4;
select * from t0 where key1 < 3 or key2 < 4;
update t0 set key8=123 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
delete from t0 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
select count(*) from t0;
drop table t4;
create table t4 (a int);
insert into t4 values (1),(4),(3);
analyze table t4;
set @save_join_buffer_size=@@join_buffer_size;
set join_buffer_size= 4096;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
update t0 set key1=1;
analyze table t0;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
alter table t0 add filler1 char(200), add filler2 char(200), add filler3 char(200);
update t0 set key2=1, key3=1, key4=1, key5=1,key6=1,key7=1 where key7 < 500;
analyze table t0;
  # Too unstable for innodb      explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5)   from t0 as a, t0 as b   where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)    and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a, t0 as b where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)  and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
set join_buffer_size= @save_join_buffer_size;
drop table t0, t1, t2, t3, t4;
CREATE TABLE t1 (  cola char(3) not null, colb char(3) not null,  filler char(200),  key(cola), key(colb));
INSERT INTO t1 VALUES ('foo','bar', 'ZZ'),('fuz','baz', 'ZZ');
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola = 'foo';
  dec $1;
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola <> 'foo';
  dec $1;
OPTIMIZE TABLE t1;
select count(*) from t1;
analyze table t1;
  explain select * from t1 WHERE cola = 'foo' AND colb = 'bar';
  explain select * from t1 force index(cola,colb) WHERE cola = 'foo' AND colb = 'bar';
drop table t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b));
insert into t1 select @v:= A.a, @v, 't1', 'filler2' from t0 A, t0 B, t0 C;
create table t2 like t1;
create table t3 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b)) engine=merge union=(t1,t2);
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
explain select * from t1 where a=1 and b=1;
explain select * from t3 where a=1 and b=1;
drop table t3;
drop table t0, t1, t2;
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES(1);
CREATE TABLE t2(a INT, b INT, dummy CHAR(16) DEFAULT '', KEY(a), KEY(b));
INSERT INTO t2(a,b) VALUES(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(1,2);
LOCK TABLES t1 WRITE, t2 WRITE;
INSERT INTO t2(a,b) VALUES(1,2);
SELECT t2.a FROM t1,t2 WHERE t2.b=2 AND t2.a=1;
UNLOCK TABLES;
DROP TABLE t1, t2;
CREATE TABLE `t1` (  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY `a` (`a`),  KEY `b` (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t1 values(0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (10, 'filler', 10), (11, 'filler', 11), (12, 'filler', 12), (13, 'filler', 13),(14, 'filler', 14), (15, 'filler', 15), (16, 'filler', 16), (17, 'filler', 17), (18, 'filler', 18), (19, 'filler', 19), (4, '5      ', 0), (5, '4      ', 0), (4, '4      ', 0), (4, 'qq     ', 5), (5, 'qq     ', 4), (4, 'zz     ', 4);
create table t2(  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY USING BTREE (`a`),  KEY USING BTREE (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t2 select * from t1;
analyze table t1;
analyze table t2;
explain select * from t1 where a=4 or b=4;
select * from t1 where a=4 or b=4;
select * from t1 ignore index(a,b) where a=4 or b=4;
explain select * from t2 where a=4 or b=4;
select * from t2 where a=4 or b=4;
drop table t1, t2;
CREATE TABLE t1 (a varchar(8), b set('a','b','c','d','e','f','g','h'),                 KEY b(b), KEY a(a));
INSERT INTO t1 VALUES ('y',''), ('z','');
SELECT b,a from t1 WHERE (b!='c' AND b!='f' && b!='h') OR   (a='pure-S') OR (a='DE80337a') OR (a='DE80799');
DROP TABLE t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (a int);
insert into t1 values (1),(2);
create table t2(a int, b int);
insert into t2 values (1,1), (2, 1000);
create table t3 (a int, b int, filler char(100), key(a), key(b));
insert into t3 select 1000, 1000,'filler' from t0 A, t0 B, t0 C; insert into t3 values (1,1,'data');
insert into t3 values (1,1,'data');
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
  explain select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
drop table t0, t1, t2, t3;
CREATE TABLE t1(a VARCHAR(128),b VARCHAR(128),KEY(A),KEY(B)) charset latin1;
INSERT INTO t1 VALUES (REPEAT('a',128),REPEAT('b',128));
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
analyze table t1;
SET SESSION sort_buffer_size=1;
  EXPLAIN SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SET SESSION sort_buffer_size=DEFAULT;
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t0,t1,t2;
create table t1  /* Field names reflect value(rowid) distribution, st=STairs, swt= SaWTooth */  st_a int not null default 0,  swt1a int not null default 0,  swt2a int not null default 0,  st_b int not null default 0,  swt1b int not null default 0,  swt2b int not null default 0,  /* fields/keys for row retrieval tests */  key1 int,  key2 int,  key3 int,  key4 int,  /* make rows much bigger then keys */  filler1 char (200),  filler2 char (200),  filler3 char (200),  filler4 char (200),  filler5 char (200),  filler6 char (200),  /* order of keys is important */  key sta_swt12a(st_a,swt1a,swt2a),  key sta_swt1a(st_a,swt1a),  key sta_swt2a(st_a,swt2a),  key sta_swt21a(st_a,swt2a,swt1a),  key st_a(st_a),  key stb_swt1a_2b(st_b,swt1b,swt2a),  key stb_swt1b(st_b,swt1b),  key st_b(st_b),  key(key1),  key(key2),  key(key3),  key(key4)) ;
create table t0 as select * from t1;
while ($cnt)  eval insert into t0 values (1, 2, 3, 1, 2, 3, 0, 0, 0, 0, 'data1', 'data2', 'data3', 'data4', 'data5', 'data6');
  dec $cnt;
alter table t1 disable keys;
while ($1)  let $2=4;
  while ($2)  {    let $3=4;
    while ($3)    {      eval insert into t1 select $1, $2, $3, $1 ,$2, $3, key1, key2, key3, key4, filler1, filler2, filler3, filler4, filler5, filler6 from t0;
      dec $3;
    }    dec $2;
  } dec $1;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 100, 100,'key1-key2-key3-key4');
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (100, -1, 100, -1,'key1-key3');
  dec $cnt;
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (-1, 100, -1, 100,'key2-key4');
  dec $cnt;
alter table t1 enable keys;
select count(*) from t1;
analyze table t0;
analyze table t1;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain format=json select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, -1, -1, 'key1-key2');
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 100, 100, 'key4-key3');
analyze table t1;
explain select key1,key2,filler1 from t1 where key1=100 and key2=100;
select key1,key2,filler1 from t1 where key1=100 and key2=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
insert into t1 (key1,key2,key3,key4,filler1) values (101,101,101,101, 'key1234-101');
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2, filler1 from t1 where key1=100 and key2=100;
update t1 set filler1='to be deleted' where key1=100 and key2=100;
update t1 set key1=200,key2=200 where key1=100 and key2=100;
delete from t1 where key1=200 and key2=200;
analyze table t1;
select key1,key2,filler1 from t1 where key2=100 and key2=200;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
delete from t1 where key3=100 and key4=100;
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-1');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-2');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, -1, 200,'key4');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 200, -1,'key3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
  # Too unstable on InnoDB  explain select * from t1 where st_a=1 and st_b=1;
  explain select st_a,st_b from t1 where st_a=1 and st_b=1;
  explain select st_a from t1 ignore index (st_a) where st_a=1 and st_b=1;
explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1;
explain select * from t1 where st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b, stb_swt1b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
drop table t0,t1;
create table t2 (  a char(10),  b char(10),  filler1 char(255),  filler2 char(255),  key(a(5)),  key(b(5)));
while ($1)  eval insert into t2 values (repeat(char($1+64), 8),repeat(char($1+64), 8),'filler1', 'filler2');
  dec $1;
insert into t2 select * from t2;
insert into t2 select * from t2;
select count(a) from t2 where a='BBBBBBBB';
select count(a) from t2 where b='BBBBBBBB';
analyze table t2;
explain select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 ignore index(a,b) where a='AAAAAAAA' and b='AAAAAAAA';
insert into t2 values ('ab', 'ab', 'uh', 'oh');
analyze table t2;
explain select a from t2 where a='ab';
drop table t2;
CREATE TABLE t1(c1 INT, c2 INT DEFAULT 0, c3 CHAR(255) DEFAULT '',KEY(c1), KEY(c2), KEY(c3)) charset latin1;
INSERT INTO t1(c1) VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0);
INSERT INTO t1 VALUES(0,0,0);
CREATE TABLE t2(c1 int);
INSERT INTO t2 VALUES(1);
DELETE t1 FROM t1,t2 WHERE t1.c1=0 AND t1.c2=0;
SELECT * FROM t1;
DROP TABLE t1,t2;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1,t2;
create table t1  key1 int not null,  key2 int not null,  INDEX i1(key1),  INDEX i2(key2)) charset latin1;
while ($1)  eval insert into t1 values (200-$1, $1);
  dec $1;
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
alter table t1 add str1 char (255) not null,                add zeroval int not null default 0,                add str2 char (255) not null,                add str3 char (255) not null;
update t1 set str1='aaa', str2='bbb', str3=concat(key2, '-', key1 div 2, '_' ,if(key1 mod 2 = 0, 'a', 'A'));
alter table t1 add primary key (str1, zeroval, str2, str3);
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
drop table t1;
create table t1 (  pk    integer not null auto_increment primary key,  key1  integer,  key2  integer not null,  filler char  (200),  index (key1),  index (key2)) charset latin1;
show warnings;
while ($1)  eval insert into t1 (key1, key2, filler) values ($1/4, $1/8, 'filler-data');
  dec $1;
analyze table t1;
explain select pk from t1 where key1 = 1 and key2 = 1;
select pk from t1 where key2 = 1 and key1 = 1;
select pk from t1 ignore index(key1,key2) where key2 = 1 and key1 = 1;
drop table t1;
create table t1 (  pk int primary key auto_increment,  key1a  int,  key2a  int,  key1b  int,  key2b  int,  dummy1 int,  dummy2 int,  dummy3 int,  dummy4 int,  key3a  int,  key3b  int,  filler1 char (200),  index i1(key1a, key1b),  index i2(key2a, key2b),  index i3(key3a, key3b));
create table t2 (a int);
insert into t2 values (0),(1),(2),(3),(4),(NULL);
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select A.a, B.a, C.a, D.a, C.a, D.a from t2 A,t2 B,t2 C, t2 D;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
analyze table t1;
select count(*) from t1;
analyze table t2;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and  key2a = 2 and key2b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key2a = 2 and key2b is null;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
drop table t1,t2;
create table t1 (  id1 int,  id2 date ,  index idx2 (id1,id2),  index idx1 (id2));
insert into t1 values(1,'20040101'), (2,'20040102');
select * from t1  where id1 = 1  and id2= '20040101';
drop table t1;
drop view if exists v1;
CREATE TABLE t1 (  `oid` int(11) unsigned NOT NULL auto_increment,  `fk_bbk_niederlassung` int(11) unsigned NOT NULL,  `fk_wochentag` int(11) unsigned NOT NULL,  `uhrzeit_von` time NOT NULL COMMENT 'HH:MM',  `uhrzeit_bis` time NOT NULL COMMENT 'HH:MM',  `geloescht` tinyint(4) NOT NULL,  `version` int(5) NOT NULL,  PRIMARY KEY  (`oid`),  KEY `fk_bbk_niederlassung` (`fk_bbk_niederlassung`),  KEY `fk_wochentag` (`fk_wochentag`),  KEY `ix_version` (`version`)) DEFAULT CHARSET=latin1;
insert  into t1 values(1, 38, 1, '08:00:00', '13:00:00', 0, 1),(2, 38, 2, '08:00:00', '13:00:00', 0, 1),(3, 38, 3, '08:00:00', '13:00:00', 0, 1),(4, 38, 4, '08:00:00', '13:00:00', 0, 1),(5, 38, 5, '08:00:00', '13:00:00', 0, 1),(6, 38, 5, '08:00:00', '13:00:00', 1, 2),(7, 38, 3, '08:00:00', '13:00:00', 1, 2),(8, 38, 1, '08:00:00', '13:00:00', 1, 2),(9, 38, 2, '08:00:00', '13:00:00', 1, 2),(10, 38, 4, '08:00:00', '13:00:00', 1, 2),(11, 38, 1, '08:00:00', '13:00:00', 0, 3),(12, 38, 2, '08:00:00', '13:00:00', 0, 3),(13, 38, 3, '08:00:00', '13:00:00', 0, 3),(14, 38, 4, '08:00:00', '13:00:00', 0, 3),(15, 38, 5, '08:00:00', '13:00:00', 0, 3),(16, 38, 4, '08:00:00', '13:00:00', 0, 4),(17, 38, 5, '08:00:00', '13:00:00', 0, 4),(18, 38, 1, '08:00:00', '13:00:00', 0, 4),(19, 38, 2, '08:00:00', '13:00:00', 0, 4),(20, 38, 3, '08:00:00', '13:00:00', 0, 4),(21, 7, 1, '08:00:00', '13:00:00', 0, 1),(22, 7, 2, '08:00:00', '13:00:00', 0, 1),(23, 7, 3, '08:00:00', '13:00:00', 0, 1),(24, 7, 4, '08:00:00', '13:00:00', 0, 1),(25, 7, 5, '08:00:00', '13:00:00', 0, 1);
create view v1 asselect  zeit1.oid AS oid,  zeit1.fk_bbk_niederlassung AS fk_bbk_niederlassung,  zeit1.fk_wochentag AS fk_wochentag,  zeit1.uhrzeit_von AS uhrzeit_von,  zeit1.uhrzeit_bis AS uhrzeit_bis,  zeit1.geloescht AS geloescht,  zeit1.version AS versionfrom  t1 zeit1where(zeit1.version =  (select max(zeit2.version) AS `max(version)`   from t1 zeit2   where     ((zeit1.fk_bbk_niederlassung = zeit2.fk_bbk_niederlassung) and      (zeit1.fk_wochentag = zeit2.fk_wochentag) and      (zeit1.uhrzeit_von = zeit2.uhrzeit_von) and      (zeit1.uhrzeit_bis = zeit2.uhrzeit_bis)     )  )and (zeit1.geloescht = 0);
select * from v1 where oid = 21;
drop view v1;
drop table t1;
CREATE TABLE t1(  t_cpac varchar(2) NOT NULL,  t_vers varchar(4) NOT NULL,  t_rele varchar(2) NOT NULL,  t_cust varchar(4) NOT NULL,  filler1 char(250) default NULL,  filler2 char(250) default NULL,  PRIMARY KEY (t_cpac,t_vers,t_rele,t_cust),  UNIQUE KEY IX_4 (t_cust,t_cpac,t_vers,t_rele),  KEY IX_5 (t_vers,t_rele,t_cust)) charset latin1;
insert into t1 values('tm','2.5 ','a ','    ','',''), ('tm','2.5U','a ','stnd','',''),('da','3.3 ','b ','    ','',''), ('da','3.3U','b ','stnd','',''),('tl','7.6 ','a ','    ','',''), ('tt','7.6 ','a ','    ','',''),('bc','B61 ','a ','    ','',''), ('bp','B61 ','a ','    ','',''),('ca','B61 ','a ','    ','',''), ('ci','B61 ','a ','    ','',''),('cp','B61 ','a ','    ','',''), ('dm','B61 ','a ','    ','',''),('ec','B61 ','a ','    ','',''), ('ed','B61 ','a ','    ','',''),('fm','B61 ','a ','    ','',''), ('nt','B61 ','a ','    ','',''),('qm','B61 ','a ','    ','',''), ('tc','B61 ','a ','    ','',''),('td','B61 ','a ','    ','',''), ('tf','B61 ','a ','    ','',''),('tg','B61 ','a ','    ','',''), ('ti','B61 ','a ','    ','',''),('tp','B61 ','a ','    ','',''), ('ts','B61 ','a ','    ','',''),('wh','B61 ','a ','    ','',''), ('bc','B61U','a ','stnd','',''),('bp','B61U','a ','stnd','',''), ('ca','B61U','a ','stnd','',''),('ci','B61U','a ','stnd','',''), ('cp','B61U','a ','stnd','',''),('dm','B61U','a ','stnd','',''), ('ec','B61U','a ','stnd','',''),('fm','B61U','a ','stnd','',''), ('nt','B61U','a ','stnd','',''),('qm','B61U','a ','stnd','',''), ('tc','B61U','a ','stnd','',''),('td','B61U','a ','stnd','',''), ('tf','B61U','a ','stnd','',''),('tg','B61U','a ','stnd','',''), ('ti','B61U','a ','stnd','',''),('tp','B61U','a ','stnd','',''), ('ts','B61U','a ','stnd','',''),('wh','B61U','a ','stnd','','');
show create table t1;
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6';
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6'  and t_rele='a' and t_cust = ' ';
drop table t1;
create table t1 (  pk int(11) not null auto_increment,  a int(11) not null default '0',  b int(11) not null default '0',  c int(11) not null default '0',  filler1 datetime, filler2 varchar(15),  filler3 longtext,  kp1 varchar(4), kp2 varchar(7),  kp3 varchar(2), kp4 varchar(4),  kp5 varchar(7),  filler4 char(1),  primary key (pk),  key idx1(a,b,c),  key idx2(c),  key idx3(kp1,kp2,kp3,kp4,kp5)) default charset=latin1;
set @fill= uncompress(unhex(concat('F91D0000789CDD993D6FDB301086F7FE0A6D4E0105B8E3F1335D5BA028DA0EEDE28E1D320408','52A0713BF4D7571FB62C51A475924839080307B603E77DEE787C8FA41F9E9EEF7F1F8A87A7C3','AFE280C5DF9F8F7FEE9F8B1B2CB114D6902E918455245DB91300FA16E42D5201FA4EE29DA05D','B9FB3718A33718A3FA8C30AEFAFDE1F317D016AA67BA7A60FDE45BF5F8BA7B5BDE8812AA9F1A','069DB03C9804346644F3A3A6A1338DB572756A3C4D1BCC804CABF912C654AE9BB855A2B85962','3A479259CAE6A86C0411D01AE5483581EDCBD9A39C45252D532E533979EB9F82E971D979BDB4','8531105670740AFBFD1E34AAB0029E4AD0A1D46A6D0946A21A16038A5CD965CD2D524673F712','20C304477315CE18405EAF9BD0AFFEAC74FDA14F1FBF5BD34C769D73FBBEDF4750ADD4E5A99C','5C8DC04934AFA275D483D536D174C11B12AF27F8F888B41B6FC9DBA569E1FD7BD72D698130B7','91B23A98803512B3D31881E8DCDA2AC1754E3644C4BB3A8466750B911681274A39E35E8624B7','444A42AC1213F354758E3CF1A4CDD5A688C767CF1B11ABC5867CB15D8A18E0B91E9EC275BB94','58F33C2936F64690D55BC29E4A293D95A798D84217736CEAAA538CE1354269EE2162053FBC66','496D90CB53323CB279D3A6AF651B4B22B9E430743D83BE48E995A09D4FC9871C22D8D189B945','706911BCB8C3C774B9C08D2FC6ED853ADACA37A14A4CB2E027630E5B80ECACD939431B1CDF62','7D71487536EA2C678F59685E91F4B6C144BCCB94C1EBA9FA6F5552DDCA4E4539BE326A2720CB','45ED028EB3616AC93C46E775FEA9FA6DA7CFCEC6DEBA5FCD1F915EED4D983BDDB881528AD9AB','43C1576F29AAB35BDFBC21D422F52B307D350589D45225A887AC46C8EDD72D99EC3ED2E1BCEF','7AF26FC4C74097B6768A5EDAFA660CC64278F7E63F99AC954B')));
prepare x from @fill;
execute x;
deallocate prepare x;
set @fill=NULL;
SELECT COUNT(*) FROM t1 WHERE b = 0 AND a = 0 AND c = 13286427 AND kp1='279' AND kp2='ELM0678' AND kp3='6' AND kp4='10' AND  kp5 = 'R        ';
drop table t1;
create table t1  key1 int not null,   key2 int not null default 0,  key3 int not null default 0);
insert into t1(key1) values (1),(2),(3),(4),(5),(6),(7),(8);
set @d=8;
while ($1)  eval insert into t1 (key1) select key1+@d from t1;
  eval set @d=@d*2;
  dec $1;
alter table t1 add index i2(key2);
alter table t1 add index i3(key3);
update t1 set key2=key1,key3=key1;
analyze table t1;
  explain select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
drop table t1;
CREATE TABLE t1 (  a INT,  b INT,  c INT,  d INT,  PRIMARY KEY (a),  KEY (c),  KEY bd (b,d));
INSERT INTO t1 VALUES(1, 0, 1, 0),(2, 1, 1, 1),(3, 1, 1, 1),(4, 0, 1, 1);
analyze table t1;
EXPLAINSELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
CREATE TABLE t2 ( a INT )SELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1( a INT, b INT, KEY(a), KEY(b) );
INSERT INTO t1 VALUES (1, 2), (1, 2), (1, 2), (1, 2);
SELECT * FROM t1 FORCE INDEX(a, b) WHERE a = 1 AND b = 2;
DROP TABLE t1;
CREATE TABLE t1 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b INT);
INSERT INTO t1 (b) VALUES (1);
UPDATE t1 SET b = 2 WHERE a = 1;
SELECT * FROM t1;
CREATE TABLE t2 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(1) );
INSERT INTO t2 (b) VALUES ('a');
UPDATE t2 SET b = 'b' WHERE a = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 (  pk INT NOT NULL,  col_int_key INT NOT NULL,  col_varchar_key VARCHAR(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES (1,1,'a'), (2,2,'b');
analyze table t1;
EXPLAINSELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
SELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1;
create table t1 (  pk int primary key,  key1 int,  key2 int,  filler char(200),  filler2 char(200),  index(key1),  index(key2));
while ($1)  eval insert into t1 values($1, $1, $1, 'filler-data','filler-data-2');
  dec $1;
select * from t1 where (key1 >= 2 and key1 <= 10) or (pk >= 4 and pk <=8 );
set @maxv=1000;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1=18 or key1=60;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1 < 3 or key1 > @maxv-11;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or  (key1 < 5) or (key1 > 10 and key1 < 15) or (key1 >= 50 and key1 < 55 ) or (key1 > @maxv-10);
select * from t1 where  (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 )  or  (key1 < 5) or (key1 > @maxv-10);
drop table t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t1;
create table t1  pk1 int not null,  pk2 int not null,  key1 int not null,  key2 int not null,  pktail1ok  int not null,  pktail2ok  int not null,  pktail3bad int not null,  pktail4bad int not null,  pktail5bad int not null,  pk2copy int not null,  badkey  int not null,  filler1 char (200),  filler2 char (200),  key (key1),  key (key2),  /* keys with tails from CPK members */  key (pktail1ok, pk1),  key (pktail2ok, pk1, pk2),  key (pktail3bad, pk2, pk1),  key (pktail4bad, pk1, pk2copy),  key (pktail5bad, pk1, pk2, pk2copy),  primary key (pk1, pk2));
set autocommit=0;
while ($1)  eval insert into t1 values ($1 div 10,$1 mod 100,   $1/100,$1/100,   $1/100,$1/100,$1/100,$1/100,$1/100, $1 mod 100, $1/1000,'filler-data-$1','filler2');
  dec $1;
set autocommit=1;
analyze table t1;
explain select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
explain select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
explain select * from t1 where badkey=1 and key1=10;
explain select * from t1 where pk1 < 7500 and key1 = 10;
explain select * from t1 where pktail1ok=1 and key1=10;
explain select * from t1 where pktail2ok=1 and key1=10;
explain select * from t1 where (pktail2ok=1 and pk1< 50000) or key1=10;
explain select * from t1 where pktail3bad=1 and key1=10;
explain select * from t1 where pktail4bad=1 and key1=10;
explain select * from t1 where pktail5bad=1 and key1=10;
explain select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
drop table t1;
create table t1  RUNID varchar(22),  SUBMITNR varchar(5),  ORDERNR char(1),  PROGRAMM varchar(8),  TESTID varchar(4),  UCCHECK char(1),  ETEXT varchar(80),  ETEXT_TYPE char(1),  INFO char(1),  SEVERITY tinyint(3),  TADIRFLAG char(1),  PRIMARY KEY  (RUNID,SUBMITNR,ORDERNR,PROGRAMM,TESTID,UCCHECK),  KEY `TVERM~KEY`  (PROGRAMM,TESTID,UCCHECK)) DEFAULT CHARSET=latin1;
update t1 set `ETEXT` = '', `ETEXT_TYPE`='', `INFO`='', `SEVERITY`='', `TADIRFLAG`=''WHERE `RUNID`= '' AND `SUBMITNR`= '' AND `ORDERNR`='' AND `PROGRAMM`='' AND `TESTID`='' AND `UCCHECK`='';
drop table t1;
CREATE TABLE t1 (f1 INT, PRIMARY KEY (f1));
INSERT INTO t1 VALUES (2);
CREATE TABLE t2 (f1 INT, f2 INT, f3 char(1),                 PRIMARY KEY (f1), KEY (f2), KEY (f3) );
INSERT INTO t2 VALUES (1, 1, 'h'), (2, 3, 'h'), (3, 2, ''), (4, 2, '');
SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
analyze table t1;
analyze table t2;
EXPLAIN SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
DROP TABLE t1,t2;
SET sql_mode = '';
CREATE TABLE t1 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES(1,2,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','2','2'),(109,25,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','1','7');
CREATE TABLE t2 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t2 VALUES(10,2,4,'2000-04-16','2000-04-16','17:02:34','17:02:34','2009-08-04 02:49:10','2009-08-04 02:49:10','u','u'),(11,6,5,'1900-01-01','1900-01-01','12:31:32','12:31:32','2004-05-24 22:22:06','2004-05-24 22:22:06','b','b'),(12,6,0,'2005-05-14','2005-05-14','16:49:31','16:49:31','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(13,94,140,'2001-05-23','2001-05-23','00:00:00','00:00:00','2003-07-28 07:31:49','2003-07-28 07:31:49','f','f'),(14,10,230,'2000-06-04','2000-06-04','20:23:27','20:23:27','2000-02-04 21:03:36','2000-02-04 21:03:36','g','g'),(15,8,2,'1900-01-01','1900-01-01','10:31:09','10:31:09','2005-05-22 11:48:12','2005-05-22 11:48:12','q','q'),(16,43,110,'2008-03-18','2008-03-18','09:58:35','09:58:35','1900-01-01 00:00:00','1900-01-01 00:00:00','n','n'),(17,1,8,'2007-02-25','2007-02-25','05:39:28','05:39:28','2005-05-06 00:53:37','2005-05-06 00:53:37','c','c'),(18,6,5,'2001-11-22','2001-11-22','00:00:00','00:00:00','2002-08-08 23:43:46','2002-08-08 23:43:46','x','x'),(19,5,8,'0000-00-00','0000-00-00','00:00:00','00:00:00','2009-10-26 04:07:22','2009-10-26 04:07:22','n','n'),(20,1,5,'2001-08-07','2001-08-07','14:06:09','14:06:09','2005-03-12 22:55:23','2005-03-12 22:55:23','r','r'),(21,195,70,'2000-08-03','2000-08-03','00:00:00','00:00:00','2008-05-03 22:34:19','2008-05-03 22:34:19','j','j'),(22,1,0,'2007-04-21','2007-04-21','17:43:27','17:43:27','2001-10-12 13:30:14','2001-10-12 13:30:14','l','l'),(23,0,9,'2000-06-13','2000-06-13','12:23:15','12:23:15','2007-10-07 03:53:06','2007-10-07 03:53:06','h','h'),(24,7,3,'0000-00-00','0000-00-00','19:35:06','19:35:06','2005-12-27 20:58:56','2005-12-27 20:58:56','z','z'),(25,1,9,'2004-07-08','2004-07-08','10:16:08','10:16:08','2009-05-16 18:44:21','2009-05-16 18:44:21','z','z'),(26,4,3,'2003-06-01','2003-06-01','00:00:00','00:00:00','2008-10-02 00:00:00','2008-10-02 00:00:00','d','d'),(27,76,22,'0000-00-00','0000-00-00','16:51:15','16:51:15','2001-03-20 00:00:00','2001-03-20 00:00:00','l','l'),(28,6,1,'1900-01-01','1900-01-01','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(29,7,3,'2007-01-22','2007-01-22','00:00:00','00:00:00','2000-01-10 23:19:37','2000-01-10 23:19:37','k','k'),(30,6,3,'2006-10-19','2006-10-19','21:46:20','21:46:20','2008-06-21 16:56:37','2008-06-21 16:56:37','l','l'),(31,6,8,'2005-02-27','2005-02-27','00:00:00','00:00:00','2002-03-01 00:34:37','2002-03-01 00:34:37','t','t'),(32,1,4,'2001-09-10','2001-09-10','03:34:16','03:34:16','2003-02-05 18:41:00','2003-02-05 18:41:00','n','n'),(33,5,1,'2002-09-06','2002-09-06','11:25:31','11:25:31','2004-01-18 13:28:24','2004-01-18 13:28:24','z','z'),(34,2,3,'2005-01-15','2005-01-15','17:00:53','17:00:53','2002-12-03 01:06:27','2002-12-03 01:06:27','f','f'),(35,1,3,'1900-01-01','1900-01-01','23:32:47','23:32:47','2006-03-03 02:58:59','2006-03-03 02:58:59','q','q'),(36,185,63,'2006-12-20','2006-12-20','00:00:00','00:00:00','2002-07-01 10:13:39','2002-07-01 10:13:39','l','l'),(37,3,4,'2002-04-17','2002-04-17','12:15:05','12:15:05','2009-01-13 20:47:01','2009-01-13 20:47:01','a','a'),(38,7,8,'2004-01-10','2004-01-10','22:26:38','22:26:38','2008-07-18 13:35:29','2008-07-18 13:35:29','c','c'),(39,8,6,'2008-03-24','2008-03-24','00:00:00','00:00:00','2001-03-15 02:44:57','2001-03-15 02:44:57','c','c'),(40,1,4,'2007-08-18','2007-08-18','00:00:00','00:00:00','2000-06-25 14:03:55','2000-06-25 14:03:55','i','i'),(41,3,9,'2005-07-22','2005-07-22','00:00:00','00:00:00','2005-12-13 21:32:03','2005-12-13 21:32:03','r','r'),(42,8,2,'2008-07-12','2008-07-12','08:59:37','08:59:37','2009-03-18 19:27:29','2009-03-18 19:27:29','g','g'),(43,159,118,'2003-08-18','2003-08-18','07:19:50','07:19:50','2004-04-10 02:50:59','2004-04-10 02:50:59','l','l'),(44,112,10,'2002-02-26','2002-02-26','03:51:46','03:51:46','2008-09-27 06:49:19','2008-09-27 06:49:19','w','w'),(45,0,9,'2007-07-26','2007-07-26','15:57:32','15:57:32','2006-02-04 15:10:41','2006-02-04 15:10:41','b','b'),(46,2,9,'1900-01-01','1900-01-01','02:57:08','02:57:08','2004-01-04 18:45:14','2004-01-04 18:45:14','i','i'),(47,1,1,'2000-07-26','2000-07-26','00:21:15','00:21:15','2009-04-04 02:52:09','2009-04-04 02:52:09','o','o'),(48,7,6,'2005-03-06','2005-03-06','23:35:02','23:35:02','2001-03-20 12:50:17','2001-03-20 12:50:17','f','f'),(49,5,2,'2005-04-16','2005-04-16','09:21:51','09:21:51','2001-11-15 10:51:46','2001-11-15 10:51:46','a','a'),(50,2,2,'2004-04-09','2004-04-09','19:21:02','19:21:02','2007-08-13 00:00:00','2007-08-13 00:00:00','j','j'),(51,5,3,'2003-05-13','2003-05-13','03:16:22','03:16:22','1900-01-01 00:00:00','1900-01-01 00:00:00','k','k'),(52,5,0,'0000-00-00','0000-00-00','00:00:00','00:00:00','2008-01-24 08:37:15','2008-01-24 08:37:15','x','x'),(53,2,8,'2000-05-27','2000-05-27','18:19:51','18:19:51','2003-03-02 10:18:02','2003-03-02 10:18:02','r','r'),(54,2,5,'2004-07-04','2004-07-04','01:42:17','01:42:17','2003-04-25 07:35:13','2003-04-25 07:35:13','t','t'),(55,9,0,'2006-03-07','2006-03-07','00:00:00','00:00:00','2006-07-11 23:31:13','2006-07-11 23:31:13','p','p'),(56,3,1,'2002-08-17','2002-08-17','20:32:51','20:32:51','2009-08-08 16:55:59','2009-08-08 16:55:59','g','g'),(57,2,9,'2003-06-08','2003-06-08','10:04:19','10:04:19','1900-01-01 00:00:00','1900-01-01 00:00:00','q','q'),(58,7,4,'1900-01-01','1900-01-01','06:39:26','06:39:26','2000-12-22 10:27:41','2000-12-22 10:27:41','m','m'),(59,4,7,'2003-10-09','2003-10-09','15:48:26','15:48:26','2002-07-20 00:00:00','2002-07-20 00:00:00','l','l'),(60,5,6,'2007-08-12','2007-08-12','02:17:23','02:17:23','2007-09-24 00:12:11','2007-09-24 00:12:11','d','d'),(61,3,3,'2008-12-13','2008-12-13','07:48:47','07:48:47','2009-01-05 06:13:21','2009-01-05 06:13:21','n','n'),(62,0,8,'0000-00-00','0000-00-00','09:09:14','09:09:14','2008-11-23 18:13:35','2008-11-23 18:13:35','l','l'),(63,1,2,'2003-07-27','2003-07-27','22:46:23','22:46:23','2002-12-19 00:00:00','2002-12-19 00:00:00','c','c'),(64,5,5,'2003-04-13','2003-04-13','19:42:42','19:42:42','2003-04-03 16:16:35','2003-04-03 16:16:35','v','v'),(65,0,3,'2007-04-25','2007-04-25','15:15:32','15:15:32','2009-04-13 13:44:41','2009-04-13 13:44:41','z','z'),(66,4,4,'2000-03-04','2000-03-04','02:50:26','02:50:26','2007-04-19 20:49:24','2007-04-19 20:49:24','h','h'),(67,0,9,'2001-08-03','2001-08-03','14:44:31','14:44:31','2002-11-15 23:36:04','2002-11-15 23:36:04','y','y'),(68,2,0,'2006-04-13','2006-04-13','00:00:00','00:00:00','2000-05-16 00:00:00','2000-05-16 00:00:00','o','o'),(69,2,1,'2006-04-22','2006-04-22','07:31:27','07:31:27','2002-06-08 06:51:27','2002-06-08 06:51:27','h','h'),(70,8,5,'2004-08-26','2004-08-26','10:48:57','10:48:57','2006-12-07 01:49:26','2006-12-07 01:49:26','h','h'),(71,8,6,'2002-11-26','2002-11-26','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(72,5,2,'2002-01-07','2002-01-07','23:06:00','23:06:00','2000-09-27 16:26:23','2000-09-27 16:26:23','m','m'),(73,1,0,'2005-05-07','2005-05-07','05:56:02','05:56:02','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(74,0,0,'2001-04-21','2001-04-21','10:44:22','10:44:22','2008-02-13 04:28:14','2008-02-13 04:28:14','t','t'),(75,7,9,'2000-09-01','2000-09-01','00:00:00','00:00:00','2000-03-10 06:17:52','2000-03-10 06:17:52','r','r'),(76,6,8,'2004-07-06','2004-07-06','01:44:26','01:44:26','2003-05-23 00:00:00','2003-05-23 00:00:00','u','u'),(77,0,6,'0000-00-00','0000-00-00','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','h','h'),(78,6,0,'2001-02-21','2001-02-21','17:01:49','17:01:49','2003-10-27 12:45:52','2003-10-27 12:45:52','p','p'),(79,9,0,'2004-01-28','2004-01-28','16:27:14','16:27:14','2004-08-06 00:00:00','2004-08-06 00:00:00','z','z'),(80,5,3,'2008-10-07','2008-10-07','00:00:00','00:00:00','2001-10-05 05:13:39','2001-10-05 05:13:39','h','h'),(81,5,5,'0000-00-00','0000-00-00','10:34:22','10:34:22','2001-03-25 04:24:51','2001-03-25 04:24:51','q','q'),(82,6,0,'2008-03-04','2008-03-04','10:48:51','10:48:51','2006-08-20 11:54:04','2006-08-20 11:54:04','l','l'),(83,1,0,'2009-05-08','2009-05-08','16:55:06','16:55:06','2003-05-16 18:14:52','2003-05-16 18:14:52','p','p'),(84,1,1,'2005-03-19','2005-03-19','14:46:32','14:46:32','2009-10-24 13:39:35','2009-10-24 13:39:35','t','t'),(85,9,8,'2007-09-14','2007-09-14','16:26:50','16:26:50','2001-08-10 00:00:00','2001-08-10 00:00:00','o','o'),(86,249,190,'2007-02-10','2007-02-10','06:35:32','06:35:32','2001-09-06 10:15:08','2001-09-06 10:15:08','o','o'),(87,3,0,'2000-06-12','2000-06-12','02:28:38','02:28:38','2006-09-27 00:00:00','2006-09-27 00:00:00','p','p'),(88,6,4,'2002-07-06','2002-07-06','00:00:00','00:00:00','2002-02-27 20:12:29','2002-02-27 20:12:29','e','e'),(89,7,2,'2001-02-25','2001-02-25','04:52:29','04:52:29','1900-01-01 00:00:00','1900-01-01 00:00:00','u','u'),(90,5,8,'2000-04-27','2000-04-27','00:00:00','00:00:00','2005-08-18 00:00:00','2005-08-18 00:00:00','z','z'),(91,4,0,'2005-08-23','2005-08-23','09:11:04','09:11:04','2000-10-15 15:52:54','2000-10-15 15:52:54','j','j'),(92,24,137,'2006-01-07','2006-01-07','22:38:18','22:38:18','2007-11-22 13:52:22','2007-11-22 13:52:22','e','e'),(93,3,7,'2007-07-08','2007-07-08','13:23:13','13:23:13','2005-09-20 09:09:48','2005-09-20 09:09:48','k','k'),(94,179,153,'2000-01-06','2000-01-06','15:33:10','15:33:10','2008-01-11 17:35:34','2008-01-11 17:35:34','d','d'),(95,5,7,'0000-00-00','0000-00-00','09:20:10','09:20:10','2002-11-01 00:00:00','2002-11-01 00:00:00','q','q'),(96,7,9,'2002-02-22','2002-02-22','11:19:10','11:19:10','2009-06-27 00:00:00','2009-06-27 00:00:00','j','j'),(97,7,2,'2001-04-17','2001-04-17','08:08:41','08:08:41','2000-09-25 14:11:58','2000-09-25 14:11:58','j','j'),(98,1,0,'2005-06-26','2005-06-26','10:17:36','10:17:36','2004-01-05 04:49:39','2004-01-05 04:49:39','e','e'),(99,5,6,'2008-09-14','2008-09-14','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','f','f'),(100,7,6,'0000-00-00','0000-00-00','01:05:02','01:05:02','2001-01-17 23:16:24','2001-01-17 23:16:24','a','a'),(101,9,2,'2001-12-20','2001-12-20','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','o','o'),(102,5,9,'2001-11-05','2001-11-05','00:00:00','00:00:00','2008-07-15 00:00:00','2008-07-15 00:00:00','y','y'),(103,4,4,'1900-01-01','1900-01-01','15:32:04','15:32:04','2001-03-06 10:00:37','2001-03-06 10:00:37','d','d'),(104,8,7,'2009-02-13','2009-02-13','20:25:36','20:25:36','2004-08-15 00:00:00','2004-08-15 00:00:00','z','z'),(105,8,6,'2008-03-25','2008-03-25','21:33:53','21:33:53','2006-10-12 06:13:06','2006-10-12 06:13:06','s','s');
analyze table t1;
analyze table t2;
EXPLAIN UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
DROP TABLE t1, t2;
SET sql_mode = default;
CREATE TABLE t1 (  id INT NOT NULL PRIMARY KEY,  id2 INT NOT NULL,  id3 INT NOT NULL,  KEY (id2),  KEY (id3),  KEY covering_index (id2,id3)) ENGINE=InnoDB;
INSERT INTO t1 VALUES (0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 3, 3), (4, 4, 4), (5, 5, 5), (6, 6, 6), (7, 7, 7);
INSERT INTO t1 SELECT id + 8, id2 + 8, id3 +8 FROM t1;
INSERT INTO t1 SELECT id + 16, 7, 0 FROM t1;
analyze table t1;
EXPLAIN SELECT count(*) FROM t1 WHERE id2=7 AND id3=0;
DROP TABLE t1;
CREATE TABLE t1 (  c1 VARCHAR(2),  d1 DATETIME NOT NULL);
CREATE TABLE t2 (  pk INTEGER NOT NULL,  c1 VARCHAR(2),  c2 VARCHAR(2),  PRIMARY KEY (pk),  KEY (c1),  KEY (c2)) PARTITION BY KEY(pk) PARTITIONS 2;
SELECT c1FROM t1WHERE c1 IN  SELECT t2.c1  FROM t2  WHERE t2.c1 = 'f'     OR t2.c2 < 'y'AND t1.d1 IS NULL;
DROP TABLE t1, t2;
    eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t0, t1, t2, t3, t4;
create table t0  key1 int not null,  key2 int not null,  key3 int not null,  key4 int not null,  key5 int not null,  key6 int not null,  key7 int not null,  key8 int not null,  INDEX i1(key1),  INDEX i2(key2),  INDEX i3(key3),  INDEX i4(key4),  INDEX i5(key5),  INDEX i6(key6),  INDEX i7(key7),  INDEX i8(key8));
insert into t0 values (1,1,1,1,1,1,1,1023),(2,2,2,2,2,2,2,1022);
set @d=2;
while ($1)  eval insert into t0 select key1+@d, key2+@d, key3+@d, key4+@d, key5+@d,                             key6+@d, key7+@d, key8-@d from t0;
  eval set @d=@d*2;
  dec $1;
analyze table t0;
explain select * from t0 where key1 < 3 or key1 > 1020;
explainselect * from t0 where key1 < 3 or key2 > 1020;
select * from t0 where key1 < 3 or key2 > 1020;
  explain select * from t0 where key1 < 2 or key2 <3;
  explainselect * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
select * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
  explain select * from t0 ignore index (i2) where key1 < 3 or key2 <4;
  explain select * from t0 where (key1 < 3 or key2 <4) and key3 = 50;
  explain select * from t0 use index (i1,i2) where (key1 < 2 or key2 <3) and key3 = 50;
  explain select * from t0 where (key1 > 1 or key2  > 2);
  explain select * from t0 force index (i1,i2) where (key1 > 1 or key2  > 2);
  explain  select * from t0 where key1<2 or key2<3 or (key1>5 and key1<7) or  (key1>10 and key1<12) or (key2>100 and key2<102);
  explain select * from t0 where key2 = 45 or key1 <=> null;
  explain select * from t0 where key2 = 45 or key1 is not null;
  explain select * from t0 where key2 = 45 or key1 is null;
  explain select * from t0 where key2=10 or key3=3 or key4 <=> null;
  explain select * from t0 where key2=10 or key3=3 or key4 is null;
  explain select key1 from t0 where (key1 <=> null) or (key2 < 2) or                                   (key3=10) or (key4 <=> null);
  explain select key1 from t0 where (key1 <=> null) or (key1 < 5) or                                   (key3=10) or (key4 <=> null);
  explain select * from t0 where  (key1 < 2 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 5 or key6 < 5);
  explainselect * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
select * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
  explain select * from t0 where  (key1 < 3 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 2 or key6 < 2);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 70);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 1000);
  explain select * from t0 where    ((key1 < 3 or key2 < 3) and (key2 <4 or key3 < 3))  or    key2 > 4;
  explain select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
  explain select * from t0 where    ((key1 < 2 or key2 < 2) and (key3 <4 or key5 < 3))  or    ((key5 < 3 or key6 < 3) and (key7 <3 or key8 < 3));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key7 <5 or key8 < 3) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 4))  or    ((key3 <4 or key5 < 2) and (key5 < 5 or key6 < 3));
  explain select * from t0 where    ((key3 <4 or key5 < 3) and (key1 < 3 or key2 < 3))  or    (((key3 <5 and key7 < 5) or key5 < 2) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >5 or key5 < 2) and (key5 < 5 or key6 < 6));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key3 >4 or key5 < 2) and (key5 < 5 or key6 < 4));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >=5 or key5 < 2) and (key5 < 5 or key6 < 6));
select * from t0 where key1 < 3 or key8 < 2 order by key1;
  explainselect * from t0 where key1 < 3 or key8 < 2 order by key1;
create table t2 like t0;
insert into t2 select * from t0;
alter table t2 add index i1_3(key1, key3);
alter table t2 add index i2_3(key2, key3);
alter table t2 drop index i1;
alter table t2 drop index i2;
alter table t2 add index i321(key3, key2, key1);
analyze table t2;
  explain select key3 from t2 where key1 = 100 or key2 = 100;
  explain select key3 from t2 where key1 <100 or key2 < 100;
  explain select key7 from t2 where key1 <100 or key2 < 100;
create table t4 (  key1a int not null,  key1b int not null,  key2  int not null,  key2_1 int not null,  key2_2 int not null,  key3  int not null,  index i1a (key1a, key1b),  index i1b (key1b, key1a),  index i2_1(key2, key2_1),  index i2_2(key2, key2_1));
insert into t4 select key1,key1,key1 div 10, key1 % 10, key1 % 10, key1 from t0;
analyze table t4;
select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key3 = 5);
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key2_2 = 5);
  explain select * from t4 where key2_1 = 1 or key2_2 = 5;
create table t1 like t0;
insert into t1 select * from t0;
analyze table t1;
explain select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
explainselect * from t0,t1 where (t0.key1=t1.key1) and ( t0.key1=3 or t0.key2=4);
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2=4) and t1.key1<200;
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2<4) and t1.key1=2;
explain select * from t0,t1 where t0.key1 = 5 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
  explain select * from t0,t1 where t0.key1 < 3 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
explain select * from t1 where key1=3 or key2=4  union select * from t1 where key1<4 or key3=5;
explain select * from (select * from t1 where key1 = 3 or key2 =3) as z where key8 >5;
create table t3 like t0;
insert into t3 select * from t0;
alter table t3 add key9 int not null, add index i9(key9);
alter table t3 add keyA int not null, add index iA(keyA);
alter table t3 add keyB int not null, add index iB(keyB);
alter table t3 add keyC int not null, add index iC(keyC);
update t3 set key9=key1,keyA=key1,keyB=key1,keyC=key1;
analyze table t3;
explain select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
explain select * from t0 where key1 < 3 or key2 < 4;
select * from t0 where key1 < 3 or key2 < 4;
update t0 set key8=123 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
delete from t0 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
select count(*) from t0;
drop table t4;
create table t4 (a int);
insert into t4 values (1),(4),(3);
analyze table t4;
set @save_join_buffer_size=@@join_buffer_size;
set join_buffer_size= 4096;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
update t0 set key1=1;
analyze table t0;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
alter table t0 add filler1 char(200), add filler2 char(200), add filler3 char(200);
update t0 set key2=1, key3=1, key4=1, key5=1,key6=1,key7=1 where key7 < 500;
analyze table t0;
  # Too unstable for innodb      explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5)   from t0 as a, t0 as b   where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)    and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a, t0 as b where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)  and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
set join_buffer_size= @save_join_buffer_size;
drop table t0, t1, t2, t3, t4;
CREATE TABLE t1 (  cola char(3) not null, colb char(3) not null,  filler char(200),  key(cola), key(colb));
INSERT INTO t1 VALUES ('foo','bar', 'ZZ'),('fuz','baz', 'ZZ');
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola = 'foo';
  dec $1;
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola <> 'foo';
  dec $1;
OPTIMIZE TABLE t1;
select count(*) from t1;
analyze table t1;
  explain select * from t1 WHERE cola = 'foo' AND colb = 'bar';
  explain select * from t1 force index(cola,colb) WHERE cola = 'foo' AND colb = 'bar';
drop table t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b));
insert into t1 select @v:= A.a, @v, 't1', 'filler2' from t0 A, t0 B, t0 C;
create table t2 like t1;
create table t3 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b)) engine=merge union=(t1,t2);
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
explain select * from t1 where a=1 and b=1;
explain select * from t3 where a=1 and b=1;
drop table t3;
drop table t0, t1, t2;
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES(1);
CREATE TABLE t2(a INT, b INT, dummy CHAR(16) DEFAULT '', KEY(a), KEY(b));
INSERT INTO t2(a,b) VALUES(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(1,2);
LOCK TABLES t1 WRITE, t2 WRITE;
INSERT INTO t2(a,b) VALUES(1,2);
SELECT t2.a FROM t1,t2 WHERE t2.b=2 AND t2.a=1;
UNLOCK TABLES;
DROP TABLE t1, t2;
CREATE TABLE `t1` (  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY `a` (`a`),  KEY `b` (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t1 values(0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (10, 'filler', 10), (11, 'filler', 11), (12, 'filler', 12), (13, 'filler', 13),(14, 'filler', 14), (15, 'filler', 15), (16, 'filler', 16), (17, 'filler', 17), (18, 'filler', 18), (19, 'filler', 19), (4, '5      ', 0), (5, '4      ', 0), (4, '4      ', 0), (4, 'qq     ', 5), (5, 'qq     ', 4), (4, 'zz     ', 4);
create table t2(  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY USING BTREE (`a`),  KEY USING BTREE (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t2 select * from t1;
analyze table t1;
analyze table t2;
explain select * from t1 where a=4 or b=4;
select * from t1 where a=4 or b=4;
select * from t1 ignore index(a,b) where a=4 or b=4;
explain select * from t2 where a=4 or b=4;
select * from t2 where a=4 or b=4;
drop table t1, t2;
CREATE TABLE t1 (a varchar(8), b set('a','b','c','d','e','f','g','h'),                 KEY b(b), KEY a(a));
INSERT INTO t1 VALUES ('y',''), ('z','');
SELECT b,a from t1 WHERE (b!='c' AND b!='f' && b!='h') OR   (a='pure-S') OR (a='DE80337a') OR (a='DE80799');
DROP TABLE t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (a int);
insert into t1 values (1),(2);
create table t2(a int, b int);
insert into t2 values (1,1), (2, 1000);
create table t3 (a int, b int, filler char(100), key(a), key(b));
insert into t3 select 1000, 1000,'filler' from t0 A, t0 B, t0 C; insert into t3 values (1,1,'data');
insert into t3 values (1,1,'data');
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
  explain select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
drop table t0, t1, t2, t3;
CREATE TABLE t1(a VARCHAR(128),b VARCHAR(128),KEY(A),KEY(B)) charset latin1;
INSERT INTO t1 VALUES (REPEAT('a',128),REPEAT('b',128));
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
analyze table t1;
SET SESSION sort_buffer_size=1;
  EXPLAIN SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SET SESSION sort_buffer_size=DEFAULT;
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t0,t1,t2;
create table t1  /* Field names reflect value(rowid) distribution, st=STairs, swt= SaWTooth */  st_a int not null default 0,  swt1a int not null default 0,  swt2a int not null default 0,  st_b int not null default 0,  swt1b int not null default 0,  swt2b int not null default 0,  /* fields/keys for row retrieval tests */  key1 int,  key2 int,  key3 int,  key4 int,  /* make rows much bigger then keys */  filler1 char (200),  filler2 char (200),  filler3 char (200),  filler4 char (200),  filler5 char (200),  filler6 char (200),  /* order of keys is important */  key sta_swt12a(st_a,swt1a,swt2a),  key sta_swt1a(st_a,swt1a),  key sta_swt2a(st_a,swt2a),  key sta_swt21a(st_a,swt2a,swt1a),  key st_a(st_a),  key stb_swt1a_2b(st_b,swt1b,swt2a),  key stb_swt1b(st_b,swt1b),  key st_b(st_b),  key(key1),  key(key2),  key(key3),  key(key4)) ;
create table t0 as select * from t1;
while ($cnt)  eval insert into t0 values (1, 2, 3, 1, 2, 3, 0, 0, 0, 0, 'data1', 'data2', 'data3', 'data4', 'data5', 'data6');
  dec $cnt;
alter table t1 disable keys;
while ($1)  let $2=4;
  while ($2)  {    let $3=4;
    while ($3)    {      eval insert into t1 select $1, $2, $3, $1 ,$2, $3, key1, key2, key3, key4, filler1, filler2, filler3, filler4, filler5, filler6 from t0;
      dec $3;
    }    dec $2;
  } dec $1;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 100, 100,'key1-key2-key3-key4');
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (100, -1, 100, -1,'key1-key3');
  dec $cnt;
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (-1, 100, -1, 100,'key2-key4');
  dec $cnt;
alter table t1 enable keys;
select count(*) from t1;
analyze table t0;
analyze table t1;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain format=json select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, -1, -1, 'key1-key2');
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 100, 100, 'key4-key3');
analyze table t1;
explain select key1,key2,filler1 from t1 where key1=100 and key2=100;
select key1,key2,filler1 from t1 where key1=100 and key2=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
insert into t1 (key1,key2,key3,key4,filler1) values (101,101,101,101, 'key1234-101');
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2, filler1 from t1 where key1=100 and key2=100;
update t1 set filler1='to be deleted' where key1=100 and key2=100;
update t1 set key1=200,key2=200 where key1=100 and key2=100;
delete from t1 where key1=200 and key2=200;
analyze table t1;
select key1,key2,filler1 from t1 where key2=100 and key2=200;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
delete from t1 where key3=100 and key4=100;
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-1');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-2');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, -1, 200,'key4');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 200, -1,'key3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
  # Too unstable on InnoDB  explain select * from t1 where st_a=1 and st_b=1;
  explain select st_a,st_b from t1 where st_a=1 and st_b=1;
  explain select st_a from t1 ignore index (st_a) where st_a=1 and st_b=1;
explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1;
explain select * from t1 where st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b, stb_swt1b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
drop table t0,t1;
create table t2 (  a char(10),  b char(10),  filler1 char(255),  filler2 char(255),  key(a(5)),  key(b(5)));
while ($1)  eval insert into t2 values (repeat(char($1+64), 8),repeat(char($1+64), 8),'filler1', 'filler2');
  dec $1;
insert into t2 select * from t2;
insert into t2 select * from t2;
select count(a) from t2 where a='BBBBBBBB';
select count(a) from t2 where b='BBBBBBBB';
analyze table t2;
explain select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 ignore index(a,b) where a='AAAAAAAA' and b='AAAAAAAA';
insert into t2 values ('ab', 'ab', 'uh', 'oh');
analyze table t2;
explain select a from t2 where a='ab';
drop table t2;
CREATE TABLE t1(c1 INT, c2 INT DEFAULT 0, c3 CHAR(255) DEFAULT '',KEY(c1), KEY(c2), KEY(c3)) charset latin1;
INSERT INTO t1(c1) VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0);
INSERT INTO t1 VALUES(0,0,0);
CREATE TABLE t2(c1 int);
INSERT INTO t2 VALUES(1);
DELETE t1 FROM t1,t2 WHERE t1.c1=0 AND t1.c2=0;
SELECT * FROM t1;
DROP TABLE t1,t2;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1,t2;
create table t1  key1 int not null,  key2 int not null,  INDEX i1(key1),  INDEX i2(key2)) charset latin1;
while ($1)  eval insert into t1 values (200-$1, $1);
  dec $1;
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
alter table t1 add str1 char (255) not null,                add zeroval int not null default 0,                add str2 char (255) not null,                add str3 char (255) not null;
update t1 set str1='aaa', str2='bbb', str3=concat(key2, '-', key1 div 2, '_' ,if(key1 mod 2 = 0, 'a', 'A'));
alter table t1 add primary key (str1, zeroval, str2, str3);
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
drop table t1;
create table t1 (  pk    integer not null auto_increment primary key,  key1  integer,  key2  integer not null,  filler char  (200),  index (key1),  index (key2)) charset latin1;
show warnings;
while ($1)  eval insert into t1 (key1, key2, filler) values ($1/4, $1/8, 'filler-data');
  dec $1;
analyze table t1;
explain select pk from t1 where key1 = 1 and key2 = 1;
select pk from t1 where key2 = 1 and key1 = 1;
select pk from t1 ignore index(key1,key2) where key2 = 1 and key1 = 1;
drop table t1;
create table t1 (  pk int primary key auto_increment,  key1a  int,  key2a  int,  key1b  int,  key2b  int,  dummy1 int,  dummy2 int,  dummy3 int,  dummy4 int,  key3a  int,  key3b  int,  filler1 char (200),  index i1(key1a, key1b),  index i2(key2a, key2b),  index i3(key3a, key3b));
create table t2 (a int);
insert into t2 values (0),(1),(2),(3),(4),(NULL);
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select A.a, B.a, C.a, D.a, C.a, D.a from t2 A,t2 B,t2 C, t2 D;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
analyze table t1;
select count(*) from t1;
analyze table t2;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and  key2a = 2 and key2b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key2a = 2 and key2b is null;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
drop table t1,t2;
create table t1 (  id1 int,  id2 date ,  index idx2 (id1,id2),  index idx1 (id2));
insert into t1 values(1,'20040101'), (2,'20040102');
select * from t1  where id1 = 1  and id2= '20040101';
drop table t1;
drop view if exists v1;
CREATE TABLE t1 (  `oid` int(11) unsigned NOT NULL auto_increment,  `fk_bbk_niederlassung` int(11) unsigned NOT NULL,  `fk_wochentag` int(11) unsigned NOT NULL,  `uhrzeit_von` time NOT NULL COMMENT 'HH:MM',  `uhrzeit_bis` time NOT NULL COMMENT 'HH:MM',  `geloescht` tinyint(4) NOT NULL,  `version` int(5) NOT NULL,  PRIMARY KEY  (`oid`),  KEY `fk_bbk_niederlassung` (`fk_bbk_niederlassung`),  KEY `fk_wochentag` (`fk_wochentag`),  KEY `ix_version` (`version`)) DEFAULT CHARSET=latin1;
insert  into t1 values(1, 38, 1, '08:00:00', '13:00:00', 0, 1),(2, 38, 2, '08:00:00', '13:00:00', 0, 1),(3, 38, 3, '08:00:00', '13:00:00', 0, 1),(4, 38, 4, '08:00:00', '13:00:00', 0, 1),(5, 38, 5, '08:00:00', '13:00:00', 0, 1),(6, 38, 5, '08:00:00', '13:00:00', 1, 2),(7, 38, 3, '08:00:00', '13:00:00', 1, 2),(8, 38, 1, '08:00:00', '13:00:00', 1, 2),(9, 38, 2, '08:00:00', '13:00:00', 1, 2),(10, 38, 4, '08:00:00', '13:00:00', 1, 2),(11, 38, 1, '08:00:00', '13:00:00', 0, 3),(12, 38, 2, '08:00:00', '13:00:00', 0, 3),(13, 38, 3, '08:00:00', '13:00:00', 0, 3),(14, 38, 4, '08:00:00', '13:00:00', 0, 3),(15, 38, 5, '08:00:00', '13:00:00', 0, 3),(16, 38, 4, '08:00:00', '13:00:00', 0, 4),(17, 38, 5, '08:00:00', '13:00:00', 0, 4),(18, 38, 1, '08:00:00', '13:00:00', 0, 4),(19, 38, 2, '08:00:00', '13:00:00', 0, 4),(20, 38, 3, '08:00:00', '13:00:00', 0, 4),(21, 7, 1, '08:00:00', '13:00:00', 0, 1),(22, 7, 2, '08:00:00', '13:00:00', 0, 1),(23, 7, 3, '08:00:00', '13:00:00', 0, 1),(24, 7, 4, '08:00:00', '13:00:00', 0, 1),(25, 7, 5, '08:00:00', '13:00:00', 0, 1);
create view v1 asselect  zeit1.oid AS oid,  zeit1.fk_bbk_niederlassung AS fk_bbk_niederlassung,  zeit1.fk_wochentag AS fk_wochentag,  zeit1.uhrzeit_von AS uhrzeit_von,  zeit1.uhrzeit_bis AS uhrzeit_bis,  zeit1.geloescht AS geloescht,  zeit1.version AS versionfrom  t1 zeit1where(zeit1.version =  (select max(zeit2.version) AS `max(version)`   from t1 zeit2   where     ((zeit1.fk_bbk_niederlassung = zeit2.fk_bbk_niederlassung) and      (zeit1.fk_wochentag = zeit2.fk_wochentag) and      (zeit1.uhrzeit_von = zeit2.uhrzeit_von) and      (zeit1.uhrzeit_bis = zeit2.uhrzeit_bis)     )  )and (zeit1.geloescht = 0);
select * from v1 where oid = 21;
drop view v1;
drop table t1;
CREATE TABLE t1(  t_cpac varchar(2) NOT NULL,  t_vers varchar(4) NOT NULL,  t_rele varchar(2) NOT NULL,  t_cust varchar(4) NOT NULL,  filler1 char(250) default NULL,  filler2 char(250) default NULL,  PRIMARY KEY (t_cpac,t_vers,t_rele,t_cust),  UNIQUE KEY IX_4 (t_cust,t_cpac,t_vers,t_rele),  KEY IX_5 (t_vers,t_rele,t_cust)) charset latin1;
insert into t1 values('tm','2.5 ','a ','    ','',''), ('tm','2.5U','a ','stnd','',''),('da','3.3 ','b ','    ','',''), ('da','3.3U','b ','stnd','',''),('tl','7.6 ','a ','    ','',''), ('tt','7.6 ','a ','    ','',''),('bc','B61 ','a ','    ','',''), ('bp','B61 ','a ','    ','',''),('ca','B61 ','a ','    ','',''), ('ci','B61 ','a ','    ','',''),('cp','B61 ','a ','    ','',''), ('dm','B61 ','a ','    ','',''),('ec','B61 ','a ','    ','',''), ('ed','B61 ','a ','    ','',''),('fm','B61 ','a ','    ','',''), ('nt','B61 ','a ','    ','',''),('qm','B61 ','a ','    ','',''), ('tc','B61 ','a ','    ','',''),('td','B61 ','a ','    ','',''), ('tf','B61 ','a ','    ','',''),('tg','B61 ','a ','    ','',''), ('ti','B61 ','a ','    ','',''),('tp','B61 ','a ','    ','',''), ('ts','B61 ','a ','    ','',''),('wh','B61 ','a ','    ','',''), ('bc','B61U','a ','stnd','',''),('bp','B61U','a ','stnd','',''), ('ca','B61U','a ','stnd','',''),('ci','B61U','a ','stnd','',''), ('cp','B61U','a ','stnd','',''),('dm','B61U','a ','stnd','',''), ('ec','B61U','a ','stnd','',''),('fm','B61U','a ','stnd','',''), ('nt','B61U','a ','stnd','',''),('qm','B61U','a ','stnd','',''), ('tc','B61U','a ','stnd','',''),('td','B61U','a ','stnd','',''), ('tf','B61U','a ','stnd','',''),('tg','B61U','a ','stnd','',''), ('ti','B61U','a ','stnd','',''),('tp','B61U','a ','stnd','',''), ('ts','B61U','a ','stnd','',''),('wh','B61U','a ','stnd','','');
show create table t1;
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6';
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6'  and t_rele='a' and t_cust = ' ';
drop table t1;
create table t1 (  pk int(11) not null auto_increment,  a int(11) not null default '0',  b int(11) not null default '0',  c int(11) not null default '0',  filler1 datetime, filler2 varchar(15),  filler3 longtext,  kp1 varchar(4), kp2 varchar(7),  kp3 varchar(2), kp4 varchar(4),  kp5 varchar(7),  filler4 char(1),  primary key (pk),  key idx1(a,b,c),  key idx2(c),  key idx3(kp1,kp2,kp3,kp4,kp5)) default charset=latin1;
set @fill= uncompress(unhex(concat('F91D0000789CDD993D6FDB301086F7FE0A6D4E0105B8E3F1335D5BA028DA0EEDE28E1D320408','52A0713BF4D7571FB62C51A475924839080307B603E77DEE787C8FA41F9E9EEF7F1F8A87A7C3','AFE280C5DF9F8F7FEE9F8B1B2CB114D6902E918455245DB91300FA16E42D5201FA4EE29DA05D','B9FB3718A33718A3FA8C30AEFAFDE1F317D016AA67BA7A60FDE45BF5F8BA7B5BDE8812AA9F1A','069DB03C9804346644F3A3A6A1338DB572756A3C4D1BCC804CABF912C654AE9BB855A2B85962','3A479259CAE6A86C0411D01AE5483581EDCBD9A39C45252D532E533979EB9F82E971D979BDB4','8531105670740AFBFD1E34AAB0029E4AD0A1D46A6D0946A21A16038A5CD965CD2D524673F712','20C304477315CE18405EAF9BD0AFFEAC74FDA14F1FBF5BD34C769D73FBBEDF4750ADD4E5A99C','5C8DC04934AFA275D483D536D174C11B12AF27F8F888B41B6FC9DBA569E1FD7BD72D698130B7','91B23A98803512B3D31881E8DCDA2AC1754E3644C4BB3A8466750B911681274A39E35E8624B7','444A42AC1213F354758E3CF1A4CDD5A688C767CF1B11ABC5867CB15D8A18E0B91E9EC275BB94','58F33C2936F64690D55BC29E4A293D95A798D84217736CEAAA538CE1354269EE2162053FBC66','496D90CB53323CB279D3A6AF651B4B22B9E430743D83BE48E995A09D4FC9871C22D8D189B945','706911BCB8C3C774B9C08D2FC6ED853ADACA37A14A4CB2E027630E5B80ECACD939431B1CDF62','7D71487536EA2C678F59685E91F4B6C144BCCB94C1EBA9FA6F5552DDCA4E4539BE326A2720CB','45ED028EB3616AC93C46E775FEA9FA6DA7CFCEC6DEBA5FCD1F915EED4D983BDDB881528AD9AB','43C1576F29AAB35BDFBC21D422F52B307D350589D45225A887AC46C8EDD72D99EC3ED2E1BCEF','7AF26FC4C74097B6768A5EDAFA660CC64278F7E63F99AC954B')));
prepare x from @fill;
execute x;
deallocate prepare x;
set @fill=NULL;
SELECT COUNT(*) FROM t1 WHERE b = 0 AND a = 0 AND c = 13286427 AND kp1='279' AND kp2='ELM0678' AND kp3='6' AND kp4='10' AND  kp5 = 'R        ';
drop table t1;
create table t1  key1 int not null,   key2 int not null default 0,  key3 int not null default 0);
insert into t1(key1) values (1),(2),(3),(4),(5),(6),(7),(8);
set @d=8;
while ($1)  eval insert into t1 (key1) select key1+@d from t1;
  eval set @d=@d*2;
  dec $1;
alter table t1 add index i2(key2);
alter table t1 add index i3(key3);
update t1 set key2=key1,key3=key1;
analyze table t1;
  explain select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
drop table t1;
CREATE TABLE t1 (  a INT,  b INT,  c INT,  d INT,  PRIMARY KEY (a),  KEY (c),  KEY bd (b,d));
INSERT INTO t1 VALUES(1, 0, 1, 0),(2, 1, 1, 1),(3, 1, 1, 1),(4, 0, 1, 1);
analyze table t1;
EXPLAINSELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
CREATE TABLE t2 ( a INT )SELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1( a INT, b INT, KEY(a), KEY(b) );
INSERT INTO t1 VALUES (1, 2), (1, 2), (1, 2), (1, 2);
SELECT * FROM t1 FORCE INDEX(a, b) WHERE a = 1 AND b = 2;
DROP TABLE t1;
CREATE TABLE t1 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b INT);
INSERT INTO t1 (b) VALUES (1);
UPDATE t1 SET b = 2 WHERE a = 1;
SELECT * FROM t1;
CREATE TABLE t2 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(1) );
INSERT INTO t2 (b) VALUES ('a');
UPDATE t2 SET b = 'b' WHERE a = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 (  pk INT NOT NULL,  col_int_key INT NOT NULL,  col_varchar_key VARCHAR(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES (1,1,'a'), (2,2,'b');
analyze table t1;
EXPLAINSELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
SELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1;
create table t1 (  pk int primary key,  key1 int,  key2 int,  filler char(200),  filler2 char(200),  index(key1),  index(key2));
while ($1)  eval insert into t1 values($1, $1, $1, 'filler-data','filler-data-2');
  dec $1;
select * from t1 where (key1 >= 2 and key1 <= 10) or (pk >= 4 and pk <=8 );
set @maxv=1000;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1=18 or key1=60;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1 < 3 or key1 > @maxv-11;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or  (key1 < 5) or (key1 > 10 and key1 < 15) or (key1 >= 50 and key1 < 55 ) or (key1 > @maxv-10);
select * from t1 where  (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 )  or  (key1 < 5) or (key1 > @maxv-10);
drop table t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t1;
create table t1  pk1 int not null,  pk2 int not null,  key1 int not null,  key2 int not null,  pktail1ok  int not null,  pktail2ok  int not null,  pktail3bad int not null,  pktail4bad int not null,  pktail5bad int not null,  pk2copy int not null,  badkey  int not null,  filler1 char (200),  filler2 char (200),  key (key1),  key (key2),  /* keys with tails from CPK members */  key (pktail1ok, pk1),  key (pktail2ok, pk1, pk2),  key (pktail3bad, pk2, pk1),  key (pktail4bad, pk1, pk2copy),  key (pktail5bad, pk1, pk2, pk2copy),  primary key (pk1, pk2));
set autocommit=0;
while ($1)  eval insert into t1 values ($1 div 10,$1 mod 100,   $1/100,$1/100,   $1/100,$1/100,$1/100,$1/100,$1/100, $1 mod 100, $1/1000,'filler-data-$1','filler2');
  dec $1;
set autocommit=1;
analyze table t1;
explain select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
explain select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
explain select * from t1 where badkey=1 and key1=10;
explain select * from t1 where pk1 < 7500 and key1 = 10;
explain select * from t1 where pktail1ok=1 and key1=10;
explain select * from t1 where pktail2ok=1 and key1=10;
explain select * from t1 where (pktail2ok=1 and pk1< 50000) or key1=10;
explain select * from t1 where pktail3bad=1 and key1=10;
explain select * from t1 where pktail4bad=1 and key1=10;
explain select * from t1 where pktail5bad=1 and key1=10;
explain select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
drop table t1;
create table t1  RUNID varchar(22),  SUBMITNR varchar(5),  ORDERNR char(1),  PROGRAMM varchar(8),  TESTID varchar(4),  UCCHECK char(1),  ETEXT varchar(80),  ETEXT_TYPE char(1),  INFO char(1),  SEVERITY tinyint(3),  TADIRFLAG char(1),  PRIMARY KEY  (RUNID,SUBMITNR,ORDERNR,PROGRAMM,TESTID,UCCHECK),  KEY `TVERM~KEY`  (PROGRAMM,TESTID,UCCHECK)) DEFAULT CHARSET=latin1;
update t1 set `ETEXT` = '', `ETEXT_TYPE`='', `INFO`='', `SEVERITY`='', `TADIRFLAG`=''WHERE `RUNID`= '' AND `SUBMITNR`= '' AND `ORDERNR`='' AND `PROGRAMM`='' AND `TESTID`='' AND `UCCHECK`='';
drop table t1;
CREATE TABLE t1 (f1 INT, PRIMARY KEY (f1));
INSERT INTO t1 VALUES (2);
CREATE TABLE t2 (f1 INT, f2 INT, f3 char(1),                 PRIMARY KEY (f1), KEY (f2), KEY (f3) );
INSERT INTO t2 VALUES (1, 1, 'h'), (2, 3, 'h'), (3, 2, ''), (4, 2, '');
SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
analyze table t1;
analyze table t2;
EXPLAIN SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
DROP TABLE t1,t2;
SET sql_mode = '';
CREATE TABLE t1 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES(1,2,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','2','2'),(109,25,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','1','7');
CREATE TABLE t2 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t2 VALUES(10,2,4,'2000-04-16','2000-04-16','17:02:34','17:02:34','2009-08-04 02:49:10','2009-08-04 02:49:10','u','u'),(11,6,5,'1900-01-01','1900-01-01','12:31:32','12:31:32','2004-05-24 22:22:06','2004-05-24 22:22:06','b','b'),(12,6,0,'2005-05-14','2005-05-14','16:49:31','16:49:31','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(13,94,140,'2001-05-23','2001-05-23','00:00:00','00:00:00','2003-07-28 07:31:49','2003-07-28 07:31:49','f','f'),(14,10,230,'2000-06-04','2000-06-04','20:23:27','20:23:27','2000-02-04 21:03:36','2000-02-04 21:03:36','g','g'),(15,8,2,'1900-01-01','1900-01-01','10:31:09','10:31:09','2005-05-22 11:48:12','2005-05-22 11:48:12','q','q'),(16,43,110,'2008-03-18','2008-03-18','09:58:35','09:58:35','1900-01-01 00:00:00','1900-01-01 00:00:00','n','n'),(17,1,8,'2007-02-25','2007-02-25','05:39:28','05:39:28','2005-05-06 00:53:37','2005-05-06 00:53:37','c','c'),(18,6,5,'2001-11-22','2001-11-22','00:00:00','00:00:00','2002-08-08 23:43:46','2002-08-08 23:43:46','x','x'),(19,5,8,'0000-00-00','0000-00-00','00:00:00','00:00:00','2009-10-26 04:07:22','2009-10-26 04:07:22','n','n'),(20,1,5,'2001-08-07','2001-08-07','14:06:09','14:06:09','2005-03-12 22:55:23','2005-03-12 22:55:23','r','r'),(21,195,70,'2000-08-03','2000-08-03','00:00:00','00:00:00','2008-05-03 22:34:19','2008-05-03 22:34:19','j','j'),(22,1,0,'2007-04-21','2007-04-21','17:43:27','17:43:27','2001-10-12 13:30:14','2001-10-12 13:30:14','l','l'),(23,0,9,'2000-06-13','2000-06-13','12:23:15','12:23:15','2007-10-07 03:53:06','2007-10-07 03:53:06','h','h'),(24,7,3,'0000-00-00','0000-00-00','19:35:06','19:35:06','2005-12-27 20:58:56','2005-12-27 20:58:56','z','z'),(25,1,9,'2004-07-08','2004-07-08','10:16:08','10:16:08','2009-05-16 18:44:21','2009-05-16 18:44:21','z','z'),(26,4,3,'2003-06-01','2003-06-01','00:00:00','00:00:00','2008-10-02 00:00:00','2008-10-02 00:00:00','d','d'),(27,76,22,'0000-00-00','0000-00-00','16:51:15','16:51:15','2001-03-20 00:00:00','2001-03-20 00:00:00','l','l'),(28,6,1,'1900-01-01','1900-01-01','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(29,7,3,'2007-01-22','2007-01-22','00:00:00','00:00:00','2000-01-10 23:19:37','2000-01-10 23:19:37','k','k'),(30,6,3,'2006-10-19','2006-10-19','21:46:20','21:46:20','2008-06-21 16:56:37','2008-06-21 16:56:37','l','l'),(31,6,8,'2005-02-27','2005-02-27','00:00:00','00:00:00','2002-03-01 00:34:37','2002-03-01 00:34:37','t','t'),(32,1,4,'2001-09-10','2001-09-10','03:34:16','03:34:16','2003-02-05 18:41:00','2003-02-05 18:41:00','n','n'),(33,5,1,'2002-09-06','2002-09-06','11:25:31','11:25:31','2004-01-18 13:28:24','2004-01-18 13:28:24','z','z'),(34,2,3,'2005-01-15','2005-01-15','17:00:53','17:00:53','2002-12-03 01:06:27','2002-12-03 01:06:27','f','f'),(35,1,3,'1900-01-01','1900-01-01','23:32:47','23:32:47','2006-03-03 02:58:59','2006-03-03 02:58:59','q','q'),(36,185,63,'2006-12-20','2006-12-20','00:00:00','00:00:00','2002-07-01 10:13:39','2002-07-01 10:13:39','l','l'),(37,3,4,'2002-04-17','2002-04-17','12:15:05','12:15:05','2009-01-13 20:47:01','2009-01-13 20:47:01','a','a'),(38,7,8,'2004-01-10','2004-01-10','22:26:38','22:26:38','2008-07-18 13:35:29','2008-07-18 13:35:29','c','c'),(39,8,6,'2008-03-24','2008-03-24','00:00:00','00:00:00','2001-03-15 02:44:57','2001-03-15 02:44:57','c','c'),(40,1,4,'2007-08-18','2007-08-18','00:00:00','00:00:00','2000-06-25 14:03:55','2000-06-25 14:03:55','i','i'),(41,3,9,'2005-07-22','2005-07-22','00:00:00','00:00:00','2005-12-13 21:32:03','2005-12-13 21:32:03','r','r'),(42,8,2,'2008-07-12','2008-07-12','08:59:37','08:59:37','2009-03-18 19:27:29','2009-03-18 19:27:29','g','g'),(43,159,118,'2003-08-18','2003-08-18','07:19:50','07:19:50','2004-04-10 02:50:59','2004-04-10 02:50:59','l','l'),(44,112,10,'2002-02-26','2002-02-26','03:51:46','03:51:46','2008-09-27 06:49:19','2008-09-27 06:49:19','w','w'),(45,0,9,'2007-07-26','2007-07-26','15:57:32','15:57:32','2006-02-04 15:10:41','2006-02-04 15:10:41','b','b'),(46,2,9,'1900-01-01','1900-01-01','02:57:08','02:57:08','2004-01-04 18:45:14','2004-01-04 18:45:14','i','i'),(47,1,1,'2000-07-26','2000-07-26','00:21:15','00:21:15','2009-04-04 02:52:09','2009-04-04 02:52:09','o','o'),(48,7,6,'2005-03-06','2005-03-06','23:35:02','23:35:02','2001-03-20 12:50:17','2001-03-20 12:50:17','f','f'),(49,5,2,'2005-04-16','2005-04-16','09:21:51','09:21:51','2001-11-15 10:51:46','2001-11-15 10:51:46','a','a'),(50,2,2,'2004-04-09','2004-04-09','19:21:02','19:21:02','2007-08-13 00:00:00','2007-08-13 00:00:00','j','j'),(51,5,3,'2003-05-13','2003-05-13','03:16:22','03:16:22','1900-01-01 00:00:00','1900-01-01 00:00:00','k','k'),(52,5,0,'0000-00-00','0000-00-00','00:00:00','00:00:00','2008-01-24 08:37:15','2008-01-24 08:37:15','x','x'),(53,2,8,'2000-05-27','2000-05-27','18:19:51','18:19:51','2003-03-02 10:18:02','2003-03-02 10:18:02','r','r'),(54,2,5,'2004-07-04','2004-07-04','01:42:17','01:42:17','2003-04-25 07:35:13','2003-04-25 07:35:13','t','t'),(55,9,0,'2006-03-07','2006-03-07','00:00:00','00:00:00','2006-07-11 23:31:13','2006-07-11 23:31:13','p','p'),(56,3,1,'2002-08-17','2002-08-17','20:32:51','20:32:51','2009-08-08 16:55:59','2009-08-08 16:55:59','g','g'),(57,2,9,'2003-06-08','2003-06-08','10:04:19','10:04:19','1900-01-01 00:00:00','1900-01-01 00:00:00','q','q'),(58,7,4,'1900-01-01','1900-01-01','06:39:26','06:39:26','2000-12-22 10:27:41','2000-12-22 10:27:41','m','m'),(59,4,7,'2003-10-09','2003-10-09','15:48:26','15:48:26','2002-07-20 00:00:00','2002-07-20 00:00:00','l','l'),(60,5,6,'2007-08-12','2007-08-12','02:17:23','02:17:23','2007-09-24 00:12:11','2007-09-24 00:12:11','d','d'),(61,3,3,'2008-12-13','2008-12-13','07:48:47','07:48:47','2009-01-05 06:13:21','2009-01-05 06:13:21','n','n'),(62,0,8,'0000-00-00','0000-00-00','09:09:14','09:09:14','2008-11-23 18:13:35','2008-11-23 18:13:35','l','l'),(63,1,2,'2003-07-27','2003-07-27','22:46:23','22:46:23','2002-12-19 00:00:00','2002-12-19 00:00:00','c','c'),(64,5,5,'2003-04-13','2003-04-13','19:42:42','19:42:42','2003-04-03 16:16:35','2003-04-03 16:16:35','v','v'),(65,0,3,'2007-04-25','2007-04-25','15:15:32','15:15:32','2009-04-13 13:44:41','2009-04-13 13:44:41','z','z'),(66,4,4,'2000-03-04','2000-03-04','02:50:26','02:50:26','2007-04-19 20:49:24','2007-04-19 20:49:24','h','h'),(67,0,9,'2001-08-03','2001-08-03','14:44:31','14:44:31','2002-11-15 23:36:04','2002-11-15 23:36:04','y','y'),(68,2,0,'2006-04-13','2006-04-13','00:00:00','00:00:00','2000-05-16 00:00:00','2000-05-16 00:00:00','o','o'),(69,2,1,'2006-04-22','2006-04-22','07:31:27','07:31:27','2002-06-08 06:51:27','2002-06-08 06:51:27','h','h'),(70,8,5,'2004-08-26','2004-08-26','10:48:57','10:48:57','2006-12-07 01:49:26','2006-12-07 01:49:26','h','h'),(71,8,6,'2002-11-26','2002-11-26','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(72,5,2,'2002-01-07','2002-01-07','23:06:00','23:06:00','2000-09-27 16:26:23','2000-09-27 16:26:23','m','m'),(73,1,0,'2005-05-07','2005-05-07','05:56:02','05:56:02','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(74,0,0,'2001-04-21','2001-04-21','10:44:22','10:44:22','2008-02-13 04:28:14','2008-02-13 04:28:14','t','t'),(75,7,9,'2000-09-01','2000-09-01','00:00:00','00:00:00','2000-03-10 06:17:52','2000-03-10 06:17:52','r','r'),(76,6,8,'2004-07-06','2004-07-06','01:44:26','01:44:26','2003-05-23 00:00:00','2003-05-23 00:00:00','u','u'),(77,0,6,'0000-00-00','0000-00-00','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','h','h'),(78,6,0,'2001-02-21','2001-02-21','17:01:49','17:01:49','2003-10-27 12:45:52','2003-10-27 12:45:52','p','p'),(79,9,0,'2004-01-28','2004-01-28','16:27:14','16:27:14','2004-08-06 00:00:00','2004-08-06 00:00:00','z','z'),(80,5,3,'2008-10-07','2008-10-07','00:00:00','00:00:00','2001-10-05 05:13:39','2001-10-05 05:13:39','h','h'),(81,5,5,'0000-00-00','0000-00-00','10:34:22','10:34:22','2001-03-25 04:24:51','2001-03-25 04:24:51','q','q'),(82,6,0,'2008-03-04','2008-03-04','10:48:51','10:48:51','2006-08-20 11:54:04','2006-08-20 11:54:04','l','l'),(83,1,0,'2009-05-08','2009-05-08','16:55:06','16:55:06','2003-05-16 18:14:52','2003-05-16 18:14:52','p','p'),(84,1,1,'2005-03-19','2005-03-19','14:46:32','14:46:32','2009-10-24 13:39:35','2009-10-24 13:39:35','t','t'),(85,9,8,'2007-09-14','2007-09-14','16:26:50','16:26:50','2001-08-10 00:00:00','2001-08-10 00:00:00','o','o'),(86,249,190,'2007-02-10','2007-02-10','06:35:32','06:35:32','2001-09-06 10:15:08','2001-09-06 10:15:08','o','o'),(87,3,0,'2000-06-12','2000-06-12','02:28:38','02:28:38','2006-09-27 00:00:00','2006-09-27 00:00:00','p','p'),(88,6,4,'2002-07-06','2002-07-06','00:00:00','00:00:00','2002-02-27 20:12:29','2002-02-27 20:12:29','e','e'),(89,7,2,'2001-02-25','2001-02-25','04:52:29','04:52:29','1900-01-01 00:00:00','1900-01-01 00:00:00','u','u'),(90,5,8,'2000-04-27','2000-04-27','00:00:00','00:00:00','2005-08-18 00:00:00','2005-08-18 00:00:00','z','z'),(91,4,0,'2005-08-23','2005-08-23','09:11:04','09:11:04','2000-10-15 15:52:54','2000-10-15 15:52:54','j','j'),(92,24,137,'2006-01-07','2006-01-07','22:38:18','22:38:18','2007-11-22 13:52:22','2007-11-22 13:52:22','e','e'),(93,3,7,'2007-07-08','2007-07-08','13:23:13','13:23:13','2005-09-20 09:09:48','2005-09-20 09:09:48','k','k'),(94,179,153,'2000-01-06','2000-01-06','15:33:10','15:33:10','2008-01-11 17:35:34','2008-01-11 17:35:34','d','d'),(95,5,7,'0000-00-00','0000-00-00','09:20:10','09:20:10','2002-11-01 00:00:00','2002-11-01 00:00:00','q','q'),(96,7,9,'2002-02-22','2002-02-22','11:19:10','11:19:10','2009-06-27 00:00:00','2009-06-27 00:00:00','j','j'),(97,7,2,'2001-04-17','2001-04-17','08:08:41','08:08:41','2000-09-25 14:11:58','2000-09-25 14:11:58','j','j'),(98,1,0,'2005-06-26','2005-06-26','10:17:36','10:17:36','2004-01-05 04:49:39','2004-01-05 04:49:39','e','e'),(99,5,6,'2008-09-14','2008-09-14','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','f','f'),(100,7,6,'0000-00-00','0000-00-00','01:05:02','01:05:02','2001-01-17 23:16:24','2001-01-17 23:16:24','a','a'),(101,9,2,'2001-12-20','2001-12-20','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','o','o'),(102,5,9,'2001-11-05','2001-11-05','00:00:00','00:00:00','2008-07-15 00:00:00','2008-07-15 00:00:00','y','y'),(103,4,4,'1900-01-01','1900-01-01','15:32:04','15:32:04','2001-03-06 10:00:37','2001-03-06 10:00:37','d','d'),(104,8,7,'2009-02-13','2009-02-13','20:25:36','20:25:36','2004-08-15 00:00:00','2004-08-15 00:00:00','z','z'),(105,8,6,'2008-03-25','2008-03-25','21:33:53','21:33:53','2006-10-12 06:13:06','2006-10-12 06:13:06','s','s');
analyze table t1;
analyze table t2;
EXPLAIN UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
DROP TABLE t1, t2;
SET sql_mode = default;
CREATE TABLE t1 (  id INT NOT NULL PRIMARY KEY,  id2 INT NOT NULL,  id3 INT NOT NULL,  KEY (id2),  KEY (id3),  KEY covering_index (id2,id3)) ENGINE=InnoDB;
INSERT INTO t1 VALUES (0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 3, 3), (4, 4, 4), (5, 5, 5), (6, 6, 6), (7, 7, 7);
INSERT INTO t1 SELECT id + 8, id2 + 8, id3 +8 FROM t1;
INSERT INTO t1 SELECT id + 16, 7, 0 FROM t1;
analyze table t1;
EXPLAIN SELECT count(*) FROM t1 WHERE id2=7 AND id3=0;
DROP TABLE t1;
CREATE TABLE t1 (  c1 VARCHAR(2),  d1 DATETIME NOT NULL);
CREATE TABLE t2 (  pk INTEGER NOT NULL,  c1 VARCHAR(2),  c2 VARCHAR(2),  PRIMARY KEY (pk),  KEY (c1),  KEY (c2)) PARTITION BY KEY(pk) PARTITIONS 2;
SELECT c1FROM t1WHERE c1 IN  SELECT t2.c1  FROM t2  WHERE t2.c1 = 'f'     OR t2.c2 < 'y'AND t1.d1 IS NULL;
DROP TABLE t1, t2;
    eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t0, t1, t2, t3, t4;
create table t0  key1 int not null,  key2 int not null,  key3 int not null,  key4 int not null,  key5 int not null,  key6 int not null,  key7 int not null,  key8 int not null,  INDEX i1(key1),  INDEX i2(key2),  INDEX i3(key3),  INDEX i4(key4),  INDEX i5(key5),  INDEX i6(key6),  INDEX i7(key7),  INDEX i8(key8));
insert into t0 values (1,1,1,1,1,1,1,1023),(2,2,2,2,2,2,2,1022);
set @d=2;
while ($1)  eval insert into t0 select key1+@d, key2+@d, key3+@d, key4+@d, key5+@d,                             key6+@d, key7+@d, key8-@d from t0;
  eval set @d=@d*2;
  dec $1;
analyze table t0;
explain select * from t0 where key1 < 3 or key1 > 1020;
explainselect * from t0 where key1 < 3 or key2 > 1020;
select * from t0 where key1 < 3 or key2 > 1020;
  explain select * from t0 where key1 < 2 or key2 <3;
  explainselect * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
select * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
  explain select * from t0 ignore index (i2) where key1 < 3 or key2 <4;
  explain select * from t0 where (key1 < 3 or key2 <4) and key3 = 50;
  explain select * from t0 use index (i1,i2) where (key1 < 2 or key2 <3) and key3 = 50;
  explain select * from t0 where (key1 > 1 or key2  > 2);
  explain select * from t0 force index (i1,i2) where (key1 > 1 or key2  > 2);
  explain  select * from t0 where key1<2 or key2<3 or (key1>5 and key1<7) or  (key1>10 and key1<12) or (key2>100 and key2<102);
  explain select * from t0 where key2 = 45 or key1 <=> null;
  explain select * from t0 where key2 = 45 or key1 is not null;
  explain select * from t0 where key2 = 45 or key1 is null;
  explain select * from t0 where key2=10 or key3=3 or key4 <=> null;
  explain select * from t0 where key2=10 or key3=3 or key4 is null;
  explain select key1 from t0 where (key1 <=> null) or (key2 < 2) or                                   (key3=10) or (key4 <=> null);
  explain select key1 from t0 where (key1 <=> null) or (key1 < 5) or                                   (key3=10) or (key4 <=> null);
  explain select * from t0 where  (key1 < 2 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 5 or key6 < 5);
  explainselect * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
select * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
  explain select * from t0 where  (key1 < 3 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 2 or key6 < 2);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 70);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 1000);
  explain select * from t0 where    ((key1 < 3 or key2 < 3) and (key2 <4 or key3 < 3))  or    key2 > 4;
  explain select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
  explain select * from t0 where    ((key1 < 2 or key2 < 2) and (key3 <4 or key5 < 3))  or    ((key5 < 3 or key6 < 3) and (key7 <3 or key8 < 3));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key7 <5 or key8 < 3) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 4))  or    ((key3 <4 or key5 < 2) and (key5 < 5 or key6 < 3));
  explain select * from t0 where    ((key3 <4 or key5 < 3) and (key1 < 3 or key2 < 3))  or    (((key3 <5 and key7 < 5) or key5 < 2) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >5 or key5 < 2) and (key5 < 5 or key6 < 6));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key3 >4 or key5 < 2) and (key5 < 5 or key6 < 4));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >=5 or key5 < 2) and (key5 < 5 or key6 < 6));
select * from t0 where key1 < 3 or key8 < 2 order by key1;
  explainselect * from t0 where key1 < 3 or key8 < 2 order by key1;
create table t2 like t0;
insert into t2 select * from t0;
alter table t2 add index i1_3(key1, key3);
alter table t2 add index i2_3(key2, key3);
alter table t2 drop index i1;
alter table t2 drop index i2;
alter table t2 add index i321(key3, key2, key1);
analyze table t2;
  explain select key3 from t2 where key1 = 100 or key2 = 100;
  explain select key3 from t2 where key1 <100 or key2 < 100;
  explain select key7 from t2 where key1 <100 or key2 < 100;
create table t4 (  key1a int not null,  key1b int not null,  key2  int not null,  key2_1 int not null,  key2_2 int not null,  key3  int not null,  index i1a (key1a, key1b),  index i1b (key1b, key1a),  index i2_1(key2, key2_1),  index i2_2(key2, key2_1));
insert into t4 select key1,key1,key1 div 10, key1 % 10, key1 % 10, key1 from t0;
analyze table t4;
select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key3 = 5);
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key2_2 = 5);
  explain select * from t4 where key2_1 = 1 or key2_2 = 5;
create table t1 like t0;
insert into t1 select * from t0;
analyze table t1;
explain select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
explainselect * from t0,t1 where (t0.key1=t1.key1) and ( t0.key1=3 or t0.key2=4);
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2=4) and t1.key1<200;
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2<4) and t1.key1=2;
explain select * from t0,t1 where t0.key1 = 5 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
  explain select * from t0,t1 where t0.key1 < 3 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
explain select * from t1 where key1=3 or key2=4  union select * from t1 where key1<4 or key3=5;
explain select * from (select * from t1 where key1 = 3 or key2 =3) as z where key8 >5;
create table t3 like t0;
insert into t3 select * from t0;
alter table t3 add key9 int not null, add index i9(key9);
alter table t3 add keyA int not null, add index iA(keyA);
alter table t3 add keyB int not null, add index iB(keyB);
alter table t3 add keyC int not null, add index iC(keyC);
update t3 set key9=key1,keyA=key1,keyB=key1,keyC=key1;
analyze table t3;
explain select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
explain select * from t0 where key1 < 3 or key2 < 4;
select * from t0 where key1 < 3 or key2 < 4;
update t0 set key8=123 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
delete from t0 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
select count(*) from t0;
drop table t4;
create table t4 (a int);
insert into t4 values (1),(4),(3);
analyze table t4;
set @save_join_buffer_size=@@join_buffer_size;
set join_buffer_size= 4096;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
update t0 set key1=1;
analyze table t0;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
alter table t0 add filler1 char(200), add filler2 char(200), add filler3 char(200);
update t0 set key2=1, key3=1, key4=1, key5=1,key6=1,key7=1 where key7 < 500;
analyze table t0;
  # Too unstable for innodb      explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5)   from t0 as a, t0 as b   where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)    and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a, t0 as b where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)  and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
set join_buffer_size= @save_join_buffer_size;
drop table t0, t1, t2, t3, t4;
CREATE TABLE t1 (  cola char(3) not null, colb char(3) not null,  filler char(200),  key(cola), key(colb));
INSERT INTO t1 VALUES ('foo','bar', 'ZZ'),('fuz','baz', 'ZZ');
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola = 'foo';
  dec $1;
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola <> 'foo';
  dec $1;
OPTIMIZE TABLE t1;
select count(*) from t1;
analyze table t1;
  explain select * from t1 WHERE cola = 'foo' AND colb = 'bar';
  explain select * from t1 force index(cola,colb) WHERE cola = 'foo' AND colb = 'bar';
drop table t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b));
insert into t1 select @v:= A.a, @v, 't1', 'filler2' from t0 A, t0 B, t0 C;
create table t2 like t1;
create table t3 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b)) engine=merge union=(t1,t2);
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
explain select * from t1 where a=1 and b=1;
explain select * from t3 where a=1 and b=1;
drop table t3;
drop table t0, t1, t2;
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES(1);
CREATE TABLE t2(a INT, b INT, dummy CHAR(16) DEFAULT '', KEY(a), KEY(b));
INSERT INTO t2(a,b) VALUES(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(1,2);
LOCK TABLES t1 WRITE, t2 WRITE;
INSERT INTO t2(a,b) VALUES(1,2);
SELECT t2.a FROM t1,t2 WHERE t2.b=2 AND t2.a=1;
UNLOCK TABLES;
DROP TABLE t1, t2;
CREATE TABLE `t1` (  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY `a` (`a`),  KEY `b` (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t1 values(0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (10, 'filler', 10), (11, 'filler', 11), (12, 'filler', 12), (13, 'filler', 13),(14, 'filler', 14), (15, 'filler', 15), (16, 'filler', 16), (17, 'filler', 17), (18, 'filler', 18), (19, 'filler', 19), (4, '5      ', 0), (5, '4      ', 0), (4, '4      ', 0), (4, 'qq     ', 5), (5, 'qq     ', 4), (4, 'zz     ', 4);
create table t2(  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY USING BTREE (`a`),  KEY USING BTREE (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t2 select * from t1;
analyze table t1;
analyze table t2;
explain select * from t1 where a=4 or b=4;
select * from t1 where a=4 or b=4;
select * from t1 ignore index(a,b) where a=4 or b=4;
explain select * from t2 where a=4 or b=4;
select * from t2 where a=4 or b=4;
drop table t1, t2;
CREATE TABLE t1 (a varchar(8), b set('a','b','c','d','e','f','g','h'),                 KEY b(b), KEY a(a));
INSERT INTO t1 VALUES ('y',''), ('z','');
SELECT b,a from t1 WHERE (b!='c' AND b!='f' && b!='h') OR   (a='pure-S') OR (a='DE80337a') OR (a='DE80799');
DROP TABLE t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (a int);
insert into t1 values (1),(2);
create table t2(a int, b int);
insert into t2 values (1,1), (2, 1000);
create table t3 (a int, b int, filler char(100), key(a), key(b));
insert into t3 select 1000, 1000,'filler' from t0 A, t0 B, t0 C; insert into t3 values (1,1,'data');
insert into t3 values (1,1,'data');
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
  explain select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
drop table t0, t1, t2, t3;
CREATE TABLE t1(a VARCHAR(128),b VARCHAR(128),KEY(A),KEY(B)) charset latin1;
INSERT INTO t1 VALUES (REPEAT('a',128),REPEAT('b',128));
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
analyze table t1;
SET SESSION sort_buffer_size=1;
  EXPLAIN SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SET SESSION sort_buffer_size=DEFAULT;
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t0,t1,t2;
create table t1  /* Field names reflect value(rowid) distribution, st=STairs, swt= SaWTooth */  st_a int not null default 0,  swt1a int not null default 0,  swt2a int not null default 0,  st_b int not null default 0,  swt1b int not null default 0,  swt2b int not null default 0,  /* fields/keys for row retrieval tests */  key1 int,  key2 int,  key3 int,  key4 int,  /* make rows much bigger then keys */  filler1 char (200),  filler2 char (200),  filler3 char (200),  filler4 char (200),  filler5 char (200),  filler6 char (200),  /* order of keys is important */  key sta_swt12a(st_a,swt1a,swt2a),  key sta_swt1a(st_a,swt1a),  key sta_swt2a(st_a,swt2a),  key sta_swt21a(st_a,swt2a,swt1a),  key st_a(st_a),  key stb_swt1a_2b(st_b,swt1b,swt2a),  key stb_swt1b(st_b,swt1b),  key st_b(st_b),  key(key1),  key(key2),  key(key3),  key(key4)) ;
create table t0 as select * from t1;
while ($cnt)  eval insert into t0 values (1, 2, 3, 1, 2, 3, 0, 0, 0, 0, 'data1', 'data2', 'data3', 'data4', 'data5', 'data6');
  dec $cnt;
alter table t1 disable keys;
while ($1)  let $2=4;
  while ($2)  {    let $3=4;
    while ($3)    {      eval insert into t1 select $1, $2, $3, $1 ,$2, $3, key1, key2, key3, key4, filler1, filler2, filler3, filler4, filler5, filler6 from t0;
      dec $3;
    }    dec $2;
  } dec $1;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 100, 100,'key1-key2-key3-key4');
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (100, -1, 100, -1,'key1-key3');
  dec $cnt;
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (-1, 100, -1, 100,'key2-key4');
  dec $cnt;
alter table t1 enable keys;
select count(*) from t1;
analyze table t0;
analyze table t1;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain format=json select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, -1, -1, 'key1-key2');
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 100, 100, 'key4-key3');
analyze table t1;
explain select key1,key2,filler1 from t1 where key1=100 and key2=100;
select key1,key2,filler1 from t1 where key1=100 and key2=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
insert into t1 (key1,key2,key3,key4,filler1) values (101,101,101,101, 'key1234-101');
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2, filler1 from t1 where key1=100 and key2=100;
update t1 set filler1='to be deleted' where key1=100 and key2=100;
update t1 set key1=200,key2=200 where key1=100 and key2=100;
delete from t1 where key1=200 and key2=200;
analyze table t1;
select key1,key2,filler1 from t1 where key2=100 and key2=200;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
delete from t1 where key3=100 and key4=100;
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-1');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-2');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, -1, 200,'key4');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 200, -1,'key3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
  # Too unstable on InnoDB  explain select * from t1 where st_a=1 and st_b=1;
  explain select st_a,st_b from t1 where st_a=1 and st_b=1;
  explain select st_a from t1 ignore index (st_a) where st_a=1 and st_b=1;
explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1;
explain select * from t1 where st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b, stb_swt1b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
drop table t0,t1;
create table t2 (  a char(10),  b char(10),  filler1 char(255),  filler2 char(255),  key(a(5)),  key(b(5)));
while ($1)  eval insert into t2 values (repeat(char($1+64), 8),repeat(char($1+64), 8),'filler1', 'filler2');
  dec $1;
insert into t2 select * from t2;
insert into t2 select * from t2;
select count(a) from t2 where a='BBBBBBBB';
select count(a) from t2 where b='BBBBBBBB';
analyze table t2;
explain select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 ignore index(a,b) where a='AAAAAAAA' and b='AAAAAAAA';
insert into t2 values ('ab', 'ab', 'uh', 'oh');
analyze table t2;
explain select a from t2 where a='ab';
drop table t2;
CREATE TABLE t1(c1 INT, c2 INT DEFAULT 0, c3 CHAR(255) DEFAULT '',KEY(c1), KEY(c2), KEY(c3)) charset latin1;
INSERT INTO t1(c1) VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0);
INSERT INTO t1 VALUES(0,0,0);
CREATE TABLE t2(c1 int);
INSERT INTO t2 VALUES(1);
DELETE t1 FROM t1,t2 WHERE t1.c1=0 AND t1.c2=0;
SELECT * FROM t1;
DROP TABLE t1,t2;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1,t2;
create table t1  key1 int not null,  key2 int not null,  INDEX i1(key1),  INDEX i2(key2)) charset latin1;
while ($1)  eval insert into t1 values (200-$1, $1);
  dec $1;
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
alter table t1 add str1 char (255) not null,                add zeroval int not null default 0,                add str2 char (255) not null,                add str3 char (255) not null;
update t1 set str1='aaa', str2='bbb', str3=concat(key2, '-', key1 div 2, '_' ,if(key1 mod 2 = 0, 'a', 'A'));
alter table t1 add primary key (str1, zeroval, str2, str3);
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
drop table t1;
create table t1 (  pk    integer not null auto_increment primary key,  key1  integer,  key2  integer not null,  filler char  (200),  index (key1),  index (key2)) charset latin1;
show warnings;
while ($1)  eval insert into t1 (key1, key2, filler) values ($1/4, $1/8, 'filler-data');
  dec $1;
analyze table t1;
explain select pk from t1 where key1 = 1 and key2 = 1;
select pk from t1 where key2 = 1 and key1 = 1;
select pk from t1 ignore index(key1,key2) where key2 = 1 and key1 = 1;
drop table t1;
create table t1 (  pk int primary key auto_increment,  key1a  int,  key2a  int,  key1b  int,  key2b  int,  dummy1 int,  dummy2 int,  dummy3 int,  dummy4 int,  key3a  int,  key3b  int,  filler1 char (200),  index i1(key1a, key1b),  index i2(key2a, key2b),  index i3(key3a, key3b));
create table t2 (a int);
insert into t2 values (0),(1),(2),(3),(4),(NULL);
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select A.a, B.a, C.a, D.a, C.a, D.a from t2 A,t2 B,t2 C, t2 D;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
analyze table t1;
select count(*) from t1;
analyze table t2;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and  key2a = 2 and key2b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key2a = 2 and key2b is null;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
drop table t1,t2;
create table t1 (  id1 int,  id2 date ,  index idx2 (id1,id2),  index idx1 (id2));
insert into t1 values(1,'20040101'), (2,'20040102');
select * from t1  where id1 = 1  and id2= '20040101';
drop table t1;
drop view if exists v1;
CREATE TABLE t1 (  `oid` int(11) unsigned NOT NULL auto_increment,  `fk_bbk_niederlassung` int(11) unsigned NOT NULL,  `fk_wochentag` int(11) unsigned NOT NULL,  `uhrzeit_von` time NOT NULL COMMENT 'HH:MM',  `uhrzeit_bis` time NOT NULL COMMENT 'HH:MM',  `geloescht` tinyint(4) NOT NULL,  `version` int(5) NOT NULL,  PRIMARY KEY  (`oid`),  KEY `fk_bbk_niederlassung` (`fk_bbk_niederlassung`),  KEY `fk_wochentag` (`fk_wochentag`),  KEY `ix_version` (`version`)) DEFAULT CHARSET=latin1;
insert  into t1 values(1, 38, 1, '08:00:00', '13:00:00', 0, 1),(2, 38, 2, '08:00:00', '13:00:00', 0, 1),(3, 38, 3, '08:00:00', '13:00:00', 0, 1),(4, 38, 4, '08:00:00', '13:00:00', 0, 1),(5, 38, 5, '08:00:00', '13:00:00', 0, 1),(6, 38, 5, '08:00:00', '13:00:00', 1, 2),(7, 38, 3, '08:00:00', '13:00:00', 1, 2),(8, 38, 1, '08:00:00', '13:00:00', 1, 2),(9, 38, 2, '08:00:00', '13:00:00', 1, 2),(10, 38, 4, '08:00:00', '13:00:00', 1, 2),(11, 38, 1, '08:00:00', '13:00:00', 0, 3),(12, 38, 2, '08:00:00', '13:00:00', 0, 3),(13, 38, 3, '08:00:00', '13:00:00', 0, 3),(14, 38, 4, '08:00:00', '13:00:00', 0, 3),(15, 38, 5, '08:00:00', '13:00:00', 0, 3),(16, 38, 4, '08:00:00', '13:00:00', 0, 4),(17, 38, 5, '08:00:00', '13:00:00', 0, 4),(18, 38, 1, '08:00:00', '13:00:00', 0, 4),(19, 38, 2, '08:00:00', '13:00:00', 0, 4),(20, 38, 3, '08:00:00', '13:00:00', 0, 4),(21, 7, 1, '08:00:00', '13:00:00', 0, 1),(22, 7, 2, '08:00:00', '13:00:00', 0, 1),(23, 7, 3, '08:00:00', '13:00:00', 0, 1),(24, 7, 4, '08:00:00', '13:00:00', 0, 1),(25, 7, 5, '08:00:00', '13:00:00', 0, 1);
create view v1 asselect  zeit1.oid AS oid,  zeit1.fk_bbk_niederlassung AS fk_bbk_niederlassung,  zeit1.fk_wochentag AS fk_wochentag,  zeit1.uhrzeit_von AS uhrzeit_von,  zeit1.uhrzeit_bis AS uhrzeit_bis,  zeit1.geloescht AS geloescht,  zeit1.version AS versionfrom  t1 zeit1where(zeit1.version =  (select max(zeit2.version) AS `max(version)`   from t1 zeit2   where     ((zeit1.fk_bbk_niederlassung = zeit2.fk_bbk_niederlassung) and      (zeit1.fk_wochentag = zeit2.fk_wochentag) and      (zeit1.uhrzeit_von = zeit2.uhrzeit_von) and      (zeit1.uhrzeit_bis = zeit2.uhrzeit_bis)     )  )and (zeit1.geloescht = 0);
select * from v1 where oid = 21;
drop view v1;
drop table t1;
CREATE TABLE t1(  t_cpac varchar(2) NOT NULL,  t_vers varchar(4) NOT NULL,  t_rele varchar(2) NOT NULL,  t_cust varchar(4) NOT NULL,  filler1 char(250) default NULL,  filler2 char(250) default NULL,  PRIMARY KEY (t_cpac,t_vers,t_rele,t_cust),  UNIQUE KEY IX_4 (t_cust,t_cpac,t_vers,t_rele),  KEY IX_5 (t_vers,t_rele,t_cust)) charset latin1;
insert into t1 values('tm','2.5 ','a ','    ','',''), ('tm','2.5U','a ','stnd','',''),('da','3.3 ','b ','    ','',''), ('da','3.3U','b ','stnd','',''),('tl','7.6 ','a ','    ','',''), ('tt','7.6 ','a ','    ','',''),('bc','B61 ','a ','    ','',''), ('bp','B61 ','a ','    ','',''),('ca','B61 ','a ','    ','',''), ('ci','B61 ','a ','    ','',''),('cp','B61 ','a ','    ','',''), ('dm','B61 ','a ','    ','',''),('ec','B61 ','a ','    ','',''), ('ed','B61 ','a ','    ','',''),('fm','B61 ','a ','    ','',''), ('nt','B61 ','a ','    ','',''),('qm','B61 ','a ','    ','',''), ('tc','B61 ','a ','    ','',''),('td','B61 ','a ','    ','',''), ('tf','B61 ','a ','    ','',''),('tg','B61 ','a ','    ','',''), ('ti','B61 ','a ','    ','',''),('tp','B61 ','a ','    ','',''), ('ts','B61 ','a ','    ','',''),('wh','B61 ','a ','    ','',''), ('bc','B61U','a ','stnd','',''),('bp','B61U','a ','stnd','',''), ('ca','B61U','a ','stnd','',''),('ci','B61U','a ','stnd','',''), ('cp','B61U','a ','stnd','',''),('dm','B61U','a ','stnd','',''), ('ec','B61U','a ','stnd','',''),('fm','B61U','a ','stnd','',''), ('nt','B61U','a ','stnd','',''),('qm','B61U','a ','stnd','',''), ('tc','B61U','a ','stnd','',''),('td','B61U','a ','stnd','',''), ('tf','B61U','a ','stnd','',''),('tg','B61U','a ','stnd','',''), ('ti','B61U','a ','stnd','',''),('tp','B61U','a ','stnd','',''), ('ts','B61U','a ','stnd','',''),('wh','B61U','a ','stnd','','');
show create table t1;
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6';
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6'  and t_rele='a' and t_cust = ' ';
drop table t1;
create table t1 (  pk int(11) not null auto_increment,  a int(11) not null default '0',  b int(11) not null default '0',  c int(11) not null default '0',  filler1 datetime, filler2 varchar(15),  filler3 longtext,  kp1 varchar(4), kp2 varchar(7),  kp3 varchar(2), kp4 varchar(4),  kp5 varchar(7),  filler4 char(1),  primary key (pk),  key idx1(a,b,c),  key idx2(c),  key idx3(kp1,kp2,kp3,kp4,kp5)) default charset=latin1;
set @fill= uncompress(unhex(concat('F91D0000789CDD993D6FDB301086F7FE0A6D4E0105B8E3F1335D5BA028DA0EEDE28E1D320408','52A0713BF4D7571FB62C51A475924839080307B603E77DEE787C8FA41F9E9EEF7F1F8A87A7C3','AFE280C5DF9F8F7FEE9F8B1B2CB114D6902E918455245DB91300FA16E42D5201FA4EE29DA05D','B9FB3718A33718A3FA8C30AEFAFDE1F317D016AA67BA7A60FDE45BF5F8BA7B5BDE8812AA9F1A','069DB03C9804346644F3A3A6A1338DB572756A3C4D1BCC804CABF912C654AE9BB855A2B85962','3A479259CAE6A86C0411D01AE5483581EDCBD9A39C45252D532E533979EB9F82E971D979BDB4','8531105670740AFBFD1E34AAB0029E4AD0A1D46A6D0946A21A16038A5CD965CD2D524673F712','20C304477315CE18405EAF9BD0AFFEAC74FDA14F1FBF5BD34C769D73FBBEDF4750ADD4E5A99C','5C8DC04934AFA275D483D536D174C11B12AF27F8F888B41B6FC9DBA569E1FD7BD72D698130B7','91B23A98803512B3D31881E8DCDA2AC1754E3644C4BB3A8466750B911681274A39E35E8624B7','444A42AC1213F354758E3CF1A4CDD5A688C767CF1B11ABC5867CB15D8A18E0B91E9EC275BB94','58F33C2936F64690D55BC29E4A293D95A798D84217736CEAAA538CE1354269EE2162053FBC66','496D90CB53323CB279D3A6AF651B4B22B9E430743D83BE48E995A09D4FC9871C22D8D189B945','706911BCB8C3C774B9C08D2FC6ED853ADACA37A14A4CB2E027630E5B80ECACD939431B1CDF62','7D71487536EA2C678F59685E91F4B6C144BCCB94C1EBA9FA6F5552DDCA4E4539BE326A2720CB','45ED028EB3616AC93C46E775FEA9FA6DA7CFCEC6DEBA5FCD1F915EED4D983BDDB881528AD9AB','43C1576F29AAB35BDFBC21D422F52B307D350589D45225A887AC46C8EDD72D99EC3ED2E1BCEF','7AF26FC4C74097B6768A5EDAFA660CC64278F7E63F99AC954B')));
prepare x from @fill;
execute x;
deallocate prepare x;
set @fill=NULL;
SELECT COUNT(*) FROM t1 WHERE b = 0 AND a = 0 AND c = 13286427 AND kp1='279' AND kp2='ELM0678' AND kp3='6' AND kp4='10' AND  kp5 = 'R        ';
drop table t1;
create table t1  key1 int not null,   key2 int not null default 0,  key3 int not null default 0);
insert into t1(key1) values (1),(2),(3),(4),(5),(6),(7),(8);
set @d=8;
while ($1)  eval insert into t1 (key1) select key1+@d from t1;
  eval set @d=@d*2;
  dec $1;
alter table t1 add index i2(key2);
alter table t1 add index i3(key3);
update t1 set key2=key1,key3=key1;
analyze table t1;
  explain select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
drop table t1;
CREATE TABLE t1 (  a INT,  b INT,  c INT,  d INT,  PRIMARY KEY (a),  KEY (c),  KEY bd (b,d));
INSERT INTO t1 VALUES(1, 0, 1, 0),(2, 1, 1, 1),(3, 1, 1, 1),(4, 0, 1, 1);
analyze table t1;
EXPLAINSELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
CREATE TABLE t2 ( a INT )SELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1( a INT, b INT, KEY(a), KEY(b) );
INSERT INTO t1 VALUES (1, 2), (1, 2), (1, 2), (1, 2);
SELECT * FROM t1 FORCE INDEX(a, b) WHERE a = 1 AND b = 2;
DROP TABLE t1;
CREATE TABLE t1 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b INT);
INSERT INTO t1 (b) VALUES (1);
UPDATE t1 SET b = 2 WHERE a = 1;
SELECT * FROM t1;
CREATE TABLE t2 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(1) );
INSERT INTO t2 (b) VALUES ('a');
UPDATE t2 SET b = 'b' WHERE a = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 (  pk INT NOT NULL,  col_int_key INT NOT NULL,  col_varchar_key VARCHAR(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES (1,1,'a'), (2,2,'b');
analyze table t1;
EXPLAINSELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
SELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1;
create table t1 (  pk int primary key,  key1 int,  key2 int,  filler char(200),  filler2 char(200),  index(key1),  index(key2));
while ($1)  eval insert into t1 values($1, $1, $1, 'filler-data','filler-data-2');
  dec $1;
select * from t1 where (key1 >= 2 and key1 <= 10) or (pk >= 4 and pk <=8 );
set @maxv=1000;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1=18 or key1=60;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1 < 3 or key1 > @maxv-11;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or  (key1 < 5) or (key1 > 10 and key1 < 15) or (key1 >= 50 and key1 < 55 ) or (key1 > @maxv-10);
select * from t1 where  (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 )  or  (key1 < 5) or (key1 > @maxv-10);
drop table t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t1;
create table t1  pk1 int not null,  pk2 int not null,  key1 int not null,  key2 int not null,  pktail1ok  int not null,  pktail2ok  int not null,  pktail3bad int not null,  pktail4bad int not null,  pktail5bad int not null,  pk2copy int not null,  badkey  int not null,  filler1 char (200),  filler2 char (200),  key (key1),  key (key2),  /* keys with tails from CPK members */  key (pktail1ok, pk1),  key (pktail2ok, pk1, pk2),  key (pktail3bad, pk2, pk1),  key (pktail4bad, pk1, pk2copy),  key (pktail5bad, pk1, pk2, pk2copy),  primary key (pk1, pk2));
set autocommit=0;
while ($1)  eval insert into t1 values ($1 div 10,$1 mod 100,   $1/100,$1/100,   $1/100,$1/100,$1/100,$1/100,$1/100, $1 mod 100, $1/1000,'filler-data-$1','filler2');
  dec $1;
set autocommit=1;
analyze table t1;
explain select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
explain select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
explain select * from t1 where badkey=1 and key1=10;
explain select * from t1 where pk1 < 7500 and key1 = 10;
explain select * from t1 where pktail1ok=1 and key1=10;
explain select * from t1 where pktail2ok=1 and key1=10;
explain select * from t1 where (pktail2ok=1 and pk1< 50000) or key1=10;
explain select * from t1 where pktail3bad=1 and key1=10;
explain select * from t1 where pktail4bad=1 and key1=10;
explain select * from t1 where pktail5bad=1 and key1=10;
explain select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
drop table t1;
create table t1  RUNID varchar(22),  SUBMITNR varchar(5),  ORDERNR char(1),  PROGRAMM varchar(8),  TESTID varchar(4),  UCCHECK char(1),  ETEXT varchar(80),  ETEXT_TYPE char(1),  INFO char(1),  SEVERITY tinyint(3),  TADIRFLAG char(1),  PRIMARY KEY  (RUNID,SUBMITNR,ORDERNR,PROGRAMM,TESTID,UCCHECK),  KEY `TVERM~KEY`  (PROGRAMM,TESTID,UCCHECK)) DEFAULT CHARSET=latin1;
update t1 set `ETEXT` = '', `ETEXT_TYPE`='', `INFO`='', `SEVERITY`='', `TADIRFLAG`=''WHERE `RUNID`= '' AND `SUBMITNR`= '' AND `ORDERNR`='' AND `PROGRAMM`='' AND `TESTID`='' AND `UCCHECK`='';
drop table t1;
CREATE TABLE t1 (f1 INT, PRIMARY KEY (f1));
INSERT INTO t1 VALUES (2);
CREATE TABLE t2 (f1 INT, f2 INT, f3 char(1),                 PRIMARY KEY (f1), KEY (f2), KEY (f3) );
INSERT INTO t2 VALUES (1, 1, 'h'), (2, 3, 'h'), (3, 2, ''), (4, 2, '');
SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
analyze table t1;
analyze table t2;
EXPLAIN SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
DROP TABLE t1,t2;
SET sql_mode = '';
CREATE TABLE t1 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES(1,2,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','2','2'),(109,25,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','1','7');
CREATE TABLE t2 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t2 VALUES(10,2,4,'2000-04-16','2000-04-16','17:02:34','17:02:34','2009-08-04 02:49:10','2009-08-04 02:49:10','u','u'),(11,6,5,'1900-01-01','1900-01-01','12:31:32','12:31:32','2004-05-24 22:22:06','2004-05-24 22:22:06','b','b'),(12,6,0,'2005-05-14','2005-05-14','16:49:31','16:49:31','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(13,94,140,'2001-05-23','2001-05-23','00:00:00','00:00:00','2003-07-28 07:31:49','2003-07-28 07:31:49','f','f'),(14,10,230,'2000-06-04','2000-06-04','20:23:27','20:23:27','2000-02-04 21:03:36','2000-02-04 21:03:36','g','g'),(15,8,2,'1900-01-01','1900-01-01','10:31:09','10:31:09','2005-05-22 11:48:12','2005-05-22 11:48:12','q','q'),(16,43,110,'2008-03-18','2008-03-18','09:58:35','09:58:35','1900-01-01 00:00:00','1900-01-01 00:00:00','n','n'),(17,1,8,'2007-02-25','2007-02-25','05:39:28','05:39:28','2005-05-06 00:53:37','2005-05-06 00:53:37','c','c'),(18,6,5,'2001-11-22','2001-11-22','00:00:00','00:00:00','2002-08-08 23:43:46','2002-08-08 23:43:46','x','x'),(19,5,8,'0000-00-00','0000-00-00','00:00:00','00:00:00','2009-10-26 04:07:22','2009-10-26 04:07:22','n','n'),(20,1,5,'2001-08-07','2001-08-07','14:06:09','14:06:09','2005-03-12 22:55:23','2005-03-12 22:55:23','r','r'),(21,195,70,'2000-08-03','2000-08-03','00:00:00','00:00:00','2008-05-03 22:34:19','2008-05-03 22:34:19','j','j'),(22,1,0,'2007-04-21','2007-04-21','17:43:27','17:43:27','2001-10-12 13:30:14','2001-10-12 13:30:14','l','l'),(23,0,9,'2000-06-13','2000-06-13','12:23:15','12:23:15','2007-10-07 03:53:06','2007-10-07 03:53:06','h','h'),(24,7,3,'0000-00-00','0000-00-00','19:35:06','19:35:06','2005-12-27 20:58:56','2005-12-27 20:58:56','z','z'),(25,1,9,'2004-07-08','2004-07-08','10:16:08','10:16:08','2009-05-16 18:44:21','2009-05-16 18:44:21','z','z'),(26,4,3,'2003-06-01','2003-06-01','00:00:00','00:00:00','2008-10-02 00:00:00','2008-10-02 00:00:00','d','d'),(27,76,22,'0000-00-00','0000-00-00','16:51:15','16:51:15','2001-03-20 00:00:00','2001-03-20 00:00:00','l','l'),(28,6,1,'1900-01-01','1900-01-01','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(29,7,3,'2007-01-22','2007-01-22','00:00:00','00:00:00','2000-01-10 23:19:37','2000-01-10 23:19:37','k','k'),(30,6,3,'2006-10-19','2006-10-19','21:46:20','21:46:20','2008-06-21 16:56:37','2008-06-21 16:56:37','l','l'),(31,6,8,'2005-02-27','2005-02-27','00:00:00','00:00:00','2002-03-01 00:34:37','2002-03-01 00:34:37','t','t'),(32,1,4,'2001-09-10','2001-09-10','03:34:16','03:34:16','2003-02-05 18:41:00','2003-02-05 18:41:00','n','n'),(33,5,1,'2002-09-06','2002-09-06','11:25:31','11:25:31','2004-01-18 13:28:24','2004-01-18 13:28:24','z','z'),(34,2,3,'2005-01-15','2005-01-15','17:00:53','17:00:53','2002-12-03 01:06:27','2002-12-03 01:06:27','f','f'),(35,1,3,'1900-01-01','1900-01-01','23:32:47','23:32:47','2006-03-03 02:58:59','2006-03-03 02:58:59','q','q'),(36,185,63,'2006-12-20','2006-12-20','00:00:00','00:00:00','2002-07-01 10:13:39','2002-07-01 10:13:39','l','l'),(37,3,4,'2002-04-17','2002-04-17','12:15:05','12:15:05','2009-01-13 20:47:01','2009-01-13 20:47:01','a','a'),(38,7,8,'2004-01-10','2004-01-10','22:26:38','22:26:38','2008-07-18 13:35:29','2008-07-18 13:35:29','c','c'),(39,8,6,'2008-03-24','2008-03-24','00:00:00','00:00:00','2001-03-15 02:44:57','2001-03-15 02:44:57','c','c'),(40,1,4,'2007-08-18','2007-08-18','00:00:00','00:00:00','2000-06-25 14:03:55','2000-06-25 14:03:55','i','i'),(41,3,9,'2005-07-22','2005-07-22','00:00:00','00:00:00','2005-12-13 21:32:03','2005-12-13 21:32:03','r','r'),(42,8,2,'2008-07-12','2008-07-12','08:59:37','08:59:37','2009-03-18 19:27:29','2009-03-18 19:27:29','g','g'),(43,159,118,'2003-08-18','2003-08-18','07:19:50','07:19:50','2004-04-10 02:50:59','2004-04-10 02:50:59','l','l'),(44,112,10,'2002-02-26','2002-02-26','03:51:46','03:51:46','2008-09-27 06:49:19','2008-09-27 06:49:19','w','w'),(45,0,9,'2007-07-26','2007-07-26','15:57:32','15:57:32','2006-02-04 15:10:41','2006-02-04 15:10:41','b','b'),(46,2,9,'1900-01-01','1900-01-01','02:57:08','02:57:08','2004-01-04 18:45:14','2004-01-04 18:45:14','i','i'),(47,1,1,'2000-07-26','2000-07-26','00:21:15','00:21:15','2009-04-04 02:52:09','2009-04-04 02:52:09','o','o'),(48,7,6,'2005-03-06','2005-03-06','23:35:02','23:35:02','2001-03-20 12:50:17','2001-03-20 12:50:17','f','f'),(49,5,2,'2005-04-16','2005-04-16','09:21:51','09:21:51','2001-11-15 10:51:46','2001-11-15 10:51:46','a','a'),(50,2,2,'2004-04-09','2004-04-09','19:21:02','19:21:02','2007-08-13 00:00:00','2007-08-13 00:00:00','j','j'),(51,5,3,'2003-05-13','2003-05-13','03:16:22','03:16:22','1900-01-01 00:00:00','1900-01-01 00:00:00','k','k'),(52,5,0,'0000-00-00','0000-00-00','00:00:00','00:00:00','2008-01-24 08:37:15','2008-01-24 08:37:15','x','x'),(53,2,8,'2000-05-27','2000-05-27','18:19:51','18:19:51','2003-03-02 10:18:02','2003-03-02 10:18:02','r','r'),(54,2,5,'2004-07-04','2004-07-04','01:42:17','01:42:17','2003-04-25 07:35:13','2003-04-25 07:35:13','t','t'),(55,9,0,'2006-03-07','2006-03-07','00:00:00','00:00:00','2006-07-11 23:31:13','2006-07-11 23:31:13','p','p'),(56,3,1,'2002-08-17','2002-08-17','20:32:51','20:32:51','2009-08-08 16:55:59','2009-08-08 16:55:59','g','g'),(57,2,9,'2003-06-08','2003-06-08','10:04:19','10:04:19','1900-01-01 00:00:00','1900-01-01 00:00:00','q','q'),(58,7,4,'1900-01-01','1900-01-01','06:39:26','06:39:26','2000-12-22 10:27:41','2000-12-22 10:27:41','m','m'),(59,4,7,'2003-10-09','2003-10-09','15:48:26','15:48:26','2002-07-20 00:00:00','2002-07-20 00:00:00','l','l'),(60,5,6,'2007-08-12','2007-08-12','02:17:23','02:17:23','2007-09-24 00:12:11','2007-09-24 00:12:11','d','d'),(61,3,3,'2008-12-13','2008-12-13','07:48:47','07:48:47','2009-01-05 06:13:21','2009-01-05 06:13:21','n','n'),(62,0,8,'0000-00-00','0000-00-00','09:09:14','09:09:14','2008-11-23 18:13:35','2008-11-23 18:13:35','l','l'),(63,1,2,'2003-07-27','2003-07-27','22:46:23','22:46:23','2002-12-19 00:00:00','2002-12-19 00:00:00','c','c'),(64,5,5,'2003-04-13','2003-04-13','19:42:42','19:42:42','2003-04-03 16:16:35','2003-04-03 16:16:35','v','v'),(65,0,3,'2007-04-25','2007-04-25','15:15:32','15:15:32','2009-04-13 13:44:41','2009-04-13 13:44:41','z','z'),(66,4,4,'2000-03-04','2000-03-04','02:50:26','02:50:26','2007-04-19 20:49:24','2007-04-19 20:49:24','h','h'),(67,0,9,'2001-08-03','2001-08-03','14:44:31','14:44:31','2002-11-15 23:36:04','2002-11-15 23:36:04','y','y'),(68,2,0,'2006-04-13','2006-04-13','00:00:00','00:00:00','2000-05-16 00:00:00','2000-05-16 00:00:00','o','o'),(69,2,1,'2006-04-22','2006-04-22','07:31:27','07:31:27','2002-06-08 06:51:27','2002-06-08 06:51:27','h','h'),(70,8,5,'2004-08-26','2004-08-26','10:48:57','10:48:57','2006-12-07 01:49:26','2006-12-07 01:49:26','h','h'),(71,8,6,'2002-11-26','2002-11-26','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(72,5,2,'2002-01-07','2002-01-07','23:06:00','23:06:00','2000-09-27 16:26:23','2000-09-27 16:26:23','m','m'),(73,1,0,'2005-05-07','2005-05-07','05:56:02','05:56:02','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(74,0,0,'2001-04-21','2001-04-21','10:44:22','10:44:22','2008-02-13 04:28:14','2008-02-13 04:28:14','t','t'),(75,7,9,'2000-09-01','2000-09-01','00:00:00','00:00:00','2000-03-10 06:17:52','2000-03-10 06:17:52','r','r'),(76,6,8,'2004-07-06','2004-07-06','01:44:26','01:44:26','2003-05-23 00:00:00','2003-05-23 00:00:00','u','u'),(77,0,6,'0000-00-00','0000-00-00','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','h','h'),(78,6,0,'2001-02-21','2001-02-21','17:01:49','17:01:49','2003-10-27 12:45:52','2003-10-27 12:45:52','p','p'),(79,9,0,'2004-01-28','2004-01-28','16:27:14','16:27:14','2004-08-06 00:00:00','2004-08-06 00:00:00','z','z'),(80,5,3,'2008-10-07','2008-10-07','00:00:00','00:00:00','2001-10-05 05:13:39','2001-10-05 05:13:39','h','h'),(81,5,5,'0000-00-00','0000-00-00','10:34:22','10:34:22','2001-03-25 04:24:51','2001-03-25 04:24:51','q','q'),(82,6,0,'2008-03-04','2008-03-04','10:48:51','10:48:51','2006-08-20 11:54:04','2006-08-20 11:54:04','l','l'),(83,1,0,'2009-05-08','2009-05-08','16:55:06','16:55:06','2003-05-16 18:14:52','2003-05-16 18:14:52','p','p'),(84,1,1,'2005-03-19','2005-03-19','14:46:32','14:46:32','2009-10-24 13:39:35','2009-10-24 13:39:35','t','t'),(85,9,8,'2007-09-14','2007-09-14','16:26:50','16:26:50','2001-08-10 00:00:00','2001-08-10 00:00:00','o','o'),(86,249,190,'2007-02-10','2007-02-10','06:35:32','06:35:32','2001-09-06 10:15:08','2001-09-06 10:15:08','o','o'),(87,3,0,'2000-06-12','2000-06-12','02:28:38','02:28:38','2006-09-27 00:00:00','2006-09-27 00:00:00','p','p'),(88,6,4,'2002-07-06','2002-07-06','00:00:00','00:00:00','2002-02-27 20:12:29','2002-02-27 20:12:29','e','e'),(89,7,2,'2001-02-25','2001-02-25','04:52:29','04:52:29','1900-01-01 00:00:00','1900-01-01 00:00:00','u','u'),(90,5,8,'2000-04-27','2000-04-27','00:00:00','00:00:00','2005-08-18 00:00:00','2005-08-18 00:00:00','z','z'),(91,4,0,'2005-08-23','2005-08-23','09:11:04','09:11:04','2000-10-15 15:52:54','2000-10-15 15:52:54','j','j'),(92,24,137,'2006-01-07','2006-01-07','22:38:18','22:38:18','2007-11-22 13:52:22','2007-11-22 13:52:22','e','e'),(93,3,7,'2007-07-08','2007-07-08','13:23:13','13:23:13','2005-09-20 09:09:48','2005-09-20 09:09:48','k','k'),(94,179,153,'2000-01-06','2000-01-06','15:33:10','15:33:10','2008-01-11 17:35:34','2008-01-11 17:35:34','d','d'),(95,5,7,'0000-00-00','0000-00-00','09:20:10','09:20:10','2002-11-01 00:00:00','2002-11-01 00:00:00','q','q'),(96,7,9,'2002-02-22','2002-02-22','11:19:10','11:19:10','2009-06-27 00:00:00','2009-06-27 00:00:00','j','j'),(97,7,2,'2001-04-17','2001-04-17','08:08:41','08:08:41','2000-09-25 14:11:58','2000-09-25 14:11:58','j','j'),(98,1,0,'2005-06-26','2005-06-26','10:17:36','10:17:36','2004-01-05 04:49:39','2004-01-05 04:49:39','e','e'),(99,5,6,'2008-09-14','2008-09-14','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','f','f'),(100,7,6,'0000-00-00','0000-00-00','01:05:02','01:05:02','2001-01-17 23:16:24','2001-01-17 23:16:24','a','a'),(101,9,2,'2001-12-20','2001-12-20','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','o','o'),(102,5,9,'2001-11-05','2001-11-05','00:00:00','00:00:00','2008-07-15 00:00:00','2008-07-15 00:00:00','y','y'),(103,4,4,'1900-01-01','1900-01-01','15:32:04','15:32:04','2001-03-06 10:00:37','2001-03-06 10:00:37','d','d'),(104,8,7,'2009-02-13','2009-02-13','20:25:36','20:25:36','2004-08-15 00:00:00','2004-08-15 00:00:00','z','z'),(105,8,6,'2008-03-25','2008-03-25','21:33:53','21:33:53','2006-10-12 06:13:06','2006-10-12 06:13:06','s','s');
analyze table t1;
analyze table t2;
EXPLAIN UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
DROP TABLE t1, t2;
SET sql_mode = default;
CREATE TABLE t1 (  id INT NOT NULL PRIMARY KEY,  id2 INT NOT NULL,  id3 INT NOT NULL,  KEY (id2),  KEY (id3),  KEY covering_index (id2,id3)) ENGINE=InnoDB;
INSERT INTO t1 VALUES (0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 3, 3), (4, 4, 4), (5, 5, 5), (6, 6, 6), (7, 7, 7);
INSERT INTO t1 SELECT id + 8, id2 + 8, id3 +8 FROM t1;
INSERT INTO t1 SELECT id + 16, 7, 0 FROM t1;
analyze table t1;
EXPLAIN SELECT count(*) FROM t1 WHERE id2=7 AND id3=0;
DROP TABLE t1;
CREATE TABLE t1 (  c1 VARCHAR(2),  d1 DATETIME NOT NULL);
CREATE TABLE t2 (  pk INTEGER NOT NULL,  c1 VARCHAR(2),  c2 VARCHAR(2),  PRIMARY KEY (pk),  KEY (c1),  KEY (c2)) PARTITION BY KEY(pk) PARTITIONS 2;
SELECT c1FROM t1WHERE c1 IN  SELECT t2.c1  FROM t2  WHERE t2.c1 = 'f'     OR t2.c2 < 'y'AND t1.d1 IS NULL;
DROP TABLE t1, t2;
    eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t0, t1, t2, t3, t4;
create table t0  key1 int not null,  key2 int not null,  key3 int not null,  key4 int not null,  key5 int not null,  key6 int not null,  key7 int not null,  key8 int not null,  INDEX i1(key1),  INDEX i2(key2),  INDEX i3(key3),  INDEX i4(key4),  INDEX i5(key5),  INDEX i6(key6),  INDEX i7(key7),  INDEX i8(key8));
insert into t0 values (1,1,1,1,1,1,1,1023),(2,2,2,2,2,2,2,1022);
set @d=2;
while ($1)  eval insert into t0 select key1+@d, key2+@d, key3+@d, key4+@d, key5+@d,                             key6+@d, key7+@d, key8-@d from t0;
  eval set @d=@d*2;
  dec $1;
analyze table t0;
explain select * from t0 where key1 < 3 or key1 > 1020;
explainselect * from t0 where key1 < 3 or key2 > 1020;
select * from t0 where key1 < 3 or key2 > 1020;
  explain select * from t0 where key1 < 2 or key2 <3;
  explainselect * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
select * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
  explain select * from t0 ignore index (i2) where key1 < 3 or key2 <4;
  explain select * from t0 where (key1 < 3 or key2 <4) and key3 = 50;
  explain select * from t0 use index (i1,i2) where (key1 < 2 or key2 <3) and key3 = 50;
  explain select * from t0 where (key1 > 1 or key2  > 2);
  explain select * from t0 force index (i1,i2) where (key1 > 1 or key2  > 2);
  explain  select * from t0 where key1<2 or key2<3 or (key1>5 and key1<7) or  (key1>10 and key1<12) or (key2>100 and key2<102);
  explain select * from t0 where key2 = 45 or key1 <=> null;
  explain select * from t0 where key2 = 45 or key1 is not null;
  explain select * from t0 where key2 = 45 or key1 is null;
  explain select * from t0 where key2=10 or key3=3 or key4 <=> null;
  explain select * from t0 where key2=10 or key3=3 or key4 is null;
  explain select key1 from t0 where (key1 <=> null) or (key2 < 2) or                                   (key3=10) or (key4 <=> null);
  explain select key1 from t0 where (key1 <=> null) or (key1 < 5) or                                   (key3=10) or (key4 <=> null);
  explain select * from t0 where  (key1 < 2 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 5 or key6 < 5);
  explainselect * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
select * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
  explain select * from t0 where  (key1 < 3 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 2 or key6 < 2);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 70);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 1000);
  explain select * from t0 where    ((key1 < 3 or key2 < 3) and (key2 <4 or key3 < 3))  or    key2 > 4;
  explain select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
  explain select * from t0 where    ((key1 < 2 or key2 < 2) and (key3 <4 or key5 < 3))  or    ((key5 < 3 or key6 < 3) and (key7 <3 or key8 < 3));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key7 <5 or key8 < 3) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 4))  or    ((key3 <4 or key5 < 2) and (key5 < 5 or key6 < 3));
  explain select * from t0 where    ((key3 <4 or key5 < 3) and (key1 < 3 or key2 < 3))  or    (((key3 <5 and key7 < 5) or key5 < 2) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >5 or key5 < 2) and (key5 < 5 or key6 < 6));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key3 >4 or key5 < 2) and (key5 < 5 or key6 < 4));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >=5 or key5 < 2) and (key5 < 5 or key6 < 6));
select * from t0 where key1 < 3 or key8 < 2 order by key1;
  explainselect * from t0 where key1 < 3 or key8 < 2 order by key1;
create table t2 like t0;
insert into t2 select * from t0;
alter table t2 add index i1_3(key1, key3);
alter table t2 add index i2_3(key2, key3);
alter table t2 drop index i1;
alter table t2 drop index i2;
alter table t2 add index i321(key3, key2, key1);
analyze table t2;
  explain select key3 from t2 where key1 = 100 or key2 = 100;
  explain select key3 from t2 where key1 <100 or key2 < 100;
  explain select key7 from t2 where key1 <100 or key2 < 100;
create table t4 (  key1a int not null,  key1b int not null,  key2  int not null,  key2_1 int not null,  key2_2 int not null,  key3  int not null,  index i1a (key1a, key1b),  index i1b (key1b, key1a),  index i2_1(key2, key2_1),  index i2_2(key2, key2_1));
insert into t4 select key1,key1,key1 div 10, key1 % 10, key1 % 10, key1 from t0;
analyze table t4;
select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key3 = 5);
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key2_2 = 5);
  explain select * from t4 where key2_1 = 1 or key2_2 = 5;
create table t1 like t0;
insert into t1 select * from t0;
analyze table t1;
explain select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
explainselect * from t0,t1 where (t0.key1=t1.key1) and ( t0.key1=3 or t0.key2=4);
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2=4) and t1.key1<200;
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2<4) and t1.key1=2;
explain select * from t0,t1 where t0.key1 = 5 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
  explain select * from t0,t1 where t0.key1 < 3 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
explain select * from t1 where key1=3 or key2=4  union select * from t1 where key1<4 or key3=5;
explain select * from (select * from t1 where key1 = 3 or key2 =3) as z where key8 >5;
create table t3 like t0;
insert into t3 select * from t0;
alter table t3 add key9 int not null, add index i9(key9);
alter table t3 add keyA int not null, add index iA(keyA);
alter table t3 add keyB int not null, add index iB(keyB);
alter table t3 add keyC int not null, add index iC(keyC);
update t3 set key9=key1,keyA=key1,keyB=key1,keyC=key1;
analyze table t3;
explain select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
explain select * from t0 where key1 < 3 or key2 < 4;
select * from t0 where key1 < 3 or key2 < 4;
update t0 set key8=123 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
delete from t0 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
select count(*) from t0;
drop table t4;
create table t4 (a int);
insert into t4 values (1),(4),(3);
analyze table t4;
set @save_join_buffer_size=@@join_buffer_size;
set join_buffer_size= 4096;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
update t0 set key1=1;
analyze table t0;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
alter table t0 add filler1 char(200), add filler2 char(200), add filler3 char(200);
update t0 set key2=1, key3=1, key4=1, key5=1,key6=1,key7=1 where key7 < 500;
analyze table t0;
  # Too unstable for innodb      explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5)   from t0 as a, t0 as b   where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)    and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a, t0 as b where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)  and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
set join_buffer_size= @save_join_buffer_size;
drop table t0, t1, t2, t3, t4;
CREATE TABLE t1 (  cola char(3) not null, colb char(3) not null,  filler char(200),  key(cola), key(colb));
INSERT INTO t1 VALUES ('foo','bar', 'ZZ'),('fuz','baz', 'ZZ');
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola = 'foo';
  dec $1;
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola <> 'foo';
  dec $1;
OPTIMIZE TABLE t1;
select count(*) from t1;
analyze table t1;
  explain select * from t1 WHERE cola = 'foo' AND colb = 'bar';
  explain select * from t1 force index(cola,colb) WHERE cola = 'foo' AND colb = 'bar';
drop table t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b));
insert into t1 select @v:= A.a, @v, 't1', 'filler2' from t0 A, t0 B, t0 C;
create table t2 like t1;
create table t3 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b)) engine=merge union=(t1,t2);
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
explain select * from t1 where a=1 and b=1;
explain select * from t3 where a=1 and b=1;
drop table t3;
drop table t0, t1, t2;
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES(1);
CREATE TABLE t2(a INT, b INT, dummy CHAR(16) DEFAULT '', KEY(a), KEY(b));
INSERT INTO t2(a,b) VALUES(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(1,2);
LOCK TABLES t1 WRITE, t2 WRITE;
INSERT INTO t2(a,b) VALUES(1,2);
SELECT t2.a FROM t1,t2 WHERE t2.b=2 AND t2.a=1;
UNLOCK TABLES;
DROP TABLE t1, t2;
CREATE TABLE `t1` (  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY `a` (`a`),  KEY `b` (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t1 values(0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (10, 'filler', 10), (11, 'filler', 11), (12, 'filler', 12), (13, 'filler', 13),(14, 'filler', 14), (15, 'filler', 15), (16, 'filler', 16), (17, 'filler', 17), (18, 'filler', 18), (19, 'filler', 19), (4, '5      ', 0), (5, '4      ', 0), (4, '4      ', 0), (4, 'qq     ', 5), (5, 'qq     ', 4), (4, 'zz     ', 4);
create table t2(  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY USING BTREE (`a`),  KEY USING BTREE (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t2 select * from t1;
analyze table t1;
analyze table t2;
explain select * from t1 where a=4 or b=4;
select * from t1 where a=4 or b=4;
select * from t1 ignore index(a,b) where a=4 or b=4;
explain select * from t2 where a=4 or b=4;
select * from t2 where a=4 or b=4;
drop table t1, t2;
CREATE TABLE t1 (a varchar(8), b set('a','b','c','d','e','f','g','h'),                 KEY b(b), KEY a(a));
INSERT INTO t1 VALUES ('y',''), ('z','');
SELECT b,a from t1 WHERE (b!='c' AND b!='f' && b!='h') OR   (a='pure-S') OR (a='DE80337a') OR (a='DE80799');
DROP TABLE t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (a int);
insert into t1 values (1),(2);
create table t2(a int, b int);
insert into t2 values (1,1), (2, 1000);
create table t3 (a int, b int, filler char(100), key(a), key(b));
insert into t3 select 1000, 1000,'filler' from t0 A, t0 B, t0 C; insert into t3 values (1,1,'data');
insert into t3 values (1,1,'data');
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
  explain select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
drop table t0, t1, t2, t3;
CREATE TABLE t1(a VARCHAR(128),b VARCHAR(128),KEY(A),KEY(B)) charset latin1;
INSERT INTO t1 VALUES (REPEAT('a',128),REPEAT('b',128));
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
analyze table t1;
SET SESSION sort_buffer_size=1;
  EXPLAIN SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SET SESSION sort_buffer_size=DEFAULT;
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t0,t1,t2;
create table t1  /* Field names reflect value(rowid) distribution, st=STairs, swt= SaWTooth */  st_a int not null default 0,  swt1a int not null default 0,  swt2a int not null default 0,  st_b int not null default 0,  swt1b int not null default 0,  swt2b int not null default 0,  /* fields/keys for row retrieval tests */  key1 int,  key2 int,  key3 int,  key4 int,  /* make rows much bigger then keys */  filler1 char (200),  filler2 char (200),  filler3 char (200),  filler4 char (200),  filler5 char (200),  filler6 char (200),  /* order of keys is important */  key sta_swt12a(st_a,swt1a,swt2a),  key sta_swt1a(st_a,swt1a),  key sta_swt2a(st_a,swt2a),  key sta_swt21a(st_a,swt2a,swt1a),  key st_a(st_a),  key stb_swt1a_2b(st_b,swt1b,swt2a),  key stb_swt1b(st_b,swt1b),  key st_b(st_b),  key(key1),  key(key2),  key(key3),  key(key4)) ;
create table t0 as select * from t1;
while ($cnt)  eval insert into t0 values (1, 2, 3, 1, 2, 3, 0, 0, 0, 0, 'data1', 'data2', 'data3', 'data4', 'data5', 'data6');
  dec $cnt;
alter table t1 disable keys;
while ($1)  let $2=4;
  while ($2)  {    let $3=4;
    while ($3)    {      eval insert into t1 select $1, $2, $3, $1 ,$2, $3, key1, key2, key3, key4, filler1, filler2, filler3, filler4, filler5, filler6 from t0;
      dec $3;
    }    dec $2;
  } dec $1;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 100, 100,'key1-key2-key3-key4');
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (100, -1, 100, -1,'key1-key3');
  dec $cnt;
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (-1, 100, -1, 100,'key2-key4');
  dec $cnt;
alter table t1 enable keys;
select count(*) from t1;
analyze table t0;
analyze table t1;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain format=json select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, -1, -1, 'key1-key2');
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 100, 100, 'key4-key3');
analyze table t1;
explain select key1,key2,filler1 from t1 where key1=100 and key2=100;
select key1,key2,filler1 from t1 where key1=100 and key2=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
insert into t1 (key1,key2,key3,key4,filler1) values (101,101,101,101, 'key1234-101');
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2, filler1 from t1 where key1=100 and key2=100;
update t1 set filler1='to be deleted' where key1=100 and key2=100;
update t1 set key1=200,key2=200 where key1=100 and key2=100;
delete from t1 where key1=200 and key2=200;
analyze table t1;
select key1,key2,filler1 from t1 where key2=100 and key2=200;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
delete from t1 where key3=100 and key4=100;
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-1');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-2');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, -1, 200,'key4');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 200, -1,'key3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
  # Too unstable on InnoDB  explain select * from t1 where st_a=1 and st_b=1;
  explain select st_a,st_b from t1 where st_a=1 and st_b=1;
  explain select st_a from t1 ignore index (st_a) where st_a=1 and st_b=1;
explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1;
explain select * from t1 where st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b, stb_swt1b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
drop table t0,t1;
create table t2 (  a char(10),  b char(10),  filler1 char(255),  filler2 char(255),  key(a(5)),  key(b(5)));
while ($1)  eval insert into t2 values (repeat(char($1+64), 8),repeat(char($1+64), 8),'filler1', 'filler2');
  dec $1;
insert into t2 select * from t2;
insert into t2 select * from t2;
select count(a) from t2 where a='BBBBBBBB';
select count(a) from t2 where b='BBBBBBBB';
analyze table t2;
explain select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 ignore index(a,b) where a='AAAAAAAA' and b='AAAAAAAA';
insert into t2 values ('ab', 'ab', 'uh', 'oh');
analyze table t2;
explain select a from t2 where a='ab';
drop table t2;
CREATE TABLE t1(c1 INT, c2 INT DEFAULT 0, c3 CHAR(255) DEFAULT '',KEY(c1), KEY(c2), KEY(c3)) charset latin1;
INSERT INTO t1(c1) VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0);
INSERT INTO t1 VALUES(0,0,0);
CREATE TABLE t2(c1 int);
INSERT INTO t2 VALUES(1);
DELETE t1 FROM t1,t2 WHERE t1.c1=0 AND t1.c2=0;
SELECT * FROM t1;
DROP TABLE t1,t2;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1,t2;
create table t1  key1 int not null,  key2 int not null,  INDEX i1(key1),  INDEX i2(key2)) charset latin1;
while ($1)  eval insert into t1 values (200-$1, $1);
  dec $1;
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
alter table t1 add str1 char (255) not null,                add zeroval int not null default 0,                add str2 char (255) not null,                add str3 char (255) not null;
update t1 set str1='aaa', str2='bbb', str3=concat(key2, '-', key1 div 2, '_' ,if(key1 mod 2 = 0, 'a', 'A'));
alter table t1 add primary key (str1, zeroval, str2, str3);
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
drop table t1;
create table t1 (  pk    integer not null auto_increment primary key,  key1  integer,  key2  integer not null,  filler char  (200),  index (key1),  index (key2)) charset latin1;
show warnings;
while ($1)  eval insert into t1 (key1, key2, filler) values ($1/4, $1/8, 'filler-data');
  dec $1;
analyze table t1;
explain select pk from t1 where key1 = 1 and key2 = 1;
select pk from t1 where key2 = 1 and key1 = 1;
select pk from t1 ignore index(key1,key2) where key2 = 1 and key1 = 1;
drop table t1;
create table t1 (  pk int primary key auto_increment,  key1a  int,  key2a  int,  key1b  int,  key2b  int,  dummy1 int,  dummy2 int,  dummy3 int,  dummy4 int,  key3a  int,  key3b  int,  filler1 char (200),  index i1(key1a, key1b),  index i2(key2a, key2b),  index i3(key3a, key3b));
create table t2 (a int);
insert into t2 values (0),(1),(2),(3),(4),(NULL);
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select A.a, B.a, C.a, D.a, C.a, D.a from t2 A,t2 B,t2 C, t2 D;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
analyze table t1;
select count(*) from t1;
analyze table t2;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and  key2a = 2 and key2b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key2a = 2 and key2b is null;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
drop table t1,t2;
create table t1 (  id1 int,  id2 date ,  index idx2 (id1,id2),  index idx1 (id2));
insert into t1 values(1,'20040101'), (2,'20040102');
select * from t1  where id1 = 1  and id2= '20040101';
drop table t1;
drop view if exists v1;
CREATE TABLE t1 (  `oid` int(11) unsigned NOT NULL auto_increment,  `fk_bbk_niederlassung` int(11) unsigned NOT NULL,  `fk_wochentag` int(11) unsigned NOT NULL,  `uhrzeit_von` time NOT NULL COMMENT 'HH:MM',  `uhrzeit_bis` time NOT NULL COMMENT 'HH:MM',  `geloescht` tinyint(4) NOT NULL,  `version` int(5) NOT NULL,  PRIMARY KEY  (`oid`),  KEY `fk_bbk_niederlassung` (`fk_bbk_niederlassung`),  KEY `fk_wochentag` (`fk_wochentag`),  KEY `ix_version` (`version`)) DEFAULT CHARSET=latin1;
insert  into t1 values(1, 38, 1, '08:00:00', '13:00:00', 0, 1),(2, 38, 2, '08:00:00', '13:00:00', 0, 1),(3, 38, 3, '08:00:00', '13:00:00', 0, 1),(4, 38, 4, '08:00:00', '13:00:00', 0, 1),(5, 38, 5, '08:00:00', '13:00:00', 0, 1),(6, 38, 5, '08:00:00', '13:00:00', 1, 2),(7, 38, 3, '08:00:00', '13:00:00', 1, 2),(8, 38, 1, '08:00:00', '13:00:00', 1, 2),(9, 38, 2, '08:00:00', '13:00:00', 1, 2),(10, 38, 4, '08:00:00', '13:00:00', 1, 2),(11, 38, 1, '08:00:00', '13:00:00', 0, 3),(12, 38, 2, '08:00:00', '13:00:00', 0, 3),(13, 38, 3, '08:00:00', '13:00:00', 0, 3),(14, 38, 4, '08:00:00', '13:00:00', 0, 3),(15, 38, 5, '08:00:00', '13:00:00', 0, 3),(16, 38, 4, '08:00:00', '13:00:00', 0, 4),(17, 38, 5, '08:00:00', '13:00:00', 0, 4),(18, 38, 1, '08:00:00', '13:00:00', 0, 4),(19, 38, 2, '08:00:00', '13:00:00', 0, 4),(20, 38, 3, '08:00:00', '13:00:00', 0, 4),(21, 7, 1, '08:00:00', '13:00:00', 0, 1),(22, 7, 2, '08:00:00', '13:00:00', 0, 1),(23, 7, 3, '08:00:00', '13:00:00', 0, 1),(24, 7, 4, '08:00:00', '13:00:00', 0, 1),(25, 7, 5, '08:00:00', '13:00:00', 0, 1);
create view v1 asselect  zeit1.oid AS oid,  zeit1.fk_bbk_niederlassung AS fk_bbk_niederlassung,  zeit1.fk_wochentag AS fk_wochentag,  zeit1.uhrzeit_von AS uhrzeit_von,  zeit1.uhrzeit_bis AS uhrzeit_bis,  zeit1.geloescht AS geloescht,  zeit1.version AS versionfrom  t1 zeit1where(zeit1.version =  (select max(zeit2.version) AS `max(version)`   from t1 zeit2   where     ((zeit1.fk_bbk_niederlassung = zeit2.fk_bbk_niederlassung) and      (zeit1.fk_wochentag = zeit2.fk_wochentag) and      (zeit1.uhrzeit_von = zeit2.uhrzeit_von) and      (zeit1.uhrzeit_bis = zeit2.uhrzeit_bis)     )  )and (zeit1.geloescht = 0);
select * from v1 where oid = 21;
drop view v1;
drop table t1;
CREATE TABLE t1(  t_cpac varchar(2) NOT NULL,  t_vers varchar(4) NOT NULL,  t_rele varchar(2) NOT NULL,  t_cust varchar(4) NOT NULL,  filler1 char(250) default NULL,  filler2 char(250) default NULL,  PRIMARY KEY (t_cpac,t_vers,t_rele,t_cust),  UNIQUE KEY IX_4 (t_cust,t_cpac,t_vers,t_rele),  KEY IX_5 (t_vers,t_rele,t_cust)) charset latin1;
insert into t1 values('tm','2.5 ','a ','    ','',''), ('tm','2.5U','a ','stnd','',''),('da','3.3 ','b ','    ','',''), ('da','3.3U','b ','stnd','',''),('tl','7.6 ','a ','    ','',''), ('tt','7.6 ','a ','    ','',''),('bc','B61 ','a ','    ','',''), ('bp','B61 ','a ','    ','',''),('ca','B61 ','a ','    ','',''), ('ci','B61 ','a ','    ','',''),('cp','B61 ','a ','    ','',''), ('dm','B61 ','a ','    ','',''),('ec','B61 ','a ','    ','',''), ('ed','B61 ','a ','    ','',''),('fm','B61 ','a ','    ','',''), ('nt','B61 ','a ','    ','',''),('qm','B61 ','a ','    ','',''), ('tc','B61 ','a ','    ','',''),('td','B61 ','a ','    ','',''), ('tf','B61 ','a ','    ','',''),('tg','B61 ','a ','    ','',''), ('ti','B61 ','a ','    ','',''),('tp','B61 ','a ','    ','',''), ('ts','B61 ','a ','    ','',''),('wh','B61 ','a ','    ','',''), ('bc','B61U','a ','stnd','',''),('bp','B61U','a ','stnd','',''), ('ca','B61U','a ','stnd','',''),('ci','B61U','a ','stnd','',''), ('cp','B61U','a ','stnd','',''),('dm','B61U','a ','stnd','',''), ('ec','B61U','a ','stnd','',''),('fm','B61U','a ','stnd','',''), ('nt','B61U','a ','stnd','',''),('qm','B61U','a ','stnd','',''), ('tc','B61U','a ','stnd','',''),('td','B61U','a ','stnd','',''), ('tf','B61U','a ','stnd','',''),('tg','B61U','a ','stnd','',''), ('ti','B61U','a ','stnd','',''),('tp','B61U','a ','stnd','',''), ('ts','B61U','a ','stnd','',''),('wh','B61U','a ','stnd','','');
show create table t1;
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6';
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6'  and t_rele='a' and t_cust = ' ';
drop table t1;
create table t1 (  pk int(11) not null auto_increment,  a int(11) not null default '0',  b int(11) not null default '0',  c int(11) not null default '0',  filler1 datetime, filler2 varchar(15),  filler3 longtext,  kp1 varchar(4), kp2 varchar(7),  kp3 varchar(2), kp4 varchar(4),  kp5 varchar(7),  filler4 char(1),  primary key (pk),  key idx1(a,b,c),  key idx2(c),  key idx3(kp1,kp2,kp3,kp4,kp5)) default charset=latin1;
set @fill= uncompress(unhex(concat('F91D0000789CDD993D6FDB301086F7FE0A6D4E0105B8E3F1335D5BA028DA0EEDE28E1D320408','52A0713BF4D7571FB62C51A475924839080307B603E77DEE787C8FA41F9E9EEF7F1F8A87A7C3','AFE280C5DF9F8F7FEE9F8B1B2CB114D6902E918455245DB91300FA16E42D5201FA4EE29DA05D','B9FB3718A33718A3FA8C30AEFAFDE1F317D016AA67BA7A60FDE45BF5F8BA7B5BDE8812AA9F1A','069DB03C9804346644F3A3A6A1338DB572756A3C4D1BCC804CABF912C654AE9BB855A2B85962','3A479259CAE6A86C0411D01AE5483581EDCBD9A39C45252D532E533979EB9F82E971D979BDB4','8531105670740AFBFD1E34AAB0029E4AD0A1D46A6D0946A21A16038A5CD965CD2D524673F712','20C304477315CE18405EAF9BD0AFFEAC74FDA14F1FBF5BD34C769D73FBBEDF4750ADD4E5A99C','5C8DC04934AFA275D483D536D174C11B12AF27F8F888B41B6FC9DBA569E1FD7BD72D698130B7','91B23A98803512B3D31881E8DCDA2AC1754E3644C4BB3A8466750B911681274A39E35E8624B7','444A42AC1213F354758E3CF1A4CDD5A688C767CF1B11ABC5867CB15D8A18E0B91E9EC275BB94','58F33C2936F64690D55BC29E4A293D95A798D84217736CEAAA538CE1354269EE2162053FBC66','496D90CB53323CB279D3A6AF651B4B22B9E430743D83BE48E995A09D4FC9871C22D8D189B945','706911BCB8C3C774B9C08D2FC6ED853ADACA37A14A4CB2E027630E5B80ECACD939431B1CDF62','7D71487536EA2C678F59685E91F4B6C144BCCB94C1EBA9FA6F5552DDCA4E4539BE326A2720CB','45ED028EB3616AC93C46E775FEA9FA6DA7CFCEC6DEBA5FCD1F915EED4D983BDDB881528AD9AB','43C1576F29AAB35BDFBC21D422F52B307D350589D45225A887AC46C8EDD72D99EC3ED2E1BCEF','7AF26FC4C74097B6768A5EDAFA660CC64278F7E63F99AC954B')));
prepare x from @fill;
execute x;
deallocate prepare x;
set @fill=NULL;
SELECT COUNT(*) FROM t1 WHERE b = 0 AND a = 0 AND c = 13286427 AND kp1='279' AND kp2='ELM0678' AND kp3='6' AND kp4='10' AND  kp5 = 'R        ';
drop table t1;
create table t1  key1 int not null,   key2 int not null default 0,  key3 int not null default 0);
insert into t1(key1) values (1),(2),(3),(4),(5),(6),(7),(8);
set @d=8;
while ($1)  eval insert into t1 (key1) select key1+@d from t1;
  eval set @d=@d*2;
  dec $1;
alter table t1 add index i2(key2);
alter table t1 add index i3(key3);
update t1 set key2=key1,key3=key1;
analyze table t1;
  explain select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
drop table t1;
CREATE TABLE t1 (  a INT,  b INT,  c INT,  d INT,  PRIMARY KEY (a),  KEY (c),  KEY bd (b,d));
INSERT INTO t1 VALUES(1, 0, 1, 0),(2, 1, 1, 1),(3, 1, 1, 1),(4, 0, 1, 1);
analyze table t1;
EXPLAINSELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
CREATE TABLE t2 ( a INT )SELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1( a INT, b INT, KEY(a), KEY(b) );
INSERT INTO t1 VALUES (1, 2), (1, 2), (1, 2), (1, 2);
SELECT * FROM t1 FORCE INDEX(a, b) WHERE a = 1 AND b = 2;
DROP TABLE t1;
CREATE TABLE t1 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b INT);
INSERT INTO t1 (b) VALUES (1);
UPDATE t1 SET b = 2 WHERE a = 1;
SELECT * FROM t1;
CREATE TABLE t2 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(1) );
INSERT INTO t2 (b) VALUES ('a');
UPDATE t2 SET b = 'b' WHERE a = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 (  pk INT NOT NULL,  col_int_key INT NOT NULL,  col_varchar_key VARCHAR(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES (1,1,'a'), (2,2,'b');
analyze table t1;
EXPLAINSELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
SELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1;
create table t1 (  pk int primary key,  key1 int,  key2 int,  filler char(200),  filler2 char(200),  index(key1),  index(key2));
while ($1)  eval insert into t1 values($1, $1, $1, 'filler-data','filler-data-2');
  dec $1;
select * from t1 where (key1 >= 2 and key1 <= 10) or (pk >= 4 and pk <=8 );
set @maxv=1000;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1=18 or key1=60;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1 < 3 or key1 > @maxv-11;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or  (key1 < 5) or (key1 > 10 and key1 < 15) or (key1 >= 50 and key1 < 55 ) or (key1 > @maxv-10);
select * from t1 where  (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 )  or  (key1 < 5) or (key1 > @maxv-10);
drop table t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t1;
create table t1  pk1 int not null,  pk2 int not null,  key1 int not null,  key2 int not null,  pktail1ok  int not null,  pktail2ok  int not null,  pktail3bad int not null,  pktail4bad int not null,  pktail5bad int not null,  pk2copy int not null,  badkey  int not null,  filler1 char (200),  filler2 char (200),  key (key1),  key (key2),  /* keys with tails from CPK members */  key (pktail1ok, pk1),  key (pktail2ok, pk1, pk2),  key (pktail3bad, pk2, pk1),  key (pktail4bad, pk1, pk2copy),  key (pktail5bad, pk1, pk2, pk2copy),  primary key (pk1, pk2));
set autocommit=0;
while ($1)  eval insert into t1 values ($1 div 10,$1 mod 100,   $1/100,$1/100,   $1/100,$1/100,$1/100,$1/100,$1/100, $1 mod 100, $1/1000,'filler-data-$1','filler2');
  dec $1;
set autocommit=1;
analyze table t1;
explain select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
explain select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
explain select * from t1 where badkey=1 and key1=10;
explain select * from t1 where pk1 < 7500 and key1 = 10;
explain select * from t1 where pktail1ok=1 and key1=10;
explain select * from t1 where pktail2ok=1 and key1=10;
explain select * from t1 where (pktail2ok=1 and pk1< 50000) or key1=10;
explain select * from t1 where pktail3bad=1 and key1=10;
explain select * from t1 where pktail4bad=1 and key1=10;
explain select * from t1 where pktail5bad=1 and key1=10;
explain select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
drop table t1;
create table t1  RUNID varchar(22),  SUBMITNR varchar(5),  ORDERNR char(1),  PROGRAMM varchar(8),  TESTID varchar(4),  UCCHECK char(1),  ETEXT varchar(80),  ETEXT_TYPE char(1),  INFO char(1),  SEVERITY tinyint(3),  TADIRFLAG char(1),  PRIMARY KEY  (RUNID,SUBMITNR,ORDERNR,PROGRAMM,TESTID,UCCHECK),  KEY `TVERM~KEY`  (PROGRAMM,TESTID,UCCHECK)) DEFAULT CHARSET=latin1;
update t1 set `ETEXT` = '', `ETEXT_TYPE`='', `INFO`='', `SEVERITY`='', `TADIRFLAG`=''WHERE `RUNID`= '' AND `SUBMITNR`= '' AND `ORDERNR`='' AND `PROGRAMM`='' AND `TESTID`='' AND `UCCHECK`='';
drop table t1;
CREATE TABLE t1 (f1 INT, PRIMARY KEY (f1));
INSERT INTO t1 VALUES (2);
CREATE TABLE t2 (f1 INT, f2 INT, f3 char(1),                 PRIMARY KEY (f1), KEY (f2), KEY (f3) );
INSERT INTO t2 VALUES (1, 1, 'h'), (2, 3, 'h'), (3, 2, ''), (4, 2, '');
SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
analyze table t1;
analyze table t2;
EXPLAIN SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
DROP TABLE t1,t2;
SET sql_mode = '';
CREATE TABLE t1 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES(1,2,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','2','2'),(109,25,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','1','7');
CREATE TABLE t2 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t2 VALUES(10,2,4,'2000-04-16','2000-04-16','17:02:34','17:02:34','2009-08-04 02:49:10','2009-08-04 02:49:10','u','u'),(11,6,5,'1900-01-01','1900-01-01','12:31:32','12:31:32','2004-05-24 22:22:06','2004-05-24 22:22:06','b','b'),(12,6,0,'2005-05-14','2005-05-14','16:49:31','16:49:31','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(13,94,140,'2001-05-23','2001-05-23','00:00:00','00:00:00','2003-07-28 07:31:49','2003-07-28 07:31:49','f','f'),(14,10,230,'2000-06-04','2000-06-04','20:23:27','20:23:27','2000-02-04 21:03:36','2000-02-04 21:03:36','g','g'),(15,8,2,'1900-01-01','1900-01-01','10:31:09','10:31:09','2005-05-22 11:48:12','2005-05-22 11:48:12','q','q'),(16,43,110,'2008-03-18','2008-03-18','09:58:35','09:58:35','1900-01-01 00:00:00','1900-01-01 00:00:00','n','n'),(17,1,8,'2007-02-25','2007-02-25','05:39:28','05:39:28','2005-05-06 00:53:37','2005-05-06 00:53:37','c','c'),(18,6,5,'2001-11-22','2001-11-22','00:00:00','00:00:00','2002-08-08 23:43:46','2002-08-08 23:43:46','x','x'),(19,5,8,'0000-00-00','0000-00-00','00:00:00','00:00:00','2009-10-26 04:07:22','2009-10-26 04:07:22','n','n'),(20,1,5,'2001-08-07','2001-08-07','14:06:09','14:06:09','2005-03-12 22:55:23','2005-03-12 22:55:23','r','r'),(21,195,70,'2000-08-03','2000-08-03','00:00:00','00:00:00','2008-05-03 22:34:19','2008-05-03 22:34:19','j','j'),(22,1,0,'2007-04-21','2007-04-21','17:43:27','17:43:27','2001-10-12 13:30:14','2001-10-12 13:30:14','l','l'),(23,0,9,'2000-06-13','2000-06-13','12:23:15','12:23:15','2007-10-07 03:53:06','2007-10-07 03:53:06','h','h'),(24,7,3,'0000-00-00','0000-00-00','19:35:06','19:35:06','2005-12-27 20:58:56','2005-12-27 20:58:56','z','z'),(25,1,9,'2004-07-08','2004-07-08','10:16:08','10:16:08','2009-05-16 18:44:21','2009-05-16 18:44:21','z','z'),(26,4,3,'2003-06-01','2003-06-01','00:00:00','00:00:00','2008-10-02 00:00:00','2008-10-02 00:00:00','d','d'),(27,76,22,'0000-00-00','0000-00-00','16:51:15','16:51:15','2001-03-20 00:00:00','2001-03-20 00:00:00','l','l'),(28,6,1,'1900-01-01','1900-01-01','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(29,7,3,'2007-01-22','2007-01-22','00:00:00','00:00:00','2000-01-10 23:19:37','2000-01-10 23:19:37','k','k'),(30,6,3,'2006-10-19','2006-10-19','21:46:20','21:46:20','2008-06-21 16:56:37','2008-06-21 16:56:37','l','l'),(31,6,8,'2005-02-27','2005-02-27','00:00:00','00:00:00','2002-03-01 00:34:37','2002-03-01 00:34:37','t','t'),(32,1,4,'2001-09-10','2001-09-10','03:34:16','03:34:16','2003-02-05 18:41:00','2003-02-05 18:41:00','n','n'),(33,5,1,'2002-09-06','2002-09-06','11:25:31','11:25:31','2004-01-18 13:28:24','2004-01-18 13:28:24','z','z'),(34,2,3,'2005-01-15','2005-01-15','17:00:53','17:00:53','2002-12-03 01:06:27','2002-12-03 01:06:27','f','f'),(35,1,3,'1900-01-01','1900-01-01','23:32:47','23:32:47','2006-03-03 02:58:59','2006-03-03 02:58:59','q','q'),(36,185,63,'2006-12-20','2006-12-20','00:00:00','00:00:00','2002-07-01 10:13:39','2002-07-01 10:13:39','l','l'),(37,3,4,'2002-04-17','2002-04-17','12:15:05','12:15:05','2009-01-13 20:47:01','2009-01-13 20:47:01','a','a'),(38,7,8,'2004-01-10','2004-01-10','22:26:38','22:26:38','2008-07-18 13:35:29','2008-07-18 13:35:29','c','c'),(39,8,6,'2008-03-24','2008-03-24','00:00:00','00:00:00','2001-03-15 02:44:57','2001-03-15 02:44:57','c','c'),(40,1,4,'2007-08-18','2007-08-18','00:00:00','00:00:00','2000-06-25 14:03:55','2000-06-25 14:03:55','i','i'),(41,3,9,'2005-07-22','2005-07-22','00:00:00','00:00:00','2005-12-13 21:32:03','2005-12-13 21:32:03','r','r'),(42,8,2,'2008-07-12','2008-07-12','08:59:37','08:59:37','2009-03-18 19:27:29','2009-03-18 19:27:29','g','g'),(43,159,118,'2003-08-18','2003-08-18','07:19:50','07:19:50','2004-04-10 02:50:59','2004-04-10 02:50:59','l','l'),(44,112,10,'2002-02-26','2002-02-26','03:51:46','03:51:46','2008-09-27 06:49:19','2008-09-27 06:49:19','w','w'),(45,0,9,'2007-07-26','2007-07-26','15:57:32','15:57:32','2006-02-04 15:10:41','2006-02-04 15:10:41','b','b'),(46,2,9,'1900-01-01','1900-01-01','02:57:08','02:57:08','2004-01-04 18:45:14','2004-01-04 18:45:14','i','i'),(47,1,1,'2000-07-26','2000-07-26','00:21:15','00:21:15','2009-04-04 02:52:09','2009-04-04 02:52:09','o','o'),(48,7,6,'2005-03-06','2005-03-06','23:35:02','23:35:02','2001-03-20 12:50:17','2001-03-20 12:50:17','f','f'),(49,5,2,'2005-04-16','2005-04-16','09:21:51','09:21:51','2001-11-15 10:51:46','2001-11-15 10:51:46','a','a'),(50,2,2,'2004-04-09','2004-04-09','19:21:02','19:21:02','2007-08-13 00:00:00','2007-08-13 00:00:00','j','j'),(51,5,3,'2003-05-13','2003-05-13','03:16:22','03:16:22','1900-01-01 00:00:00','1900-01-01 00:00:00','k','k'),(52,5,0,'0000-00-00','0000-00-00','00:00:00','00:00:00','2008-01-24 08:37:15','2008-01-24 08:37:15','x','x'),(53,2,8,'2000-05-27','2000-05-27','18:19:51','18:19:51','2003-03-02 10:18:02','2003-03-02 10:18:02','r','r'),(54,2,5,'2004-07-04','2004-07-04','01:42:17','01:42:17','2003-04-25 07:35:13','2003-04-25 07:35:13','t','t'),(55,9,0,'2006-03-07','2006-03-07','00:00:00','00:00:00','2006-07-11 23:31:13','2006-07-11 23:31:13','p','p'),(56,3,1,'2002-08-17','2002-08-17','20:32:51','20:32:51','2009-08-08 16:55:59','2009-08-08 16:55:59','g','g'),(57,2,9,'2003-06-08','2003-06-08','10:04:19','10:04:19','1900-01-01 00:00:00','1900-01-01 00:00:00','q','q'),(58,7,4,'1900-01-01','1900-01-01','06:39:26','06:39:26','2000-12-22 10:27:41','2000-12-22 10:27:41','m','m'),(59,4,7,'2003-10-09','2003-10-09','15:48:26','15:48:26','2002-07-20 00:00:00','2002-07-20 00:00:00','l','l'),(60,5,6,'2007-08-12','2007-08-12','02:17:23','02:17:23','2007-09-24 00:12:11','2007-09-24 00:12:11','d','d'),(61,3,3,'2008-12-13','2008-12-13','07:48:47','07:48:47','2009-01-05 06:13:21','2009-01-05 06:13:21','n','n'),(62,0,8,'0000-00-00','0000-00-00','09:09:14','09:09:14','2008-11-23 18:13:35','2008-11-23 18:13:35','l','l'),(63,1,2,'2003-07-27','2003-07-27','22:46:23','22:46:23','2002-12-19 00:00:00','2002-12-19 00:00:00','c','c'),(64,5,5,'2003-04-13','2003-04-13','19:42:42','19:42:42','2003-04-03 16:16:35','2003-04-03 16:16:35','v','v'),(65,0,3,'2007-04-25','2007-04-25','15:15:32','15:15:32','2009-04-13 13:44:41','2009-04-13 13:44:41','z','z'),(66,4,4,'2000-03-04','2000-03-04','02:50:26','02:50:26','2007-04-19 20:49:24','2007-04-19 20:49:24','h','h'),(67,0,9,'2001-08-03','2001-08-03','14:44:31','14:44:31','2002-11-15 23:36:04','2002-11-15 23:36:04','y','y'),(68,2,0,'2006-04-13','2006-04-13','00:00:00','00:00:00','2000-05-16 00:00:00','2000-05-16 00:00:00','o','o'),(69,2,1,'2006-04-22','2006-04-22','07:31:27','07:31:27','2002-06-08 06:51:27','2002-06-08 06:51:27','h','h'),(70,8,5,'2004-08-26','2004-08-26','10:48:57','10:48:57','2006-12-07 01:49:26','2006-12-07 01:49:26','h','h'),(71,8,6,'2002-11-26','2002-11-26','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(72,5,2,'2002-01-07','2002-01-07','23:06:00','23:06:00','2000-09-27 16:26:23','2000-09-27 16:26:23','m','m'),(73,1,0,'2005-05-07','2005-05-07','05:56:02','05:56:02','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(74,0,0,'2001-04-21','2001-04-21','10:44:22','10:44:22','2008-02-13 04:28:14','2008-02-13 04:28:14','t','t'),(75,7,9,'2000-09-01','2000-09-01','00:00:00','00:00:00','2000-03-10 06:17:52','2000-03-10 06:17:52','r','r'),(76,6,8,'2004-07-06','2004-07-06','01:44:26','01:44:26','2003-05-23 00:00:00','2003-05-23 00:00:00','u','u'),(77,0,6,'0000-00-00','0000-00-00','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','h','h'),(78,6,0,'2001-02-21','2001-02-21','17:01:49','17:01:49','2003-10-27 12:45:52','2003-10-27 12:45:52','p','p'),(79,9,0,'2004-01-28','2004-01-28','16:27:14','16:27:14','2004-08-06 00:00:00','2004-08-06 00:00:00','z','z'),(80,5,3,'2008-10-07','2008-10-07','00:00:00','00:00:00','2001-10-05 05:13:39','2001-10-05 05:13:39','h','h'),(81,5,5,'0000-00-00','0000-00-00','10:34:22','10:34:22','2001-03-25 04:24:51','2001-03-25 04:24:51','q','q'),(82,6,0,'2008-03-04','2008-03-04','10:48:51','10:48:51','2006-08-20 11:54:04','2006-08-20 11:54:04','l','l'),(83,1,0,'2009-05-08','2009-05-08','16:55:06','16:55:06','2003-05-16 18:14:52','2003-05-16 18:14:52','p','p'),(84,1,1,'2005-03-19','2005-03-19','14:46:32','14:46:32','2009-10-24 13:39:35','2009-10-24 13:39:35','t','t'),(85,9,8,'2007-09-14','2007-09-14','16:26:50','16:26:50','2001-08-10 00:00:00','2001-08-10 00:00:00','o','o'),(86,249,190,'2007-02-10','2007-02-10','06:35:32','06:35:32','2001-09-06 10:15:08','2001-09-06 10:15:08','o','o'),(87,3,0,'2000-06-12','2000-06-12','02:28:38','02:28:38','2006-09-27 00:00:00','2006-09-27 00:00:00','p','p'),(88,6,4,'2002-07-06','2002-07-06','00:00:00','00:00:00','2002-02-27 20:12:29','2002-02-27 20:12:29','e','e'),(89,7,2,'2001-02-25','2001-02-25','04:52:29','04:52:29','1900-01-01 00:00:00','1900-01-01 00:00:00','u','u'),(90,5,8,'2000-04-27','2000-04-27','00:00:00','00:00:00','2005-08-18 00:00:00','2005-08-18 00:00:00','z','z'),(91,4,0,'2005-08-23','2005-08-23','09:11:04','09:11:04','2000-10-15 15:52:54','2000-10-15 15:52:54','j','j'),(92,24,137,'2006-01-07','2006-01-07','22:38:18','22:38:18','2007-11-22 13:52:22','2007-11-22 13:52:22','e','e'),(93,3,7,'2007-07-08','2007-07-08','13:23:13','13:23:13','2005-09-20 09:09:48','2005-09-20 09:09:48','k','k'),(94,179,153,'2000-01-06','2000-01-06','15:33:10','15:33:10','2008-01-11 17:35:34','2008-01-11 17:35:34','d','d'),(95,5,7,'0000-00-00','0000-00-00','09:20:10','09:20:10','2002-11-01 00:00:00','2002-11-01 00:00:00','q','q'),(96,7,9,'2002-02-22','2002-02-22','11:19:10','11:19:10','2009-06-27 00:00:00','2009-06-27 00:00:00','j','j'),(97,7,2,'2001-04-17','2001-04-17','08:08:41','08:08:41','2000-09-25 14:11:58','2000-09-25 14:11:58','j','j'),(98,1,0,'2005-06-26','2005-06-26','10:17:36','10:17:36','2004-01-05 04:49:39','2004-01-05 04:49:39','e','e'),(99,5,6,'2008-09-14','2008-09-14','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','f','f'),(100,7,6,'0000-00-00','0000-00-00','01:05:02','01:05:02','2001-01-17 23:16:24','2001-01-17 23:16:24','a','a'),(101,9,2,'2001-12-20','2001-12-20','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','o','o'),(102,5,9,'2001-11-05','2001-11-05','00:00:00','00:00:00','2008-07-15 00:00:00','2008-07-15 00:00:00','y','y'),(103,4,4,'1900-01-01','1900-01-01','15:32:04','15:32:04','2001-03-06 10:00:37','2001-03-06 10:00:37','d','d'),(104,8,7,'2009-02-13','2009-02-13','20:25:36','20:25:36','2004-08-15 00:00:00','2004-08-15 00:00:00','z','z'),(105,8,6,'2008-03-25','2008-03-25','21:33:53','21:33:53','2006-10-12 06:13:06','2006-10-12 06:13:06','s','s');
analyze table t1;
analyze table t2;
EXPLAIN UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
DROP TABLE t1, t2;
SET sql_mode = default;
CREATE TABLE t1 (  id INT NOT NULL PRIMARY KEY,  id2 INT NOT NULL,  id3 INT NOT NULL,  KEY (id2),  KEY (id3),  KEY covering_index (id2,id3)) ENGINE=InnoDB;
INSERT INTO t1 VALUES (0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 3, 3), (4, 4, 4), (5, 5, 5), (6, 6, 6), (7, 7, 7);
INSERT INTO t1 SELECT id + 8, id2 + 8, id3 +8 FROM t1;
INSERT INTO t1 SELECT id + 16, 7, 0 FROM t1;
analyze table t1;
EXPLAIN SELECT count(*) FROM t1 WHERE id2=7 AND id3=0;
DROP TABLE t1;
CREATE TABLE t1 (  c1 VARCHAR(2),  d1 DATETIME NOT NULL);
CREATE TABLE t2 (  pk INTEGER NOT NULL,  c1 VARCHAR(2),  c2 VARCHAR(2),  PRIMARY KEY (pk),  KEY (c1),  KEY (c2)) PARTITION BY KEY(pk) PARTITIONS 2;
SELECT c1FROM t1WHERE c1 IN  SELECT t2.c1  FROM t2  WHERE t2.c1 = 'f'     OR t2.c2 < 'y'AND t1.d1 IS NULL;
DROP TABLE t1, t2;
    eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t0, t1, t2, t3, t4;
create table t0  key1 int not null,  key2 int not null,  key3 int not null,  key4 int not null,  key5 int not null,  key6 int not null,  key7 int not null,  key8 int not null,  INDEX i1(key1),  INDEX i2(key2),  INDEX i3(key3),  INDEX i4(key4),  INDEX i5(key5),  INDEX i6(key6),  INDEX i7(key7),  INDEX i8(key8));
insert into t0 values (1,1,1,1,1,1,1,1023),(2,2,2,2,2,2,2,1022);
set @d=2;
while ($1)  eval insert into t0 select key1+@d, key2+@d, key3+@d, key4+@d, key5+@d,                             key6+@d, key7+@d, key8-@d from t0;
  eval set @d=@d*2;
  dec $1;
analyze table t0;
explain select * from t0 where key1 < 3 or key1 > 1020;
explainselect * from t0 where key1 < 3 or key2 > 1020;
select * from t0 where key1 < 3 or key2 > 1020;
  explain select * from t0 where key1 < 2 or key2 <3;
  explainselect * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
select * from t0 where (key1 > 30 and key1<35) or (key2 >32 and key2 < 40);
  explain select * from t0 ignore index (i2) where key1 < 3 or key2 <4;
  explain select * from t0 where (key1 < 3 or key2 <4) and key3 = 50;
  explain select * from t0 use index (i1,i2) where (key1 < 2 or key2 <3) and key3 = 50;
  explain select * from t0 where (key1 > 1 or key2  > 2);
  explain select * from t0 force index (i1,i2) where (key1 > 1 or key2  > 2);
  explain  select * from t0 where key1<2 or key2<3 or (key1>5 and key1<7) or  (key1>10 and key1<12) or (key2>100 and key2<102);
  explain select * from t0 where key2 = 45 or key1 <=> null;
  explain select * from t0 where key2 = 45 or key1 is not null;
  explain select * from t0 where key2 = 45 or key1 is null;
  explain select * from t0 where key2=10 or key3=3 or key4 <=> null;
  explain select * from t0 where key2=10 or key3=3 or key4 is null;
  explain select key1 from t0 where (key1 <=> null) or (key2 < 2) or                                   (key3=10) or (key4 <=> null);
  explain select key1 from t0 where (key1 <=> null) or (key1 < 5) or                                   (key3=10) or (key4 <=> null);
  explain select * from t0 where  (key1 < 2 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 5 or key6 < 5);
  explainselect * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
select * from t0 where (key1 < 2 or key2 < 4) and (key1 < 5 or key3 < 3);
  explain select * from t0 where  (key1 < 3 or key2 < 2) and (key3 < 3 or key4 < 3) and (key5 < 2 or key6 < 2);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 70);
  explain select * from t0 where  (key1 < 3 or key2 < 3) and (key3 < 1000);
  explain select * from t0 where    ((key1 < 3 or key2 < 3) and (key2 <4 or key3 < 3))  or    key2 > 4;
  explain select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
select * from t0 where    ((key1 < 4 or key2 < 4) and (key2 <4 or key3 < 3))  or    key1 < 5;
  explain select * from t0 where    ((key1 < 2 or key2 < 2) and (key3 <4 or key5 < 3))  or    ((key5 < 3 or key6 < 3) and (key7 <3 or key8 < 3));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key7 <5 or key8 < 3) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 4))  or    ((key3 <4 or key5 < 2) and (key5 < 5 or key6 < 3));
  explain select * from t0 where    ((key3 <4 or key5 < 3) and (key1 < 3 or key2 < 3))  or    (((key3 <5 and key7 < 5) or key5 < 2) and (key5 < 4 or key6 < 4));
  explain select * from t0 where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >5 or key5 < 2) and (key5 < 5 or key6 < 6));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <3 or key5 < 4) and (key1 < 3 or key2 < 3))  or    ((key3 >4 or key5 < 2) and (key5 < 5 or key6 < 4));
  explain select * from t0 force index(i1, i2, i3, i4, i5, i6 ) where    ((key3 <5 or key5 < 4) and (key1 < 4 or key2 < 4))  or    ((key3 >=5 or key5 < 2) and (key5 < 5 or key6 < 6));
select * from t0 where key1 < 3 or key8 < 2 order by key1;
  explainselect * from t0 where key1 < 3 or key8 < 2 order by key1;
create table t2 like t0;
insert into t2 select * from t0;
alter table t2 add index i1_3(key1, key3);
alter table t2 add index i2_3(key2, key3);
alter table t2 drop index i1;
alter table t2 drop index i2;
alter table t2 add index i321(key3, key2, key1);
analyze table t2;
  explain select key3 from t2 where key1 = 100 or key2 = 100;
  explain select key3 from t2 where key1 <100 or key2 < 100;
  explain select key7 from t2 where key1 <100 or key2 < 100;
create table t4 (  key1a int not null,  key1b int not null,  key2  int not null,  key2_1 int not null,  key2_2 int not null,  key3  int not null,  index i1a (key1a, key1b),  index i1b (key1b, key1a),  index i2_1(key2, key2_1),  index i2_2(key2, key2_1));
insert into t4 select key1,key1,key1 div 10, key1 % 10, key1 % 10, key1 from t0;
analyze table t4;
select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key1a = 3 or key1b = 4;
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key3 = 5);
explain select * from t4 where key2 = 1 and (key2_1 = 1 or key2_2 = 5);
  explain select * from t4 where key2_1 = 1 or key2_2 = 5;
create table t1 like t0;
insert into t1 select * from t0;
analyze table t1;
explain select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
select * from t0 left join t1 on (t0.key1=t1.key1)  where t0.key1=3 or t0.key2=4;
explainselect * from t0,t1 where (t0.key1=t1.key1) and ( t0.key1=3 or t0.key2=4);
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2=4) and t1.key1<200;
explainselect * from t0,t1 where (t0.key1=t1.key1) and  (t0.key1=3 or t0.key2<4) and t1.key1=2;
explain select * from t0,t1 where t0.key1 = 5 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
  explain select * from t0,t1 where t0.key1 < 3 and  (t1.key1 = t0.key1 or t1.key8 = t0.key1);
explain select * from t1 where key1=3 or key2=4  union select * from t1 where key1<4 or key3=5;
explain select * from (select * from t1 where key1 = 3 or key2 =3) as z where key8 >5;
create table t3 like t0;
insert into t3 select * from t0;
alter table t3 add key9 int not null, add index i9(key9);
alter table t3 add keyA int not null, add index iA(keyA);
alter table t3 add keyB int not null, add index iB(keyB);
alter table t3 add keyC int not null, add index iC(keyC);
update t3 set key9=key1,keyA=key1,keyB=key1,keyC=key1;
analyze table t3;
explain select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
select * from t3 where  key1=1 or key2=2 or key3=3 or key4=4 or  key5=5 or key6=6 or key7=7 or key8=8 or  key9=9 or keyA=10 or keyB=11 or keyC=12;
explain select * from t0 where key1 < 3 or key2 < 4;
select * from t0 where key1 < 3 or key2 < 4;
update t0 set key8=123 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
delete from t0 where key1 < 3 or key2 < 4;
analyze table t0;
select * from t0 where key1 < 3 or key2 < 4;
select count(*) from t0;
drop table t4;
create table t4 (a int);
insert into t4 values (1),(4),(3);
analyze table t4;
set @save_join_buffer_size=@@join_buffer_size;
set join_buffer_size= 4096;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 < 500000 or a.key2 < 3)  and   (b.key1 < 500000 or b.key2 < 3);
update t0 set key1=1;
analyze table t0;
  explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a force index(i1,i2), t0 as b force index (i1,i2)  where (a.key1 = 1 or a.key2 = 1)  and   (b.key1 = 1 or b.key2 = 1);
alter table t0 add filler1 char(200), add filler2 char(200), add filler3 char(200);
update t0 set key2=1, key3=1, key4=1, key5=1,key6=1,key7=1 where key7 < 500;
analyze table t0;
  # Too unstable for innodb      explain select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5)   from t0 as a, t0 as b   where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)    and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
select max(a.key1 + b.key1 + a.key2 + b.key2 + a.key3 + b.key3 + a.key4 + b.key4 + a.key5 + b.key5) from t0 as a, t0 as b where (a.key1 = 1 and a.key2 = 1 and a.key3 = 1 and a.key4=1 and a.key5=1 and a.key6=1 and a.key7 = 1 or a.key8=1)  and (b.key1 = 1 and b.key2 = 1 and b.key3 = 1 and b.key4=1 and b.key5=1 and b.key6=1 and b.key7 = 1 or b.key8=1);
set join_buffer_size= @save_join_buffer_size;
drop table t0, t1, t2, t3, t4;
CREATE TABLE t1 (  cola char(3) not null, colb char(3) not null,  filler char(200),  key(cola), key(colb));
INSERT INTO t1 VALUES ('foo','bar', 'ZZ'),('fuz','baz', 'ZZ');
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola = 'foo';
  dec $1;
while ($1)  eval INSERT INTO t1 SELECT * from t1 WHERE cola <> 'foo';
  dec $1;
OPTIMIZE TABLE t1;
select count(*) from t1;
analyze table t1;
  explain select * from t1 WHERE cola = 'foo' AND colb = 'bar';
  explain select * from t1 force index(cola,colb) WHERE cola = 'foo' AND colb = 'bar';
drop table t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b));
insert into t1 select @v:= A.a, @v, 't1', 'filler2' from t0 A, t0 B, t0 C;
create table t2 like t1;
create table t3 (  a int, b int,  filler1 char(200), filler2 char(200),  key(a),key(b)) engine=merge union=(t1,t2);
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
explain select * from t1 where a=1 and b=1;
explain select * from t3 where a=1 and b=1;
drop table t3;
drop table t0, t1, t2;
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES(1);
CREATE TABLE t2(a INT, b INT, dummy CHAR(16) DEFAULT '', KEY(a), KEY(b));
INSERT INTO t2(a,b) VALUES(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(0,0),(1,2);
LOCK TABLES t1 WRITE, t2 WRITE;
INSERT INTO t2(a,b) VALUES(1,2);
SELECT t2.a FROM t1,t2 WHERE t2.b=2 AND t2.a=1;
UNLOCK TABLES;
DROP TABLE t1, t2;
CREATE TABLE `t1` (  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY `a` (`a`),  KEY `b` (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t1 values(0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (0, 'filler', 0), (1, 'filler', 1), (2, 'filler', 2), (3, 'filler', 3), (4, 'filler', 4), (5, 'filler', 5), (6, 'filler', 6), (7, 'filler', 7), (8, 'filler', 8), (9, 'filler', 9), (10, 'filler', 10), (11, 'filler', 11), (12, 'filler', 12), (13, 'filler', 13),(14, 'filler', 14), (15, 'filler', 15), (16, 'filler', 16), (17, 'filler', 17), (18, 'filler', 18), (19, 'filler', 19), (4, '5      ', 0), (5, '4      ', 0), (4, '4      ', 0), (4, 'qq     ', 5), (5, 'qq     ', 4), (4, 'zz     ', 4);
create table t2(  `a` int(11) DEFAULT NULL,  `filler` char(200) DEFAULT NULL,  `b` int(11) DEFAULT NULL,  KEY USING BTREE (`a`),  KEY USING BTREE (`b`)) ENGINE=MEMORY DEFAULT CHARSET=latin1;
insert into t2 select * from t1;
analyze table t1;
analyze table t2;
explain select * from t1 where a=4 or b=4;
select * from t1 where a=4 or b=4;
select * from t1 ignore index(a,b) where a=4 or b=4;
explain select * from t2 where a=4 or b=4;
select * from t2 where a=4 or b=4;
drop table t1, t2;
CREATE TABLE t1 (a varchar(8), b set('a','b','c','d','e','f','g','h'),                 KEY b(b), KEY a(a));
INSERT INTO t1 VALUES ('y',''), ('z','');
SELECT b,a from t1 WHERE (b!='c' AND b!='f' && b!='h') OR   (a='pure-S') OR (a='DE80337a') OR (a='DE80799');
DROP TABLE t1;
create table t0 (a int);
insert into t0 values (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);
create table t1 (a int);
insert into t1 values (1),(2);
create table t2(a int, b int);
insert into t2 values (1,1), (2, 1000);
create table t3 (a int, b int, filler char(100), key(a), key(b));
insert into t3 select 1000, 1000,'filler' from t0 A, t0 B, t0 C; insert into t3 values (1,1,'data');
insert into t3 values (1,1,'data');
analyze table t0;
analyze table t1;
analyze table t2;
analyze table t3;
  explain select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
select * from t1 where exists (select 1 from t2, t3               where t2.a=t1.a and (t3.a=t2.b or t3.b=t2.b or t3.b=t2.b+1));
drop table t0, t1, t2, t3;
CREATE TABLE t1(a VARCHAR(128),b VARCHAR(128),KEY(A),KEY(B)) charset latin1;
INSERT INTO t1 VALUES (REPEAT('a',128),REPEAT('b',128));
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
analyze table t1;
SET SESSION sort_buffer_size=1;
  EXPLAIN SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SELECT * FROM t1 FORCE INDEX(a,b) WHERE a LIKE 'a%' OR b LIKE 'b%'   ORDER BY a,b;
SET SESSION sort_buffer_size=DEFAULT;
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t0,t1,t2;
create table t1  /* Field names reflect value(rowid) distribution, st=STairs, swt= SaWTooth */  st_a int not null default 0,  swt1a int not null default 0,  swt2a int not null default 0,  st_b int not null default 0,  swt1b int not null default 0,  swt2b int not null default 0,  /* fields/keys for row retrieval tests */  key1 int,  key2 int,  key3 int,  key4 int,  /* make rows much bigger then keys */  filler1 char (200),  filler2 char (200),  filler3 char (200),  filler4 char (200),  filler5 char (200),  filler6 char (200),  /* order of keys is important */  key sta_swt12a(st_a,swt1a,swt2a),  key sta_swt1a(st_a,swt1a),  key sta_swt2a(st_a,swt2a),  key sta_swt21a(st_a,swt2a,swt1a),  key st_a(st_a),  key stb_swt1a_2b(st_b,swt1b,swt2a),  key stb_swt1b(st_b,swt1b),  key st_b(st_b),  key(key1),  key(key2),  key(key3),  key(key4)) ;
create table t0 as select * from t1;
while ($cnt)  eval insert into t0 values (1, 2, 3, 1, 2, 3, 0, 0, 0, 0, 'data1', 'data2', 'data3', 'data4', 'data5', 'data6');
  dec $cnt;
alter table t1 disable keys;
while ($1)  let $2=4;
  while ($2)  {    let $3=4;
    while ($3)    {      eval insert into t1 select $1, $2, $3, $1 ,$2, $3, key1, key2, key3, key4, filler1, filler2, filler3, filler4, filler5, filler6 from t0;
      dec $3;
    }    dec $2;
  } dec $1;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 100, 100,'key1-key2-key3-key4');
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (100, -1, 100, -1,'key1-key3');
  dec $cnt;
while ($cnt)  eval insert into t1 (key1, key2, key3, key4, filler1) values (-1, 100, -1, 100,'key2-key4');
  dec $cnt;
alter table t1 enable keys;
select count(*) from t1;
analyze table t0;
analyze table t1;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain format=json select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, -1, -1, 'key1-key2');
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 100, 100, 'key4-key3');
analyze table t1;
explain select key1,key2,filler1 from t1 where key1=100 and key2=100;
select key1,key2,filler1 from t1 where key1=100 and key2=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
explain select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
select key1,key2,key3 from t1 where key1=100 and key2=100 and key3=100;
insert into t1 (key1,key2,key3,key4,filler1) values (101,101,101,101, 'key1234-101');
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=101;
select key1,key2, filler1 from t1 where key1=100 and key2=100;
update t1 set filler1='to be deleted' where key1=100 and key2=100;
update t1 set key1=200,key2=200 where key1=100 and key2=100;
delete from t1 where key1=200 and key2=200;
analyze table t1;
select key1,key2,filler1 from t1 where key2=100 and key2=200;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
delete from t1 where key3=100 and key4=100;
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
select key1,key2,key3,key4,filler1 from t1 where key1=100 and key2=100 or key3=100 and key4=100;
explain select key1,key2 from t1 where key1=100 and key2=100;
select key1,key2 from t1 where key1=100 and key2=100;
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-1');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-2');
insert into t1 (key1, key2, key3, key4, filler1) values (100, 100, 200, 200,'key1-key2-key3-key4-3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, -1, 200,'key4');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
insert into t1 (key1, key2, key3, key4, filler1) values (-1, -1, 200, -1,'key3');
analyze table t1;
explain select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
select key1,key2,key3,key4,filler1 from t1 where key3=200 or (key1=100 and key2=100) or key4=200;
  # Too unstable on InnoDB  explain select * from t1 where st_a=1 and st_b=1;
  explain select st_a,st_b from t1 where st_a=1 and st_b=1;
  explain select st_a from t1 ignore index (st_a) where st_a=1 and st_b=1;
explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1;
explain select * from t1 where st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1 ignore index (sta_swt21a, sta_swt12a, stb_swt1a_2b, stb_swt1b)  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1 and swt2b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and swt2a=1 and st_b=1 and swt1b=1;
  explain select * from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
  explain select st_a from t1  where st_a=1 and swt1a=1 and st_b=1 and swt1b=1 and swt1b=1;
drop table t0,t1;
create table t2 (  a char(10),  b char(10),  filler1 char(255),  filler2 char(255),  key(a(5)),  key(b(5)));
while ($1)  eval insert into t2 values (repeat(char($1+64), 8),repeat(char($1+64), 8),'filler1', 'filler2');
  dec $1;
insert into t2 select * from t2;
insert into t2 select * from t2;
select count(a) from t2 where a='BBBBBBBB';
select count(a) from t2 where b='BBBBBBBB';
analyze table t2;
explain select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 where a='AAAAAAAA' and b='AAAAAAAA';
select count(a) from t2 ignore index(a,b) where a='AAAAAAAA' and b='AAAAAAAA';
insert into t2 values ('ab', 'ab', 'uh', 'oh');
analyze table t2;
explain select a from t2 where a='ab';
drop table t2;
CREATE TABLE t1(c1 INT, c2 INT DEFAULT 0, c3 CHAR(255) DEFAULT '',KEY(c1), KEY(c2), KEY(c3)) charset latin1;
INSERT INTO t1(c1) VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0),(0);
INSERT INTO t1 VALUES(0,0,0);
CREATE TABLE t2(c1 int);
INSERT INTO t2 VALUES(1);
DELETE t1 FROM t1,t2 WHERE t1.c1=0 AND t1.c2=0;
SELECT * FROM t1;
DROP TABLE t1,t2;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1,t2;
create table t1  key1 int not null,  key2 int not null,  INDEX i1(key1),  INDEX i2(key2)) charset latin1;
while ($1)  eval insert into t1 values (200-$1, $1);
  dec $1;
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
alter table t1 add str1 char (255) not null,                add zeroval int not null default 0,                add str2 char (255) not null,                add str3 char (255) not null;
update t1 set str1='aaa', str2='bbb', str3=concat(key2, '-', key1 div 2, '_' ,if(key1 mod 2 = 0, 'a', 'A'));
alter table t1 add primary key (str1, zeroval, str2, str3);
analyze table t1;
explain select * from t1 where key1 < 5 or key2 > 197;
select * from t1 where key1 < 5 or key2 > 197;
explain select * from t1 where key1 < 3 or key2 > 195;
select * from t1 where key1 < 3 or key2 > 195;
drop table t1;
create table t1 (  pk    integer not null auto_increment primary key,  key1  integer,  key2  integer not null,  filler char  (200),  index (key1),  index (key2)) charset latin1;
show warnings;
while ($1)  eval insert into t1 (key1, key2, filler) values ($1/4, $1/8, 'filler-data');
  dec $1;
analyze table t1;
explain select pk from t1 where key1 = 1 and key2 = 1;
select pk from t1 where key2 = 1 and key1 = 1;
select pk from t1 ignore index(key1,key2) where key2 = 1 and key1 = 1;
drop table t1;
create table t1 (  pk int primary key auto_increment,  key1a  int,  key2a  int,  key1b  int,  key2b  int,  dummy1 int,  dummy2 int,  dummy3 int,  dummy4 int,  key3a  int,  key3b  int,  filler1 char (200),  index i1(key1a, key1b),  index i2(key2a, key2b),  index i3(key3a, key3b));
create table t2 (a int);
insert into t2 values (0),(1),(2),(3),(4),(NULL);
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select A.a, B.a, C.a, D.a, C.a, D.a from t2 A,t2 B,t2 C, t2 D;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
insert into t1 (key1a, key1b, key2a, key2b, key3a, key3b)  select key1a, key1b, key2a, key2b, key3a, key3b from t1;
analyze table t1;
select count(*) from t1;
analyze table t2;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and  key2a = 2 and key2b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key2a = 2 and key2b is null;
  explain select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
select count(*) from t1 where  key1a = 2 and key1b is null and key3a = 2 and key3b is null;
drop table t1,t2;
create table t1 (  id1 int,  id2 date ,  index idx2 (id1,id2),  index idx1 (id2));
insert into t1 values(1,'20040101'), (2,'20040102');
select * from t1  where id1 = 1  and id2= '20040101';
drop table t1;
drop view if exists v1;
CREATE TABLE t1 (  `oid` int(11) unsigned NOT NULL auto_increment,  `fk_bbk_niederlassung` int(11) unsigned NOT NULL,  `fk_wochentag` int(11) unsigned NOT NULL,  `uhrzeit_von` time NOT NULL COMMENT 'HH:MM',  `uhrzeit_bis` time NOT NULL COMMENT 'HH:MM',  `geloescht` tinyint(4) NOT NULL,  `version` int(5) NOT NULL,  PRIMARY KEY  (`oid`),  KEY `fk_bbk_niederlassung` (`fk_bbk_niederlassung`),  KEY `fk_wochentag` (`fk_wochentag`),  KEY `ix_version` (`version`)) DEFAULT CHARSET=latin1;
insert  into t1 values(1, 38, 1, '08:00:00', '13:00:00', 0, 1),(2, 38, 2, '08:00:00', '13:00:00', 0, 1),(3, 38, 3, '08:00:00', '13:00:00', 0, 1),(4, 38, 4, '08:00:00', '13:00:00', 0, 1),(5, 38, 5, '08:00:00', '13:00:00', 0, 1),(6, 38, 5, '08:00:00', '13:00:00', 1, 2),(7, 38, 3, '08:00:00', '13:00:00', 1, 2),(8, 38, 1, '08:00:00', '13:00:00', 1, 2),(9, 38, 2, '08:00:00', '13:00:00', 1, 2),(10, 38, 4, '08:00:00', '13:00:00', 1, 2),(11, 38, 1, '08:00:00', '13:00:00', 0, 3),(12, 38, 2, '08:00:00', '13:00:00', 0, 3),(13, 38, 3, '08:00:00', '13:00:00', 0, 3),(14, 38, 4, '08:00:00', '13:00:00', 0, 3),(15, 38, 5, '08:00:00', '13:00:00', 0, 3),(16, 38, 4, '08:00:00', '13:00:00', 0, 4),(17, 38, 5, '08:00:00', '13:00:00', 0, 4),(18, 38, 1, '08:00:00', '13:00:00', 0, 4),(19, 38, 2, '08:00:00', '13:00:00', 0, 4),(20, 38, 3, '08:00:00', '13:00:00', 0, 4),(21, 7, 1, '08:00:00', '13:00:00', 0, 1),(22, 7, 2, '08:00:00', '13:00:00', 0, 1),(23, 7, 3, '08:00:00', '13:00:00', 0, 1),(24, 7, 4, '08:00:00', '13:00:00', 0, 1),(25, 7, 5, '08:00:00', '13:00:00', 0, 1);
create view v1 asselect  zeit1.oid AS oid,  zeit1.fk_bbk_niederlassung AS fk_bbk_niederlassung,  zeit1.fk_wochentag AS fk_wochentag,  zeit1.uhrzeit_von AS uhrzeit_von,  zeit1.uhrzeit_bis AS uhrzeit_bis,  zeit1.geloescht AS geloescht,  zeit1.version AS versionfrom  t1 zeit1where(zeit1.version =  (select max(zeit2.version) AS `max(version)`   from t1 zeit2   where     ((zeit1.fk_bbk_niederlassung = zeit2.fk_bbk_niederlassung) and      (zeit1.fk_wochentag = zeit2.fk_wochentag) and      (zeit1.uhrzeit_von = zeit2.uhrzeit_von) and      (zeit1.uhrzeit_bis = zeit2.uhrzeit_bis)     )  )and (zeit1.geloescht = 0);
select * from v1 where oid = 21;
drop view v1;
drop table t1;
CREATE TABLE t1(  t_cpac varchar(2) NOT NULL,  t_vers varchar(4) NOT NULL,  t_rele varchar(2) NOT NULL,  t_cust varchar(4) NOT NULL,  filler1 char(250) default NULL,  filler2 char(250) default NULL,  PRIMARY KEY (t_cpac,t_vers,t_rele,t_cust),  UNIQUE KEY IX_4 (t_cust,t_cpac,t_vers,t_rele),  KEY IX_5 (t_vers,t_rele,t_cust)) charset latin1;
insert into t1 values('tm','2.5 ','a ','    ','',''), ('tm','2.5U','a ','stnd','',''),('da','3.3 ','b ','    ','',''), ('da','3.3U','b ','stnd','',''),('tl','7.6 ','a ','    ','',''), ('tt','7.6 ','a ','    ','',''),('bc','B61 ','a ','    ','',''), ('bp','B61 ','a ','    ','',''),('ca','B61 ','a ','    ','',''), ('ci','B61 ','a ','    ','',''),('cp','B61 ','a ','    ','',''), ('dm','B61 ','a ','    ','',''),('ec','B61 ','a ','    ','',''), ('ed','B61 ','a ','    ','',''),('fm','B61 ','a ','    ','',''), ('nt','B61 ','a ','    ','',''),('qm','B61 ','a ','    ','',''), ('tc','B61 ','a ','    ','',''),('td','B61 ','a ','    ','',''), ('tf','B61 ','a ','    ','',''),('tg','B61 ','a ','    ','',''), ('ti','B61 ','a ','    ','',''),('tp','B61 ','a ','    ','',''), ('ts','B61 ','a ','    ','',''),('wh','B61 ','a ','    ','',''), ('bc','B61U','a ','stnd','',''),('bp','B61U','a ','stnd','',''), ('ca','B61U','a ','stnd','',''),('ci','B61U','a ','stnd','',''), ('cp','B61U','a ','stnd','',''),('dm','B61U','a ','stnd','',''), ('ec','B61U','a ','stnd','',''),('fm','B61U','a ','stnd','',''), ('nt','B61U','a ','stnd','',''),('qm','B61U','a ','stnd','',''), ('tc','B61U','a ','stnd','',''),('td','B61U','a ','stnd','',''), ('tf','B61U','a ','stnd','',''),('tg','B61U','a ','stnd','',''), ('ti','B61U','a ','stnd','',''),('tp','B61U','a ','stnd','',''), ('ts','B61U','a ','stnd','',''),('wh','B61U','a ','stnd','','');
show create table t1;
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6';
select t_vers,t_rele,t_cust,filler1 from t1 where t_vers = '7.6'  and t_rele='a' and t_cust = ' ';
drop table t1;
create table t1 (  pk int(11) not null auto_increment,  a int(11) not null default '0',  b int(11) not null default '0',  c int(11) not null default '0',  filler1 datetime, filler2 varchar(15),  filler3 longtext,  kp1 varchar(4), kp2 varchar(7),  kp3 varchar(2), kp4 varchar(4),  kp5 varchar(7),  filler4 char(1),  primary key (pk),  key idx1(a,b,c),  key idx2(c),  key idx3(kp1,kp2,kp3,kp4,kp5)) default charset=latin1;
set @fill= uncompress(unhex(concat('F91D0000789CDD993D6FDB301086F7FE0A6D4E0105B8E3F1335D5BA028DA0EEDE28E1D320408','52A0713BF4D7571FB62C51A475924839080307B603E77DEE787C8FA41F9E9EEF7F1F8A87A7C3','AFE280C5DF9F8F7FEE9F8B1B2CB114D6902E918455245DB91300FA16E42D5201FA4EE29DA05D','B9FB3718A33718A3FA8C30AEFAFDE1F317D016AA67BA7A60FDE45BF5F8BA7B5BDE8812AA9F1A','069DB03C9804346644F3A3A6A1338DB572756A3C4D1BCC804CABF912C654AE9BB855A2B85962','3A479259CAE6A86C0411D01AE5483581EDCBD9A39C45252D532E533979EB9F82E971D979BDB4','8531105670740AFBFD1E34AAB0029E4AD0A1D46A6D0946A21A16038A5CD965CD2D524673F712','20C304477315CE18405EAF9BD0AFFEAC74FDA14F1FBF5BD34C769D73FBBEDF4750ADD4E5A99C','5C8DC04934AFA275D483D536D174C11B12AF27F8F888B41B6FC9DBA569E1FD7BD72D698130B7','91B23A98803512B3D31881E8DCDA2AC1754E3644C4BB3A8466750B911681274A39E35E8624B7','444A42AC1213F354758E3CF1A4CDD5A688C767CF1B11ABC5867CB15D8A18E0B91E9EC275BB94','58F33C2936F64690D55BC29E4A293D95A798D84217736CEAAA538CE1354269EE2162053FBC66','496D90CB53323CB279D3A6AF651B4B22B9E430743D83BE48E995A09D4FC9871C22D8D189B945','706911BCB8C3C774B9C08D2FC6ED853ADACA37A14A4CB2E027630E5B80ECACD939431B1CDF62','7D71487536EA2C678F59685E91F4B6C144BCCB94C1EBA9FA6F5552DDCA4E4539BE326A2720CB','45ED028EB3616AC93C46E775FEA9FA6DA7CFCEC6DEBA5FCD1F915EED4D983BDDB881528AD9AB','43C1576F29AAB35BDFBC21D422F52B307D350589D45225A887AC46C8EDD72D99EC3ED2E1BCEF','7AF26FC4C74097B6768A5EDAFA660CC64278F7E63F99AC954B')));
prepare x from @fill;
execute x;
deallocate prepare x;
set @fill=NULL;
SELECT COUNT(*) FROM t1 WHERE b = 0 AND a = 0 AND c = 13286427 AND kp1='279' AND kp2='ELM0678' AND kp3='6' AND kp4='10' AND  kp5 = 'R        ';
drop table t1;
create table t1  key1 int not null,   key2 int not null default 0,  key3 int not null default 0);
insert into t1(key1) values (1),(2),(3),(4),(5),(6),(7),(8);
set @d=8;
while ($1)  eval insert into t1 (key1) select key1+@d from t1;
  eval set @d=@d*2;
  dec $1;
alter table t1 add index i2(key2);
alter table t1 add index i3(key3);
update t1 set key2=key1,key3=key1;
analyze table t1;
  explain select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
select * from t1 where (key3 > 30 and key3<35) or (key2 >32 and key2 < 40);
drop table t1;
CREATE TABLE t1 (  a INT,  b INT,  c INT,  d INT,  PRIMARY KEY (a),  KEY (c),  KEY bd (b,d));
INSERT INTO t1 VALUES(1, 0, 1, 0),(2, 1, 1, 1),(3, 1, 1, 1),(4, 0, 1, 1);
analyze table t1;
EXPLAINSELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
CREATE TABLE t2 ( a INT )SELECT aFROM t1WHERE c = 1 AND b = 1 AND d = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1( a INT, b INT, KEY(a), KEY(b) );
INSERT INTO t1 VALUES (1, 2), (1, 2), (1, 2), (1, 2);
SELECT * FROM t1 FORCE INDEX(a, b) WHERE a = 1 AND b = 2;
DROP TABLE t1;
CREATE TABLE t1 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b INT);
INSERT INTO t1 (b) VALUES (1);
UPDATE t1 SET b = 2 WHERE a = 1;
SELECT * FROM t1;
CREATE TABLE t2 ( a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(1) );
INSERT INTO t2 (b) VALUES ('a');
UPDATE t2 SET b = 'b' WHERE a = 1;
SELECT * FROM t2;
DROP TABLE t1, t2;
CREATE TABLE t1 (  pk INT NOT NULL,  col_int_key INT NOT NULL,  col_varchar_key VARCHAR(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES (1,1,'a'), (2,2,'b');
analyze table t1;
EXPLAINSELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
SELECT col_int_keyFROM t1WHERE col_varchar_key >= 'l' OR       (((pk BETWEEN 141 AND 141) OR col_varchar_key <> 'l')          AND ((pk BETWEEN 141 AND 141) OR (col_int_key > 141)));
DROP TABLE t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists t1;
create table t1 (  pk int primary key,  key1 int,  key2 int,  filler char(200),  filler2 char(200),  index(key1),  index(key2));
while ($1)  eval insert into t1 values($1, $1, $1, 'filler-data','filler-data-2');
  dec $1;
select * from t1 where (key1 >= 2 and key1 <= 10) or (pk >= 4 and pk <=8 );
set @maxv=1000;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1=18 or key1=60;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or key1 < 3 or key1 > @maxv-11;
select * from t1 where  (pk < 5) or (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 ) or (pk > @maxv-10)  or  (key1 < 5) or (key1 > 10 and key1 < 15) or (key1 >= 50 and key1 < 55 ) or (key1 > @maxv-10);
select * from t1 where  (pk > 10 and pk < 15) or (pk >= 50 and pk < 55 )  or  (key1 < 5) or (key1 > @maxv-10);
drop table t1;
eval SET SESSION DEFAULT_STORAGE_ENGINE = $engine_type;
drop table if exists  t1;
create table t1  pk1 int not null,  pk2 int not null,  key1 int not null,  key2 int not null,  pktail1ok  int not null,  pktail2ok  int not null,  pktail3bad int not null,  pktail4bad int not null,  pktail5bad int not null,  pk2copy int not null,  badkey  int not null,  filler1 char (200),  filler2 char (200),  key (key1),  key (key2),  /* keys with tails from CPK members */  key (pktail1ok, pk1),  key (pktail2ok, pk1, pk2),  key (pktail3bad, pk2, pk1),  key (pktail4bad, pk1, pk2copy),  key (pktail5bad, pk1, pk2, pk2copy),  primary key (pk1, pk2));
set autocommit=0;
while ($1)  eval insert into t1 values ($1 div 10,$1 mod 100,   $1/100,$1/100,   $1/100,$1/100,$1/100,$1/100,$1/100, $1 mod 100, $1/1000,'filler-data-$1','filler2');
  dec $1;
set autocommit=1;
analyze table t1;
explain select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
select * from t1 where pk1 = 1 and pk2 < 80  and key1=0;
explain select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
select pk1,pk2 from t1 where key1 = 10 and key2=10 and 2*pk1+1 < 2*96+1;
explain select * from t1 where badkey=1 and key1=10;
explain select * from t1 where pk1 < 7500 and key1 = 10;
explain select * from t1 where pktail1ok=1 and key1=10;
explain select * from t1 where pktail2ok=1 and key1=10;
explain select * from t1 where (pktail2ok=1 and pk1< 50000) or key1=10;
explain select * from t1 where pktail3bad=1 and key1=10;
explain select * from t1 where pktail4bad=1 and key1=10;
explain select * from t1 where pktail5bad=1 and key1=10;
explain select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
select pk1,pk2,key1,key2 from t1 where key1 = 10 and key2=10 limit 10;
drop table t1;
create table t1  RUNID varchar(22),  SUBMITNR varchar(5),  ORDERNR char(1),  PROGRAMM varchar(8),  TESTID varchar(4),  UCCHECK char(1),  ETEXT varchar(80),  ETEXT_TYPE char(1),  INFO char(1),  SEVERITY tinyint(3),  TADIRFLAG char(1),  PRIMARY KEY  (RUNID,SUBMITNR,ORDERNR,PROGRAMM,TESTID,UCCHECK),  KEY `TVERM~KEY`  (PROGRAMM,TESTID,UCCHECK)) DEFAULT CHARSET=latin1;
update t1 set `ETEXT` = '', `ETEXT_TYPE`='', `INFO`='', `SEVERITY`='', `TADIRFLAG`=''WHERE `RUNID`= '' AND `SUBMITNR`= '' AND `ORDERNR`='' AND `PROGRAMM`='' AND `TESTID`='' AND `UCCHECK`='';
drop table t1;
CREATE TABLE t1 (f1 INT, PRIMARY KEY (f1));
INSERT INTO t1 VALUES (2);
CREATE TABLE t2 (f1 INT, f2 INT, f3 char(1),                 PRIMARY KEY (f1), KEY (f2), KEY (f3) );
INSERT INTO t2 VALUES (1, 1, 'h'), (2, 3, 'h'), (3, 2, ''), (4, 2, '');
SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
analyze table t1;
analyze table t2;
EXPLAIN SELECT t1.f1 FROM t1WHERE (SELECT COUNT(*) FROM t2 WHERE t2.f3 = 'h' AND t2.f2 = t1.f1) = 0 AND t1.f1 = 2;
DROP TABLE t1,t2;
SET sql_mode = '';
CREATE TABLE t1 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t1 VALUES(1,2,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','2','2'),(109,25,1,'0000-00-00','0000-00-00','00:00:07','00:00:25','0000-00-00 00:00:00','0000-00-00 00:00:00','1','7');
CREATE TABLE t2 (  pk int(11) NOT NULL AUTO_INCREMENT,  col_int_nokey int(11) NOT NULL,  col_int_key int(11) NOT NULL,  col_date_key date NOT NULL,  col_date_nokey date NOT NULL,  col_time_key time NOT NULL,  col_time_nokey time NOT NULL,  col_datetime_key datetime NOT NULL,  col_datetime_nokey datetime NOT NULL,  col_varchar_key varchar(1) NOT NULL,  col_varchar_nokey varchar(1) NOT NULL,  PRIMARY KEY (pk),  KEY col_int_key (col_int_key),  KEY col_date_key (col_date_key),  KEY col_time_key (col_time_key),  KEY col_datetime_key (col_datetime_key),  KEY col_varchar_key (col_varchar_key,col_int_key));
INSERT INTO t2 VALUES(10,2,4,'2000-04-16','2000-04-16','17:02:34','17:02:34','2009-08-04 02:49:10','2009-08-04 02:49:10','u','u'),(11,6,5,'1900-01-01','1900-01-01','12:31:32','12:31:32','2004-05-24 22:22:06','2004-05-24 22:22:06','b','b'),(12,6,0,'2005-05-14','2005-05-14','16:49:31','16:49:31','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(13,94,140,'2001-05-23','2001-05-23','00:00:00','00:00:00','2003-07-28 07:31:49','2003-07-28 07:31:49','f','f'),(14,10,230,'2000-06-04','2000-06-04','20:23:27','20:23:27','2000-02-04 21:03:36','2000-02-04 21:03:36','g','g'),(15,8,2,'1900-01-01','1900-01-01','10:31:09','10:31:09','2005-05-22 11:48:12','2005-05-22 11:48:12','q','q'),(16,43,110,'2008-03-18','2008-03-18','09:58:35','09:58:35','1900-01-01 00:00:00','1900-01-01 00:00:00','n','n'),(17,1,8,'2007-02-25','2007-02-25','05:39:28','05:39:28','2005-05-06 00:53:37','2005-05-06 00:53:37','c','c'),(18,6,5,'2001-11-22','2001-11-22','00:00:00','00:00:00','2002-08-08 23:43:46','2002-08-08 23:43:46','x','x'),(19,5,8,'0000-00-00','0000-00-00','00:00:00','00:00:00','2009-10-26 04:07:22','2009-10-26 04:07:22','n','n'),(20,1,5,'2001-08-07','2001-08-07','14:06:09','14:06:09','2005-03-12 22:55:23','2005-03-12 22:55:23','r','r'),(21,195,70,'2000-08-03','2000-08-03','00:00:00','00:00:00','2008-05-03 22:34:19','2008-05-03 22:34:19','j','j'),(22,1,0,'2007-04-21','2007-04-21','17:43:27','17:43:27','2001-10-12 13:30:14','2001-10-12 13:30:14','l','l'),(23,0,9,'2000-06-13','2000-06-13','12:23:15','12:23:15','2007-10-07 03:53:06','2007-10-07 03:53:06','h','h'),(24,7,3,'0000-00-00','0000-00-00','19:35:06','19:35:06','2005-12-27 20:58:56','2005-12-27 20:58:56','z','z'),(25,1,9,'2004-07-08','2004-07-08','10:16:08','10:16:08','2009-05-16 18:44:21','2009-05-16 18:44:21','z','z'),(26,4,3,'2003-06-01','2003-06-01','00:00:00','00:00:00','2008-10-02 00:00:00','2008-10-02 00:00:00','d','d'),(27,76,22,'0000-00-00','0000-00-00','16:51:15','16:51:15','2001-03-20 00:00:00','2001-03-20 00:00:00','l','l'),(28,6,1,'1900-01-01','1900-01-01','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(29,7,3,'2007-01-22','2007-01-22','00:00:00','00:00:00','2000-01-10 23:19:37','2000-01-10 23:19:37','k','k'),(30,6,3,'2006-10-19','2006-10-19','21:46:20','21:46:20','2008-06-21 16:56:37','2008-06-21 16:56:37','l','l'),(31,6,8,'2005-02-27','2005-02-27','00:00:00','00:00:00','2002-03-01 00:34:37','2002-03-01 00:34:37','t','t'),(32,1,4,'2001-09-10','2001-09-10','03:34:16','03:34:16','2003-02-05 18:41:00','2003-02-05 18:41:00','n','n'),(33,5,1,'2002-09-06','2002-09-06','11:25:31','11:25:31','2004-01-18 13:28:24','2004-01-18 13:28:24','z','z'),(34,2,3,'2005-01-15','2005-01-15','17:00:53','17:00:53','2002-12-03 01:06:27','2002-12-03 01:06:27','f','f'),(35,1,3,'1900-01-01','1900-01-01','23:32:47','23:32:47','2006-03-03 02:58:59','2006-03-03 02:58:59','q','q'),(36,185,63,'2006-12-20','2006-12-20','00:00:00','00:00:00','2002-07-01 10:13:39','2002-07-01 10:13:39','l','l'),(37,3,4,'2002-04-17','2002-04-17','12:15:05','12:15:05','2009-01-13 20:47:01','2009-01-13 20:47:01','a','a'),(38,7,8,'2004-01-10','2004-01-10','22:26:38','22:26:38','2008-07-18 13:35:29','2008-07-18 13:35:29','c','c'),(39,8,6,'2008-03-24','2008-03-24','00:00:00','00:00:00','2001-03-15 02:44:57','2001-03-15 02:44:57','c','c'),(40,1,4,'2007-08-18','2007-08-18','00:00:00','00:00:00','2000-06-25 14:03:55','2000-06-25 14:03:55','i','i'),(41,3,9,'2005-07-22','2005-07-22','00:00:00','00:00:00','2005-12-13 21:32:03','2005-12-13 21:32:03','r','r'),(42,8,2,'2008-07-12','2008-07-12','08:59:37','08:59:37','2009-03-18 19:27:29','2009-03-18 19:27:29','g','g'),(43,159,118,'2003-08-18','2003-08-18','07:19:50','07:19:50','2004-04-10 02:50:59','2004-04-10 02:50:59','l','l'),(44,112,10,'2002-02-26','2002-02-26','03:51:46','03:51:46','2008-09-27 06:49:19','2008-09-27 06:49:19','w','w'),(45,0,9,'2007-07-26','2007-07-26','15:57:32','15:57:32','2006-02-04 15:10:41','2006-02-04 15:10:41','b','b'),(46,2,9,'1900-01-01','1900-01-01','02:57:08','02:57:08','2004-01-04 18:45:14','2004-01-04 18:45:14','i','i'),(47,1,1,'2000-07-26','2000-07-26','00:21:15','00:21:15','2009-04-04 02:52:09','2009-04-04 02:52:09','o','o'),(48,7,6,'2005-03-06','2005-03-06','23:35:02','23:35:02','2001-03-20 12:50:17','2001-03-20 12:50:17','f','f'),(49,5,2,'2005-04-16','2005-04-16','09:21:51','09:21:51','2001-11-15 10:51:46','2001-11-15 10:51:46','a','a'),(50,2,2,'2004-04-09','2004-04-09','19:21:02','19:21:02','2007-08-13 00:00:00','2007-08-13 00:00:00','j','j'),(51,5,3,'2003-05-13','2003-05-13','03:16:22','03:16:22','1900-01-01 00:00:00','1900-01-01 00:00:00','k','k'),(52,5,0,'0000-00-00','0000-00-00','00:00:00','00:00:00','2008-01-24 08:37:15','2008-01-24 08:37:15','x','x'),(53,2,8,'2000-05-27','2000-05-27','18:19:51','18:19:51','2003-03-02 10:18:02','2003-03-02 10:18:02','r','r'),(54,2,5,'2004-07-04','2004-07-04','01:42:17','01:42:17','2003-04-25 07:35:13','2003-04-25 07:35:13','t','t'),(55,9,0,'2006-03-07','2006-03-07','00:00:00','00:00:00','2006-07-11 23:31:13','2006-07-11 23:31:13','p','p'),(56,3,1,'2002-08-17','2002-08-17','20:32:51','20:32:51','2009-08-08 16:55:59','2009-08-08 16:55:59','g','g'),(57,2,9,'2003-06-08','2003-06-08','10:04:19','10:04:19','1900-01-01 00:00:00','1900-01-01 00:00:00','q','q'),(58,7,4,'1900-01-01','1900-01-01','06:39:26','06:39:26','2000-12-22 10:27:41','2000-12-22 10:27:41','m','m'),(59,4,7,'2003-10-09','2003-10-09','15:48:26','15:48:26','2002-07-20 00:00:00','2002-07-20 00:00:00','l','l'),(60,5,6,'2007-08-12','2007-08-12','02:17:23','02:17:23','2007-09-24 00:12:11','2007-09-24 00:12:11','d','d'),(61,3,3,'2008-12-13','2008-12-13','07:48:47','07:48:47','2009-01-05 06:13:21','2009-01-05 06:13:21','n','n'),(62,0,8,'0000-00-00','0000-00-00','09:09:14','09:09:14','2008-11-23 18:13:35','2008-11-23 18:13:35','l','l'),(63,1,2,'2003-07-27','2003-07-27','22:46:23','22:46:23','2002-12-19 00:00:00','2002-12-19 00:00:00','c','c'),(64,5,5,'2003-04-13','2003-04-13','19:42:42','19:42:42','2003-04-03 16:16:35','2003-04-03 16:16:35','v','v'),(65,0,3,'2007-04-25','2007-04-25','15:15:32','15:15:32','2009-04-13 13:44:41','2009-04-13 13:44:41','z','z'),(66,4,4,'2000-03-04','2000-03-04','02:50:26','02:50:26','2007-04-19 20:49:24','2007-04-19 20:49:24','h','h'),(67,0,9,'2001-08-03','2001-08-03','14:44:31','14:44:31','2002-11-15 23:36:04','2002-11-15 23:36:04','y','y'),(68,2,0,'2006-04-13','2006-04-13','00:00:00','00:00:00','2000-05-16 00:00:00','2000-05-16 00:00:00','o','o'),(69,2,1,'2006-04-22','2006-04-22','07:31:27','07:31:27','2002-06-08 06:51:27','2002-06-08 06:51:27','h','h'),(70,8,5,'2004-08-26','2004-08-26','10:48:57','10:48:57','2006-12-07 01:49:26','2006-12-07 01:49:26','h','h'),(71,8,6,'2002-11-26','2002-11-26','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','c','c'),(72,5,2,'2002-01-07','2002-01-07','23:06:00','23:06:00','2000-09-27 16:26:23','2000-09-27 16:26:23','m','m'),(73,1,0,'2005-05-07','2005-05-07','05:56:02','05:56:02','1900-01-01 00:00:00','1900-01-01 00:00:00','s','s'),(74,0,0,'2001-04-21','2001-04-21','10:44:22','10:44:22','2008-02-13 04:28:14','2008-02-13 04:28:14','t','t'),(75,7,9,'2000-09-01','2000-09-01','00:00:00','00:00:00','2000-03-10 06:17:52','2000-03-10 06:17:52','r','r'),(76,6,8,'2004-07-06','2004-07-06','01:44:26','01:44:26','2003-05-23 00:00:00','2003-05-23 00:00:00','u','u'),(77,0,6,'0000-00-00','0000-00-00','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','h','h'),(78,6,0,'2001-02-21','2001-02-21','17:01:49','17:01:49','2003-10-27 12:45:52','2003-10-27 12:45:52','p','p'),(79,9,0,'2004-01-28','2004-01-28','16:27:14','16:27:14','2004-08-06 00:00:00','2004-08-06 00:00:00','z','z'),(80,5,3,'2008-10-07','2008-10-07','00:00:00','00:00:00','2001-10-05 05:13:39','2001-10-05 05:13:39','h','h'),(81,5,5,'0000-00-00','0000-00-00','10:34:22','10:34:22','2001-03-25 04:24:51','2001-03-25 04:24:51','q','q'),(82,6,0,'2008-03-04','2008-03-04','10:48:51','10:48:51','2006-08-20 11:54:04','2006-08-20 11:54:04','l','l'),(83,1,0,'2009-05-08','2009-05-08','16:55:06','16:55:06','2003-05-16 18:14:52','2003-05-16 18:14:52','p','p'),(84,1,1,'2005-03-19','2005-03-19','14:46:32','14:46:32','2009-10-24 13:39:35','2009-10-24 13:39:35','t','t'),(85,9,8,'2007-09-14','2007-09-14','16:26:50','16:26:50','2001-08-10 00:00:00','2001-08-10 00:00:00','o','o'),(86,249,190,'2007-02-10','2007-02-10','06:35:32','06:35:32','2001-09-06 10:15:08','2001-09-06 10:15:08','o','o'),(87,3,0,'2000-06-12','2000-06-12','02:28:38','02:28:38','2006-09-27 00:00:00','2006-09-27 00:00:00','p','p'),(88,6,4,'2002-07-06','2002-07-06','00:00:00','00:00:00','2002-02-27 20:12:29','2002-02-27 20:12:29','e','e'),(89,7,2,'2001-02-25','2001-02-25','04:52:29','04:52:29','1900-01-01 00:00:00','1900-01-01 00:00:00','u','u'),(90,5,8,'2000-04-27','2000-04-27','00:00:00','00:00:00','2005-08-18 00:00:00','2005-08-18 00:00:00','z','z'),(91,4,0,'2005-08-23','2005-08-23','09:11:04','09:11:04','2000-10-15 15:52:54','2000-10-15 15:52:54','j','j'),(92,24,137,'2006-01-07','2006-01-07','22:38:18','22:38:18','2007-11-22 13:52:22','2007-11-22 13:52:22','e','e'),(93,3,7,'2007-07-08','2007-07-08','13:23:13','13:23:13','2005-09-20 09:09:48','2005-09-20 09:09:48','k','k'),(94,179,153,'2000-01-06','2000-01-06','15:33:10','15:33:10','2008-01-11 17:35:34','2008-01-11 17:35:34','d','d'),(95,5,7,'0000-00-00','0000-00-00','09:20:10','09:20:10','2002-11-01 00:00:00','2002-11-01 00:00:00','q','q'),(96,7,9,'2002-02-22','2002-02-22','11:19:10','11:19:10','2009-06-27 00:00:00','2009-06-27 00:00:00','j','j'),(97,7,2,'2001-04-17','2001-04-17','08:08:41','08:08:41','2000-09-25 14:11:58','2000-09-25 14:11:58','j','j'),(98,1,0,'2005-06-26','2005-06-26','10:17:36','10:17:36','2004-01-05 04:49:39','2004-01-05 04:49:39','e','e'),(99,5,6,'2008-09-14','2008-09-14','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','f','f'),(100,7,6,'0000-00-00','0000-00-00','01:05:02','01:05:02','2001-01-17 23:16:24','2001-01-17 23:16:24','a','a'),(101,9,2,'2001-12-20','2001-12-20','00:00:00','00:00:00','1900-01-01 00:00:00','1900-01-01 00:00:00','o','o'),(102,5,9,'2001-11-05','2001-11-05','00:00:00','00:00:00','2008-07-15 00:00:00','2008-07-15 00:00:00','y','y'),(103,4,4,'1900-01-01','1900-01-01','15:32:04','15:32:04','2001-03-06 10:00:37','2001-03-06 10:00:37','d','d'),(104,8,7,'2009-02-13','2009-02-13','20:25:36','20:25:36','2004-08-15 00:00:00','2004-08-15 00:00:00','z','z'),(105,8,6,'2008-03-25','2008-03-25','21:33:53','21:33:53','2006-10-12 06:13:06','2006-10-12 06:13:06','s','s');
analyze table t1;
analyze table t2;
EXPLAIN UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
UPDATE t1 SET col_time_nokey = 25WHERE (col_varchar_key, col_varchar_nokey) IN (  SELECT col_int_key, col_int_key  FROM t2  WHERE (col_time_key, col_int_key, col_int_key) IN (    (0, 'a', 'm'), (0, 'n', 7)  ));
DROP TABLE t1, t2;
SET sql_mode = default;
CREATE TABLE t1 (  id INT NOT NULL PRIMARY KEY,  id2 INT NOT NULL,  id3 INT NOT NULL,  KEY (id2),  KEY (id3),  KEY covering_index (id2,id3)) ENGINE=InnoDB;
INSERT INTO t1 VALUES (0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 3, 3), (4, 4, 4), (5, 5, 5), (6, 6, 6), (7, 7, 7);
INSERT INTO t1 SELECT id + 8, id2 + 8, id3 +8 FROM t1;
INSERT INTO t1 SELECT id + 16, 7, 0 FROM t1;
analyze table t1;
EXPLAIN SELECT count(*) FROM t1 WHERE id2=7 AND id3=0;
DROP TABLE t1;
CREATE TABLE t1 (  c1 VARCHAR(2),  d1 DATETIME NOT NULL);
CREATE TABLE t2 (  pk INTEGER NOT NULL,  c1 VARCHAR(2),  c2 VARCHAR(2),  PRIMARY KEY (pk),  KEY (c1),  KEY (c2)) PARTITION BY KEY(pk) PARTITIONS 2;
SELECT c1FROM t1WHERE c1 IN  SELECT t2.c1  FROM t2  WHERE t2.c1 = 'f'     OR t2.c2 < 'y'AND t1.d1 IS NULL;
DROP TABLE t1, t2;
