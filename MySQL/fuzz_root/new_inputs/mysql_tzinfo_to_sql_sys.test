  perl;
my $dir = $ENV{'MYSQLTEST_VARDIR'};
open ( OUTPUT, ">$dir/tmp/zoneinfocheck.inc") ;
@path=();
  $path[1] = "/usr/share/zoneinfo";
}elsif(-d "/usr/share/lib/zoneinfo"){  $path[1] = "/usr/share/lib/zoneinfo";
}else{   # check if whereis command knows zoneinfo location   system("whereis zoneinfo");
   if ($?==0) {      @path = split (/\s+/, `whereis zoneinfo`);
   }   if (-e "$path[1]/Japan") {      print OUTPUT "let zoneinfo_japan_path = $path[1]/Japan;\n";
   }   if (-d "$path[1]/Europe") {      print OUTPUT "let zoneinfo_europe_path = $path[1]/Europe;\n";
   }   if (-e "$path[1]/right/Europe/Moscow") {      print OUTPUT "let zoneinfo_leap_moscow_path= $path[1]/right/Europe/Moscow;\n",   }close (OUTPUT);
EOF      CREATE DATABASE test_zone;
USE test_zone;
CREATE TABLE time_zone as SELECT * FROM mysql.time_zone WHERE 1 = 0;
CREATE TABLE time_zone_leap_second as SELECT * FROM mysql.time_zone_leap_second WHERE 1 = 0;
CREATE TABLE time_zone_name as SELECT * FROM mysql.time_zone_name WHERE 1 = 0;
CREATE TABLE time_zone_transition as SELECT * FROM mysql.time_zone_transition WHERE 1 = 0;
CREATE TABLE time_zone_transition_type as SELECT * FROM mysql.time_zone_transition_type WHERE 1 = 0;
SELECT (count(*) > 0) FROM time_zone;
SELECT (count(*) > 0) FROM time_zone_name;
SELECT (count(*) > 0) FROM time_zone_transition;
SELECT (count(*) > 0) FROM time_zone_transition_type;
    SELECT (count(*) > 1) AS OK FROM time_zone_leap_second;
  # Dummy select to match the result file  SELECT (count(*) = 0) AS OK FROM time_zone_leap_second;     SELECT (count(*) > 0) FROM time_zone;
SELECT (count(*) > 0) FROM time_zone_name;
SELECT (count(*) > 0) FROM time_zone_transition;
SELECT (count(*) > 0) FROM time_zone_transition_type;
DROP DATABASE test_zone;
