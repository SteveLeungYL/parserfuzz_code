      CREATE DATABASE XY;
USE XY;
while ($i)  eval CREATE TABLE XY.T_$i (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             primary key(a, b), unique(b)) ENGINE=InnoDB;
  dec $i;
eval ALTER TABLE XY.T_$tcs ADD INDEX I1 (c, b),                           ADD CONSTRAINT C1 FOREIGN KEY (c, b) REFERENCES XY.T_1 (a, b);
eval ALTER TABLE XY.T_$tcs ADD INDEX I2 (b),                           ADD CONSTRAINT C2 FOREIGN KEY (b) REFERENCES XY.T_1(a);
while ($i)  eval SELECT * FROM XY.T_$i LIMIT 1;
  dec $i;
DROP DATABASE XY;
CREATE DATABASE XY;
USE XY;
eval CREATE TABLE XY.T_$tcs (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             PRIMARY KEY(a, b), UNIQUE(b)) ENGINE=InnoDB;
eval SELECT * FROM XY.T_$tcs LIMIT 1;
DROP DATABASE XY;
USE TEST;
SHOW VARIABLES LIKE 'lower_case_table_names';
DROP TABLE IF EXISTS `Table2`;
DROP TABLE IF EXISTS `Table1`;
CREATE TABLE `Table1`(c1 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE `Table2`(c1 INT PRIMARY KEY, c2 INT) ENGINE=InnoDB;
ALTER TABLE `Table2` ADD CONSTRAINT fk1 FOREIGN KEY(c2) REFERENCES `Table1`(c1);
query_vertical SHOW CREATE TABLE `Table2`;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE `Table2`;
DROP TABLE `Table1`;
DROP TABLE IF EXISTS Product_Order;
DROP TABLE IF EXISTS Product;
DROP TABLE IF EXISTS Customer;
CREATE TABLE Product (Category INT NOT NULL, Id INT NOT NULL,	Price DECIMAL, PRIMARY KEY(Category, Id)) ENGINE=InnoDB;
CREATE TABLE Customer (Id INT NOT NULL, PRIMARY KEY (Id)) ENGINE=InnoDB;
CREATE TABLE Product_Order (No INT NOT NULL AUTO_INCREMENT,	Product_Category INT NOT NULL,	Product_Id INT NOT NULL,	Customer_Id INT NOT NULL,	PRIMARY KEY(No),	INDEX (Product_Category, Product_Id),	FOREIGN KEY (Product_Category, Product_Id)		REFERENCES Product(Category, Id) ON UPDATE CASCADE ON DELETE RESTRICT,	INDEX (Customer_Id),	FOREIGN KEY (Customer_Id)		REFERENCES Customer(Id)	) ENGINE=INNODB;
query_vertical SHOW CREATE TABLE Product_Order;
query_vertical SHOW CREATE TABLE Product;
query_vertical SHOW CREATE TABLE Customer;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE Product_Order;
DROP TABLE Product;
DROP TABLE Customer;
CREATE DATABASE my_db;
USE my_db;
CREATE TABLE UPPERCASE_MYISAM (a INT) ENGINE=MYISAM;
CREATE TABLE lowercase_myisam (a INT) ENGINE=MYISAM;
CREATE TABLE UPPERCASE_INNODB (a INT) ENGINE=InnoDB;
CREATE TABLE lowercase_innodb (a INT) ENGINE=InnoDB;
SHOW TABLES;
CREATE USER 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_MYISAM TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_myisam TO 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_INNODB TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_innodb TO 'test_user'@'localhost';
USE my_db;
SHOW TABLES;
DROP USER 'test_user'@'localhost';
DROP DATABASE my_db;
USE test;
      CREATE DATABASE XY;
USE XY;
while ($i)  eval CREATE TABLE XY.T_$i (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             primary key(a, b), unique(b)) ENGINE=InnoDB;
  dec $i;
eval ALTER TABLE XY.T_$tcs ADD INDEX I1 (c, b),                           ADD CONSTRAINT C1 FOREIGN KEY (c, b) REFERENCES XY.T_1 (a, b);
eval ALTER TABLE XY.T_$tcs ADD INDEX I2 (b),                           ADD CONSTRAINT C2 FOREIGN KEY (b) REFERENCES XY.T_1(a);
while ($i)  eval SELECT * FROM XY.T_$i LIMIT 1;
  dec $i;
DROP DATABASE XY;
CREATE DATABASE XY;
USE XY;
eval CREATE TABLE XY.T_$tcs (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             PRIMARY KEY(a, b), UNIQUE(b)) ENGINE=InnoDB;
eval SELECT * FROM XY.T_$tcs LIMIT 1;
DROP DATABASE XY;
USE TEST;
SHOW VARIABLES LIKE 'lower_case_table_names';
DROP TABLE IF EXISTS `Table2`;
DROP TABLE IF EXISTS `Table1`;
CREATE TABLE `Table1`(c1 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE `Table2`(c1 INT PRIMARY KEY, c2 INT) ENGINE=InnoDB;
ALTER TABLE `Table2` ADD CONSTRAINT fk1 FOREIGN KEY(c2) REFERENCES `Table1`(c1);
query_vertical SHOW CREATE TABLE `Table2`;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE `Table2`;
DROP TABLE `Table1`;
DROP TABLE IF EXISTS Product_Order;
DROP TABLE IF EXISTS Product;
DROP TABLE IF EXISTS Customer;
CREATE TABLE Product (Category INT NOT NULL, Id INT NOT NULL,	Price DECIMAL, PRIMARY KEY(Category, Id)) ENGINE=InnoDB;
CREATE TABLE Customer (Id INT NOT NULL, PRIMARY KEY (Id)) ENGINE=InnoDB;
CREATE TABLE Product_Order (No INT NOT NULL AUTO_INCREMENT,	Product_Category INT NOT NULL,	Product_Id INT NOT NULL,	Customer_Id INT NOT NULL,	PRIMARY KEY(No),	INDEX (Product_Category, Product_Id),	FOREIGN KEY (Product_Category, Product_Id)		REFERENCES Product(Category, Id) ON UPDATE CASCADE ON DELETE RESTRICT,	INDEX (Customer_Id),	FOREIGN KEY (Customer_Id)		REFERENCES Customer(Id)	) ENGINE=INNODB;
query_vertical SHOW CREATE TABLE Product_Order;
query_vertical SHOW CREATE TABLE Product;
query_vertical SHOW CREATE TABLE Customer;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE Product_Order;
DROP TABLE Product;
DROP TABLE Customer;
CREATE DATABASE my_db;
USE my_db;
CREATE TABLE UPPERCASE_MYISAM (a INT) ENGINE=MYISAM;
CREATE TABLE lowercase_myisam (a INT) ENGINE=MYISAM;
CREATE TABLE UPPERCASE_INNODB (a INT) ENGINE=InnoDB;
CREATE TABLE lowercase_innodb (a INT) ENGINE=InnoDB;
SHOW TABLES;
CREATE USER 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_MYISAM TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_myisam TO 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_INNODB TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_innodb TO 'test_user'@'localhost';
USE my_db;
SHOW TABLES;
DROP USER 'test_user'@'localhost';
DROP DATABASE my_db;
USE test;
      CREATE DATABASE XY;
USE XY;
while ($i)  eval CREATE TABLE XY.T_$i (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             primary key(a, b), unique(b)) ENGINE=InnoDB;
  dec $i;
eval ALTER TABLE XY.T_$tcs ADD INDEX I1 (c, b),                           ADD CONSTRAINT C1 FOREIGN KEY (c, b) REFERENCES XY.T_1 (a, b);
eval ALTER TABLE XY.T_$tcs ADD INDEX I2 (b),                           ADD CONSTRAINT C2 FOREIGN KEY (b) REFERENCES XY.T_1(a);
while ($i)  eval SELECT * FROM XY.T_$i LIMIT 1;
  dec $i;
DROP DATABASE XY;
CREATE DATABASE XY;
USE XY;
eval CREATE TABLE XY.T_$tcs (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             PRIMARY KEY(a, b), UNIQUE(b)) ENGINE=InnoDB;
eval SELECT * FROM XY.T_$tcs LIMIT 1;
DROP DATABASE XY;
USE TEST;
SHOW VARIABLES LIKE 'lower_case_table_names';
DROP TABLE IF EXISTS `Table2`;
DROP TABLE IF EXISTS `Table1`;
CREATE TABLE `Table1`(c1 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE `Table2`(c1 INT PRIMARY KEY, c2 INT) ENGINE=InnoDB;
ALTER TABLE `Table2` ADD CONSTRAINT fk1 FOREIGN KEY(c2) REFERENCES `Table1`(c1);
query_vertical SHOW CREATE TABLE `Table2`;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE `Table2`;
DROP TABLE `Table1`;
DROP TABLE IF EXISTS Product_Order;
DROP TABLE IF EXISTS Product;
DROP TABLE IF EXISTS Customer;
CREATE TABLE Product (Category INT NOT NULL, Id INT NOT NULL,	Price DECIMAL, PRIMARY KEY(Category, Id)) ENGINE=InnoDB;
CREATE TABLE Customer (Id INT NOT NULL, PRIMARY KEY (Id)) ENGINE=InnoDB;
CREATE TABLE Product_Order (No INT NOT NULL AUTO_INCREMENT,	Product_Category INT NOT NULL,	Product_Id INT NOT NULL,	Customer_Id INT NOT NULL,	PRIMARY KEY(No),	INDEX (Product_Category, Product_Id),	FOREIGN KEY (Product_Category, Product_Id)		REFERENCES Product(Category, Id) ON UPDATE CASCADE ON DELETE RESTRICT,	INDEX (Customer_Id),	FOREIGN KEY (Customer_Id)		REFERENCES Customer(Id)	) ENGINE=INNODB;
query_vertical SHOW CREATE TABLE Product_Order;
query_vertical SHOW CREATE TABLE Product;
query_vertical SHOW CREATE TABLE Customer;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE Product_Order;
DROP TABLE Product;
DROP TABLE Customer;
CREATE DATABASE my_db;
USE my_db;
CREATE TABLE UPPERCASE_MYISAM (a INT) ENGINE=MYISAM;
CREATE TABLE lowercase_myisam (a INT) ENGINE=MYISAM;
CREATE TABLE UPPERCASE_INNODB (a INT) ENGINE=InnoDB;
CREATE TABLE lowercase_innodb (a INT) ENGINE=InnoDB;
SHOW TABLES;
CREATE USER 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_MYISAM TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_myisam TO 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_INNODB TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_innodb TO 'test_user'@'localhost';
USE my_db;
SHOW TABLES;
DROP USER 'test_user'@'localhost';
DROP DATABASE my_db;
USE test;
      CREATE DATABASE XY;
USE XY;
while ($i)  eval CREATE TABLE XY.T_$i (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             primary key(a, b), unique(b)) ENGINE=InnoDB;
  dec $i;
eval ALTER TABLE XY.T_$tcs ADD INDEX I1 (c, b),                           ADD CONSTRAINT C1 FOREIGN KEY (c, b) REFERENCES XY.T_1 (a, b);
eval ALTER TABLE XY.T_$tcs ADD INDEX I2 (b),                           ADD CONSTRAINT C2 FOREIGN KEY (b) REFERENCES XY.T_1(a);
while ($i)  eval SELECT * FROM XY.T_$i LIMIT 1;
  dec $i;
DROP DATABASE XY;
CREATE DATABASE XY;
USE XY;
eval CREATE TABLE XY.T_$tcs (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             PRIMARY KEY(a, b), UNIQUE(b)) ENGINE=InnoDB;
eval SELECT * FROM XY.T_$tcs LIMIT 1;
DROP DATABASE XY;
USE TEST;
SHOW VARIABLES LIKE 'lower_case_table_names';
DROP TABLE IF EXISTS `Table2`;
DROP TABLE IF EXISTS `Table1`;
CREATE TABLE `Table1`(c1 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE `Table2`(c1 INT PRIMARY KEY, c2 INT) ENGINE=InnoDB;
ALTER TABLE `Table2` ADD CONSTRAINT fk1 FOREIGN KEY(c2) REFERENCES `Table1`(c1);
query_vertical SHOW CREATE TABLE `Table2`;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE `Table2`;
DROP TABLE `Table1`;
DROP TABLE IF EXISTS Product_Order;
DROP TABLE IF EXISTS Product;
DROP TABLE IF EXISTS Customer;
CREATE TABLE Product (Category INT NOT NULL, Id INT NOT NULL,	Price DECIMAL, PRIMARY KEY(Category, Id)) ENGINE=InnoDB;
CREATE TABLE Customer (Id INT NOT NULL, PRIMARY KEY (Id)) ENGINE=InnoDB;
CREATE TABLE Product_Order (No INT NOT NULL AUTO_INCREMENT,	Product_Category INT NOT NULL,	Product_Id INT NOT NULL,	Customer_Id INT NOT NULL,	PRIMARY KEY(No),	INDEX (Product_Category, Product_Id),	FOREIGN KEY (Product_Category, Product_Id)		REFERENCES Product(Category, Id) ON UPDATE CASCADE ON DELETE RESTRICT,	INDEX (Customer_Id),	FOREIGN KEY (Customer_Id)		REFERENCES Customer(Id)	) ENGINE=INNODB;
query_vertical SHOW CREATE TABLE Product_Order;
query_vertical SHOW CREATE TABLE Product;
query_vertical SHOW CREATE TABLE Customer;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE Product_Order;
DROP TABLE Product;
DROP TABLE Customer;
CREATE DATABASE my_db;
USE my_db;
CREATE TABLE UPPERCASE_MYISAM (a INT) ENGINE=MYISAM;
CREATE TABLE lowercase_myisam (a INT) ENGINE=MYISAM;
CREATE TABLE UPPERCASE_INNODB (a INT) ENGINE=InnoDB;
CREATE TABLE lowercase_innodb (a INT) ENGINE=InnoDB;
SHOW TABLES;
CREATE USER 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_MYISAM TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_myisam TO 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_INNODB TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_innodb TO 'test_user'@'localhost';
USE my_db;
SHOW TABLES;
DROP USER 'test_user'@'localhost';
DROP DATABASE my_db;
USE test;
      CREATE DATABASE XY;
USE XY;
while ($i)  eval CREATE TABLE XY.T_$i (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             primary key(a, b), unique(b)) ENGINE=InnoDB;
  dec $i;
eval ALTER TABLE XY.T_$tcs ADD INDEX I1 (c, b),                           ADD CONSTRAINT C1 FOREIGN KEY (c, b) REFERENCES XY.T_1 (a, b);
eval ALTER TABLE XY.T_$tcs ADD INDEX I2 (b),                           ADD CONSTRAINT C2 FOREIGN KEY (b) REFERENCES XY.T_1(a);
while ($i)  eval SELECT * FROM XY.T_$i LIMIT 1;
  dec $i;
DROP DATABASE XY;
CREATE DATABASE XY;
USE XY;
eval CREATE TABLE XY.T_$tcs (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, d INT,                             PRIMARY KEY(a, b), UNIQUE(b)) ENGINE=InnoDB;
eval SELECT * FROM XY.T_$tcs LIMIT 1;
DROP DATABASE XY;
USE TEST;
SHOW VARIABLES LIKE 'lower_case_table_names';
DROP TABLE IF EXISTS `Table2`;
DROP TABLE IF EXISTS `Table1`;
CREATE TABLE `Table1`(c1 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE `Table2`(c1 INT PRIMARY KEY, c2 INT) ENGINE=InnoDB;
ALTER TABLE `Table2` ADD CONSTRAINT fk1 FOREIGN KEY(c2) REFERENCES `Table1`(c1);
query_vertical SHOW CREATE TABLE `Table2`;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE `Table2`;
DROP TABLE `Table1`;
DROP TABLE IF EXISTS Product_Order;
DROP TABLE IF EXISTS Product;
DROP TABLE IF EXISTS Customer;
CREATE TABLE Product (Category INT NOT NULL, Id INT NOT NULL,	Price DECIMAL, PRIMARY KEY(Category, Id)) ENGINE=InnoDB;
CREATE TABLE Customer (Id INT NOT NULL, PRIMARY KEY (Id)) ENGINE=InnoDB;
CREATE TABLE Product_Order (No INT NOT NULL AUTO_INCREMENT,	Product_Category INT NOT NULL,	Product_Id INT NOT NULL,	Customer_Id INT NOT NULL,	PRIMARY KEY(No),	INDEX (Product_Category, Product_Id),	FOREIGN KEY (Product_Category, Product_Id)		REFERENCES Product(Category, Id) ON UPDATE CASCADE ON DELETE RESTRICT,	INDEX (Customer_Id),	FOREIGN KEY (Customer_Id)		REFERENCES Customer(Id)	) ENGINE=INNODB;
query_vertical SHOW CREATE TABLE Product_Order;
query_vertical SHOW CREATE TABLE Product;
query_vertical SHOW CREATE TABLE Customer;
query_vertical SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTSWHERE CONSTRAINT_SCHEMA != 'PERFORMANCE_SCHEMA';
DROP TABLE Product_Order;
DROP TABLE Product;
DROP TABLE Customer;
CREATE DATABASE my_db;
USE my_db;
CREATE TABLE UPPERCASE_MYISAM (a INT) ENGINE=MYISAM;
CREATE TABLE lowercase_myisam (a INT) ENGINE=MYISAM;
CREATE TABLE UPPERCASE_INNODB (a INT) ENGINE=InnoDB;
CREATE TABLE lowercase_innodb (a INT) ENGINE=InnoDB;
SHOW TABLES;
CREATE USER 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_MYISAM TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_myisam TO 'test_user'@'localhost';
GRANT SELECT ON my_db.UPPERCASE_INNODB TO 'test_user'@'localhost';
GRANT SELECT ON my_db.lowercase_innodb TO 'test_user'@'localhost';
USE my_db;
SHOW TABLES;
DROP USER 'test_user'@'localhost';
DROP DATABASE my_db;
USE test;
