  CREATE TABLE t1 (f1 INT INVISIBLE, f2 INT INVISIBLE);
CREATE TABLE t1 (f1 INT);
ALTER TABLE t1 ALTER f1 SET INVISIBLE;
DROP TABLE t1;
CREATE TABLE t1 (f1 INT, f2 INT INVISIBLE VISIBLE);
SHOW CREATE TABLE t1;
SHOW COLUMNS FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (f1 INT, f2 INT VISIBLE, f3 INT INVISIBLE,                             f4 INT GENERATED ALWAYS AS                                    ((`f1` + `f2`)) VIRTUAL INVISIBLE,                             f5 INT GENERATED ALWAYS AS                                    ((`f1` + `f2`)) STORED INVISIBLE);
SHOW CREATE TABLE t1;
SHOW COLUMNS FROM t1;
SHOW EXTENDED COLUMNS FROM t1;
DROP TABLE t1;
CREATE TEMPORARY TABLE temp (f1 INT, f2 INT VISIBLE, f3 INT INVISIBLE,                             f4 INT GENERATED ALWAYS AS                                    ((`f1` + `f2`)) VIRTUAL INVISIBLE,                             f5 INT GENERATED ALWAYS AS                                    ((`f1` + `f2`)) STORED INVISIBLE);
SHOW CREATE TABLE temp;
SHOW COLUMNS FROM temp;
SHOW EXTENDED COLUMNS FROM temp;
DROP TABLE temp;
CREATE TABLE t1 (f1 INT, f2 INT INVISIBLE);
INSERT INTO t1 (f1, f2) VALUES (1, 2);
SELECT * FROM t1;
SELECT f1, f2 FROM t1;
SELECT *, f2 FROM t1;
SELECT t.f1 FROM (SELECT * FROM t1) AS t;
SELECT t.f2 FROM (SELECT * FROM t1) AS t;
CREATE TABLE t2 (f3 INT, f2 INT INVISIBLE);
INSERT INTO t2 (f3, f2) VALUES (5, 2);
SELECT t1.*, t2.f2 FROM t1 JOIN t2;
DROP TABLE t1, t2;
CREATE TABLE t1 (f1 INT, f2 INT VISIBLE, f3 INT INVISIBLE);
INSERT INTO t1 VALUES (10, 20);
SELECT * FROM t1;
SELECT f1, f2, f3 FROM t1;
DELETE FROM t1;
INSERT INTO t1(f1, f2, f3) VALUES (1, 2, 3);
SELECT * FROM t1;
SELECT f1, f2, f3 FROM t1;
DELETE FROM t1;
ALTER TABLE t1 ALTER f3 SET DEFAULT 8;
SHOW CREATE TABLE t1;
INSERT INTO t1 VALUES (10, 20);
SELECT * FROM t1;
SELECT f1, f2, f3 FROM t1;
ALTER TABLE t1 ADD COLUMN f4 INT AS (f1 + f2) INVISIBLE;
SHOW CREATE TABLE t1;
SHOW COLUMNS FROM t1;
SELECT * FROM t1;
SELECT f4 FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (c0 INT,  c1 BIT(7) INVISIBLE,  c2 BOOLEAN INVISIBLE,  c3 TINYINT INVISIBLE,  c4 SMALLINT INVISIBLE,  c5 MEDIUMINT INVISIBLE,  c6 INT INVISIBLE,  c7 BIGINT INVISIBLE,  c8 DECIMAL(6,2) INVISIBLE,  c9 FLOAT INVISIBLE,  c10 DOUBLE INVISIBLE,  c11 CHAR(1) INVISIBLE,  c12 VARCHAR(1) INVISIBLE,  c13 BINARY(1) INVISIBLE,  c14 VARBINARY(1) INVISIBLE,  c15 TINYBLOB INVISIBLE,  c16 TINYTEXT INVISIBLE,  c17 BLOB INVISIBLE,  c18 TEXT INVISIBLE,  c19 MEDIUMBLOB INVISIBLE,  c20 MEDIUMTEXT INVISIBLE,  c21 LONGBLOB INVISIBLE,  c22 LONGTEXT INVISIBLE,  c23 DATE INVISIBLE,  c24 DATETIME INVISIBLE,  c25 TIMESTAMP INVISIBLE,  c26 TIME INVISIBLE,  c27 YEAR INVISIBLE,  c28 JSON INVISIBLE,  c29 ENUM('a', 'b') INVISIBLE,  c30 SET('a', 'b') INVISIBLE,  c31 POINT INVISIBLE,  c32 LINESTRING INVISIBLE,  c33 MULTILINESTRING INVISIBLE,  c34 POLYGON INVISIBLE,  c35 MULTIPOLYGON INVISIBLE);
SHOW CREATE TABLE t1;
SHOW COLUMNS FROM t1;
INSERT INTO t1 VALUES (10);
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (f1 INT, f2 INT INVISIBLE DEFAULT 8);
INSERT INTO t1(f1, f2) VALUES  (10, 10), (20, 8);
SHOW CREATE TABLE t1;
SHOW COLUMNS FROM t1;
SELECT f1, f2 FROM t1 ORDER BY f1;
DELETE FROM t1 WHERE f2 = 10;
UPDATE t1 SET f2 = 20;
SELECT f1, f2 FROM t1;
DELETE FROM t1;
INSERT INTO t1 VALUES  (10);
ALTER TABLE t1 ADD INDEX idx(f2);
SHOW CREATE TABLE t1;
SHOW COLUMNS FROM t1;
ALTER TABLE t1 DROP INDEX idx, ADD UNIQUE INDEX (f2);
SHOW CREATE TABLE t1;
INSERT INTO t1 VALUES  (10);
INSERT INTO t1(f1, f2) VALUES  (10, 10);
SELECT f1, f2 FROM t1 ORDER BY f2;
ALTER TABLE t1 DROP INDEX f2, ADD PRIMARY KEY (f2);
SHOW CREATE TABLE t1;
INSERT INTO t1 VALUES  (10);
INSERT INTO t1(f1, f2) VALUES  (10, 20);
SELECT f1, f2 FROM t1 ORDER BY f2;
ALTER TABLE t1 MODIFY f2 INT INVISIBLE AUTO_INCREMENT;
SHOW CREATE TABLE t1;
INSERT INTO t1 VALUES  (10);
SELECT f1, f2 FROM t1 ORDER BY f2;
ALTER TABLE t1 MODIFY f2 INT INVISIBLE, ADD CHECK(f2 < 20000);
SHOW CREATE TABLE t1;
INSERT INTO t1(f1, f2) VALUES  (10, 20000);
SELECT f1, f2 FROM t1 ORDER BY f2;
DROP TABLE t1;
CREATE TABLE t1 (f1 INT, f2 INT);
INSERT INTO t1 VALUES (10, 90);
SHOW CREATE TABLE t1;
SELECT * FROM t1;
ALTER TABLE t1 ALTER COLUMN f1 SET INVISIBLE;
SHOW CREATE TABLE t1;
SELECT * FROM t1;
SELECT f1, f2 FROM t1;
ALTER TABLE t1 ALTER COLUMN f2 SET INVISIBLE;
ALTER TABLE t1 ALTER COLUMN f1 SET VISIBLE;
SHOW CREATE TABLE t1;
SELECT * FROM t1;
ALTER TABLE t1 CHANGE f1 f1 INT INVISIBLE;
SHOW CREATE TABLE t1;
SELECT * FROM t1;
SELECT f1, f2 FROM t1;
ALTER TABLE t1 CHANGE f2 f2 INT INVISIBLE;
ALTER TABLE t1 CHANGE f1 f1 INT VISIBLE;
SHOW CREATE TABLE t1;
SELECT * FROM t1;
ALTER TABLE t1 MODIFY f1 INT INVISIBLE;
SHOW CREATE TABLE t1;
SELECT * FROM t1;
SELECT f1, f2 FROM t1;
ALTER TABLE t1 MODIFY f2 INT INVISIBLE;
ALTER TABLE t1 MODIFY f1 INT VISIBLE;
SHOW CREATE TABLE t1;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1(f1 INT INVISIBLE, f2 INT);
CREATE TABLE t2(f1 INT, f2 INT);
SHOW CREATE TABLE t1;
SHOW CREATE TABLE t2;
INSERT INTO t1(f1, f2) VALUES (10, 20), (20, 30);
INSERT INTO t2 VALUES (10, 20), (20, 30);
DELETE FROM t1;
SELECT * FROM t1 ORDER BY f2;
SELECT f1, f2 FROM t1 ORDER BY f2;
DELETE FROM t1;
SELECT * FROM t1 ORDER BY f2;
SELECT f1, f2 FROM t1 ORDER BY f1;
DELETE FROM t1;
SELECT * FROM t1;
SELECT f1, f2 FROM t1;
DELETE FROM t1;
SELECT * FROM t1;
SELECT f1, f2 FROM t1;
DELETE FROM t1;
SELECT * FROM t1;
SELECT f1, f2 FROM t1;
ALTER TABLE t1 DROP COLUMN f1;
DELETE FROM t1;
ALTER TABLE t1 ADD COLUMN f1 INT INVISIBLE;
SELECT * FROM t1;
SELECT f1, f2 FROM t1;
DROP TABLE t1, t2;
remove_file $MYSQLTEST_VARDIR/tmp/test1.sql;
remove_file $MYSQLTEST_VARDIR/tmp/test2.sql;
remove_file $MYSQLTEST_VARDIR/tmp/tmp1.xml;
CREATE TABLE t1(f1 INT INVISIBLE, f2 INT);
INSERT INTO t1(f1, f2) VALUES (10, 20), (30, 40);
CREATE VIEW v1 AS SELECT * FROM t1;
SHOW CREATE VIEW v1;
SHOW COLUMNS FROM v1;
SELECT * FROM v1 ORDER BY f2;
CREATE VIEW v2 AS SELECT f1, f2 FROM t1;
SHOW CREATE VIEW v2;
SHOW COLUMNS FROM v2;
SELECT * FROM v2 ORDER BY f2;
CREATE VIEW v3 AS SELECT f1 FROM t1;
SHOW CREATE VIEW v3;
SHOW COLUMNS FROM v3;
SELECT * FROM v3 ORDER BY f1;
DROP VIEW v1, v2;
SELECT TABLE_NAME, COLUMN_NAME, EXTRA FROM INFORMATION_SCHEMA.COLUMNSWHERE TABLE_SCHEMA='test' ORDER BY TABLE_NAME, COLUMN_NAME;
DROP VIEW v3;
ALTER TABLE t1 ADD PRIMARY KEY (f1);
SHOW CREATE TABLE t1;
SELECT f1, f2 FROM t1 ORDER BY f2;
REPLACE INTO t1(f1, f2) VALUE (10, 88);
SELECT f1, f2 FROM t1 ORDER BY f2;
INSERT INTO t1(f1, f2) VALUES (30, 44) ON DUPLICATE KEY UPDATE f2=88;
SELECT f1, f2 FROM t1 ORDER BY f1;
CREATE TABLE t2 LIKE t1;
SHOW CREATE TABLE t2;
SHOW COLUMNS FROM t2;
DROP TABLE t2;
CREATE TABLE t2 SELECT * FROM t1;
SHOW CREATE TABLE t2;
SHOW COLUMNS FROM t2;
SELECT * FROM t2;
DROP TABLE t2;
CREATE TABLE t2 SELECT f1, f2 FROM t1;
SHOW CREATE TABLE t2;
SHOW COLUMNS FROM t2;
SELECT * FROM t2 ORDER BY f1;
DROP TABLE t2;
CREATE TABLE t2(f1 INT INVISIBLE) SELECT f1, f2 FROM t1;
SHOW CREATE TABLE t2;
SHOW COLUMNS FROM t2;
SELECT * FROM t2;
DROP TABLE t2;
CREATE TEMPORARY TABLE t2 SELECT * FROM t1;
SHOW CREATE TABLE t2;
SHOW COLUMNS FROM t2;
SELECT * FROM t2;
DROP TABLE t2;
CREATE TEMPORARY TABLE t2 SELECT f1, f2 FROM t1;
SHOW CREATE TABLE t2;
SHOW COLUMNS FROM t2;
SELECT * FROM t2 ORDER BY f1;
DROP TABLE t2;
CREATE TEMPORARY TABLE t2(f1 INT INVISIBLE) SELECT f1, f2 FROM t1;
SHOW CREATE TABLE t2;
SHOW COLUMNS FROM t2;
SELECT * FROM t2;
DROP TABLE t2;
DROP TABLE t1;
CREATE USER user1@localhost;
CREATE DATABASE db1;
USE db1;
CREATE TABLE t1(f1 INT DEFAULT 10, f2 INT);
INSERT INTO t1(f2) VALUES(1);
GRANT SELECT(f2) ON db1.t1 TO user1@localhost;
connect (con1, localhost, user1, , db1);
SELECT * FROM t1;
connection default;
ALTER TABLE t1 ALTER COLUMN f1 SET INVISIBLE;
connection con1;
SELECT * FROM t1;
SELECT f1 FROM t1;
connection default;
REVOKE ALL ON db1.t1 FROM user1@localhost;
connection con1;
INSERT INTO t1 VALUES(2);
INSERT INTO t1(f1) VALUES (11);
connection default;
GRANT INSERT ON db1.t1 TO user1@localhost;
connection con1;
INSERT INTO t1 VALUES(2);
INSERT INTO t1(f1) VALUES (11);
connection default;
REVOKE ALL ON db1.t1 FROM user1@localhost;
connection con1;
INSERT INTO t1 VALUES(3);
INSERT INTO t1(f1) VALUES (12);
connection default;
GRANT INSERT(f1), SELECT(f1, f2) ON db1.t1 TO user1@localhost;
connection con1;
INSERT INTO t1 VALUES(3);
INSERT INTO t1(f1) VALUES (12);
connection default;
disconnect con1;
USE test;
DROP DATABASE db1;
DROP USER user1@localhost;
CREATE TABLE t1(a INT, b INT INVISIBLE);
CREATE TABLE t2(c INT, b INT INVISIBLE);
INSERT INTO t1(b) VALUES (1), (2), (3);
INSERT INTO t2(b) VALUES (1), (2), (3);
SELECT * FROM t1 JOIN t2;
SELECT * FROM t1 JOIN t2 WHERE (t1.b = t2.b);
SELECT * FROM t1 JOIN t2 ON (t1.b = t2.b);
SELECT * FROM t1 JOIN t2 USING(b) ORDER BY (b);
DROP TABLE t1, t2;
CREATE TABLE t1(a INT, my_row_id INT);
CREATE TABLE t2(a INT, my_row_id INT INVISIBLE);
DROP TABLE t1, t2;
