    123456EOF    let $fmt= FORMAT=JSON;
  let $fmt= FORMAT=TRADITIONAL;
connection cq;
SET DEBUG_SYNC= 'RESET';
eval EXPLAIN $fmt $query;
eval SET DEBUG_SYNC= '$point SIGNAL ready_for_explain WAIT_FOR explained';
send_eval $query;
connection ce;
SET DEBUG_SYNC= 'now WAIT_FOR ready_for_explain';
SET DEBUG_SYNC= 'after_explain_other SIGNAL explained';
eval EXPLAIN $fmt FOR CONNECTION $QID;
connection cq;
reap;
SET DEBUG_SYNC= 'RESET';
  die "Error from diff";
echo QUERY: $query;
echo STATUS:NOT_EQUAL;
echo SYNC_POINT:$point;
echo Diff: EXPLAIN NORMAL vs OTHER;
echo QUERY: $query;
echo STATUS: EQUAL;
remove_file $MYSQL_TMP_DIR/EN;
remove_file $MYSQL_TMP_DIR/EO;
remove_file $MYSQL_TMP_DIR/ED;
  let $fmt= FORMAT=JSON;
  let $fmt= FORMAT=TRADITIONAL;
connection cq;
SET DEBUG_SYNC= 'RESET';
eval EXPLAIN $fmt $query;
eval SET DEBUG_SYNC= '$point SIGNAL ready_for_explain WAIT_FOR explained';
send_eval $query;
connection ce;
SET DEBUG_SYNC= 'now WAIT_FOR ready_for_explain';
SET DEBUG_SYNC= 'after_explain_other SIGNAL explained';
eval EXPLAIN $fmt FOR CONNECTION $QID;
connection cq;
reap;
SET DEBUG_SYNC= 'RESET';
  die "Error from diff";
echo QUERY: $query;
echo STATUS:NOT_EQUAL;
echo SYNC_POINT:$point;
echo Diff: EXPLAIN NORMAL vs OTHER;
echo QUERY: $query;
echo STATUS: EQUAL;
remove_file $MYSQL_TMP_DIR/EN;
remove_file $MYSQL_TMP_DIR/EO;
remove_file $MYSQL_TMP_DIR/ED;
  let $fmt= FORMAT=JSON;
  let $fmt= FORMAT=TRADITIONAL;
connection cq;
SET DEBUG_SYNC= 'RESET';
eval EXPLAIN $fmt $query;
eval SET DEBUG_SYNC= '$point SIGNAL ready_for_explain WAIT_FOR explained';
send_eval $query;
connection ce;
SET DEBUG_SYNC= 'now WAIT_FOR ready_for_explain';
SET DEBUG_SYNC= 'after_explain_other SIGNAL explained';
eval EXPLAIN $fmt FOR CONNECTION $QID;
connection cq;
reap;
SET DEBUG_SYNC= 'RESET';
  die "Error from diff";
echo QUERY: $query;
echo STATUS:NOT_EQUAL;
echo SYNC_POINT:$point;
echo Diff: EXPLAIN NORMAL vs OTHER;
echo QUERY: $query;
echo STATUS: EQUAL;
remove_file $MYSQL_TMP_DIR/EN;
remove_file $MYSQL_TMP_DIR/EO;
remove_file $MYSQL_TMP_DIR/ED;
 echo "WL6369 Explain for Connection";
        let $format=json;
  connect (ce, localhost, root,,test);
  connect (cq, localhost, root,,test);
  connection cq;
  SET GLOBAL innodb_stats_persistent=on;
  let $point=   before_reset_query_plan;    create table t1 (a int, c int) ;
  insert into t1 values (1, 2), (2, 3), (2, 4), (3, 5) ;
  create table t2 (a int, c int) ;
  insert into t2 values (1, 5), (2, 4), (3, 3), (3,3) ;
  ANALYZE TABLE t1, t2;
  let $point=   before_reset_query_plan;let $query=  SELECT group_concat(c order by (select c from t2 where t2.a=t1.a limit 1)) as grp from t1 ;
  drop table t1,t2;
  CREATE TABLE t1 (a VARCHAR(10), FULLTEXT KEY a (a)) ;
  INSERT INTO t1 VALUES (1),(2) ;
  CREATE TABLE t2 (b INT) ;
  INSERT INTO t2 VALUES (1),(2) ;
  let $point=   before_reset_query_plan;let $query=  SELECT * FROM t1 UNION SELECT * FROM t1 ORDER BY (SELECT a FROM t2 WHERE b = 12) ;
  DROP TABLE t1,t2 ;
  let $point=   before_reset_query_plan;let $query=  SELECT SQL_CALC_FOUND_ROWS 'foo' UNION SELECT 'bar' LIMIT 0 ;
  