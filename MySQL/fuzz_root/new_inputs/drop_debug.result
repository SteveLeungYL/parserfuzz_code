CREATE TABLE t1 (i INT) ENGINE=MyISAM;
connect  con1, localhost, root;
SET SESSION DEBUG='+d,fail_while_dropping_dd_object';
DROP TABLE t1;
ERROR HY000: Lock wait timeout exceeded; try restarting transactionSET SESSION DEBUG='-d,fail_while_dropping_dd_object';
connection default;
DROP TABLE IF EXISTS t1;
connection con1;
disconnect con1;
connection default;
CREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i (t_i INT) ENGINE=InnoDB;
CREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TABLES t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
ERROR 42S02: Unknown table 'test.t_no_such_table,test.t_no_such_table_either'SELECT * FROM t_m, t_i, tt_m, tt_i;
t_m	t_i	tt_m	tt_iDROP TEMPORARY TABLES tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
ERROR 42S02: Unknown table 'test.tt_no_such_table,test.tt_no_such_table_either'SELECT * FROM tt_m, tt_i;
tt_m	tt_iDROP TABLES IF EXISTS t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
Note	1051	Unknown table 'test.t_no_such_table'Note	1051	Unknown table 'test.t_no_such_table_either'SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i;
ERROR 42S02: Table 'test.t_i' doesn't existCREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TEMPORARY TABLES IF EXISTS tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
Note	1051	Unknown table 'test.tt_no_such_table'Note	1051	Unknown table 'test.tt_no_such_table_either'SELECT * FROM tt_m;
ERROR 42S02: Table 'test.tt_m' doesn't existSELECT * FROM tt_i;
ERROR 42S02: Table 'test.tt_i' doesn't existCREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i_1 (t_i_1 INT) ENGINE=InnoDB;
CREATE TABLE t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE t_i_3 (t_i_3 INT, FOREIGN KEY(t_i_3) REFERENCES t_i_2(t_i_2)) ENGINE=InnoDB;
DROP TABLES t_m, t_i_1, t_i_2;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't_i_3_ibfk_1' on table 't_i_3'.SELECT * FROM t_m;
t_mSELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_2;
t_i_2SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_m, t_i_1;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i_1;
t_i_1SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_i_1, t_i_3;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_3;
t_i_3DROP TABLES t_i_1, t_i_3, t_i_2;
CREATE TABLE t1 (a INT) ENGINE=MyISAM;
FLUSH TABLE t1;
DROP TABLE t1;
ERROR HY000: Storage engine can't drop table 'test.t1' because it is missing. Use DROP TABLE IF EXISTS to remove it from data-dictionary.DROP TABLE IF EXISTS t1;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE mysqltest.t_i_1 (t_i_1 INT) ENGINE= InnoDB;
CREATE TABLE mysqltest.t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE= InnoDB;
CREATE FUNCTION mysqltest.f1() RETURNS INT RETURN 0;
CREATE TABLE t1 (fk INT,FOREIGN KEY (fk) REFERENCES mysqltest.t_i_2(t_i_2))ENGINE=InnoDB;
DROP DATABASE mysqltest;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't1_ibfk_1' on table 't1'.SELECT * FROM mysqltest.t_m;
t_mSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP TABLE t1;
SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
SET SESSION DEBUG='+d,fail_drop_db_routines';
DROP DATABASE mysqltest;
ERROR HY000: Failed to DROP ROUTINE SET SESSION DEBUG='-d,fail_drop_db_routines';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP DATABASE mysqltest;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t1 (i INT) ENGINE=MYISAM;
SET DEBUG='+d,crash_copy_before_commit';
ALTER TABLE mysqltest.t1 ADD COLUMN j INT;
ERROR HY000: Lost connection to MySQL server during queryt1.MYDDROP DATABASE mysqltest;
CREATE TABLE t(i INT);
SET debug = '+d,simulate_failure_in_before_commit_hook';
SET debug = '-d,simulate_failure_in_before_commit_hook';
DROP TABLE t;
CREATE TABLE t1 (i INT) ENGINE=MyISAM;
connect  con1, localhost, root;
SET SESSION DEBUG='+d,fail_while_dropping_dd_object';
DROP TABLE t1;
ERROR HY000: Lock wait timeout exceeded; try restarting transactionSET SESSION DEBUG='-d,fail_while_dropping_dd_object';
connection default;
DROP TABLE IF EXISTS t1;
connection con1;
disconnect con1;
connection default;
CREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i (t_i INT) ENGINE=InnoDB;
CREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TABLES t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
ERROR 42S02: Unknown table 'test.t_no_such_table,test.t_no_such_table_either'SELECT * FROM t_m, t_i, tt_m, tt_i;
t_m	t_i	tt_m	tt_iDROP TEMPORARY TABLES tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
ERROR 42S02: Unknown table 'test.tt_no_such_table,test.tt_no_such_table_either'SELECT * FROM tt_m, tt_i;
tt_m	tt_iDROP TABLES IF EXISTS t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
Note	1051	Unknown table 'test.t_no_such_table'Note	1051	Unknown table 'test.t_no_such_table_either'SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i;
ERROR 42S02: Table 'test.t_i' doesn't existCREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TEMPORARY TABLES IF EXISTS tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
Note	1051	Unknown table 'test.tt_no_such_table'Note	1051	Unknown table 'test.tt_no_such_table_either'SELECT * FROM tt_m;
ERROR 42S02: Table 'test.tt_m' doesn't existSELECT * FROM tt_i;
ERROR 42S02: Table 'test.tt_i' doesn't existCREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i_1 (t_i_1 INT) ENGINE=InnoDB;
CREATE TABLE t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE t_i_3 (t_i_3 INT, FOREIGN KEY(t_i_3) REFERENCES t_i_2(t_i_2)) ENGINE=InnoDB;
DROP TABLES t_m, t_i_1, t_i_2;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't_i_3_ibfk_1' on table 't_i_3'.SELECT * FROM t_m;
t_mSELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_2;
t_i_2SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_m, t_i_1;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i_1;
t_i_1SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_i_1, t_i_3;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_3;
t_i_3DROP TABLES t_i_1, t_i_3, t_i_2;
CREATE TABLE t1 (a INT) ENGINE=MyISAM;
FLUSH TABLE t1;
DROP TABLE t1;
ERROR HY000: Storage engine can't drop table 'test.t1' because it is missing. Use DROP TABLE IF EXISTS to remove it from data-dictionary.DROP TABLE IF EXISTS t1;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE mysqltest.t_i_1 (t_i_1 INT) ENGINE= InnoDB;
CREATE TABLE mysqltest.t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE= InnoDB;
CREATE FUNCTION mysqltest.f1() RETURNS INT RETURN 0;
CREATE TABLE t1 (fk INT,FOREIGN KEY (fk) REFERENCES mysqltest.t_i_2(t_i_2))ENGINE=InnoDB;
DROP DATABASE mysqltest;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't1_ibfk_1' on table 't1'.SELECT * FROM mysqltest.t_m;
t_mSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP TABLE t1;
SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
SET SESSION DEBUG='+d,fail_drop_db_routines';
DROP DATABASE mysqltest;
ERROR HY000: Failed to DROP ROUTINE SET SESSION DEBUG='-d,fail_drop_db_routines';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP DATABASE mysqltest;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t1 (i INT) ENGINE=MYISAM;
SET DEBUG='+d,crash_copy_before_commit';
ALTER TABLE mysqltest.t1 ADD COLUMN j INT;
ERROR HY000: Lost connection to MySQL server during queryt1.MYDDROP DATABASE mysqltest;
CREATE TABLE t(i INT);
SET debug = '+d,simulate_failure_in_before_commit_hook';
SET debug = '-d,simulate_failure_in_before_commit_hook';
DROP TABLE t;
CREATE TABLE t1 (i INT) ENGINE=MyISAM;
connect  con1, localhost, root;
SET SESSION DEBUG='+d,fail_while_dropping_dd_object';
DROP TABLE t1;
ERROR HY000: Lock wait timeout exceeded; try restarting transactionSET SESSION DEBUG='-d,fail_while_dropping_dd_object';
connection default;
DROP TABLE IF EXISTS t1;
connection con1;
disconnect con1;
connection default;
CREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i (t_i INT) ENGINE=InnoDB;
CREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TABLES t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
ERROR 42S02: Unknown table 'test.t_no_such_table,test.t_no_such_table_either'SELECT * FROM t_m, t_i, tt_m, tt_i;
t_m	t_i	tt_m	tt_iDROP TEMPORARY TABLES tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
ERROR 42S02: Unknown table 'test.tt_no_such_table,test.tt_no_such_table_either'SELECT * FROM tt_m, tt_i;
tt_m	tt_iDROP TABLES IF EXISTS t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
Note	1051	Unknown table 'test.t_no_such_table'Note	1051	Unknown table 'test.t_no_such_table_either'SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i;
ERROR 42S02: Table 'test.t_i' doesn't existCREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TEMPORARY TABLES IF EXISTS tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
Note	1051	Unknown table 'test.tt_no_such_table'Note	1051	Unknown table 'test.tt_no_such_table_either'SELECT * FROM tt_m;
ERROR 42S02: Table 'test.tt_m' doesn't existSELECT * FROM tt_i;
ERROR 42S02: Table 'test.tt_i' doesn't existCREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i_1 (t_i_1 INT) ENGINE=InnoDB;
CREATE TABLE t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE t_i_3 (t_i_3 INT, FOREIGN KEY(t_i_3) REFERENCES t_i_2(t_i_2)) ENGINE=InnoDB;
DROP TABLES t_m, t_i_1, t_i_2;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't_i_3_ibfk_1' on table 't_i_3'.SELECT * FROM t_m;
t_mSELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_2;
t_i_2SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_m, t_i_1;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i_1;
t_i_1SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_i_1, t_i_3;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_3;
t_i_3DROP TABLES t_i_1, t_i_3, t_i_2;
CREATE TABLE t1 (a INT) ENGINE=MyISAM;
FLUSH TABLE t1;
DROP TABLE t1;
ERROR HY000: Storage engine can't drop table 'test.t1' because it is missing. Use DROP TABLE IF EXISTS to remove it from data-dictionary.DROP TABLE IF EXISTS t1;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE mysqltest.t_i_1 (t_i_1 INT) ENGINE= InnoDB;
CREATE TABLE mysqltest.t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE= InnoDB;
CREATE FUNCTION mysqltest.f1() RETURNS INT RETURN 0;
CREATE TABLE t1 (fk INT,FOREIGN KEY (fk) REFERENCES mysqltest.t_i_2(t_i_2))ENGINE=InnoDB;
DROP DATABASE mysqltest;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't1_ibfk_1' on table 't1'.SELECT * FROM mysqltest.t_m;
t_mSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP TABLE t1;
SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
SET SESSION DEBUG='+d,fail_drop_db_routines';
DROP DATABASE mysqltest;
ERROR HY000: Failed to DROP ROUTINE SET SESSION DEBUG='-d,fail_drop_db_routines';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP DATABASE mysqltest;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t1 (i INT) ENGINE=MYISAM;
SET DEBUG='+d,crash_copy_before_commit';
ALTER TABLE mysqltest.t1 ADD COLUMN j INT;
ERROR HY000: Lost connection to MySQL server during queryt1.MYDDROP DATABASE mysqltest;
CREATE TABLE t(i INT);
SET debug = '+d,simulate_failure_in_before_commit_hook';
SET debug = '-d,simulate_failure_in_before_commit_hook';
DROP TABLE t;
CREATE TABLE t1 (i INT) ENGINE=MyISAM;
connect  con1, localhost, root;
SET SESSION DEBUG='+d,fail_while_dropping_dd_object';
DROP TABLE t1;
ERROR HY000: Lock wait timeout exceeded; try restarting transactionSET SESSION DEBUG='-d,fail_while_dropping_dd_object';
connection default;
DROP TABLE IF EXISTS t1;
connection con1;
disconnect con1;
connection default;
CREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i (t_i INT) ENGINE=InnoDB;
CREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TABLES t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
ERROR 42S02: Unknown table 'test.t_no_such_table,test.t_no_such_table_either'SELECT * FROM t_m, t_i, tt_m, tt_i;
t_m	t_i	tt_m	tt_iDROP TEMPORARY TABLES tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
ERROR 42S02: Unknown table 'test.tt_no_such_table,test.tt_no_such_table_either'SELECT * FROM tt_m, tt_i;
tt_m	tt_iDROP TABLES IF EXISTS t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
Note	1051	Unknown table 'test.t_no_such_table'Note	1051	Unknown table 'test.t_no_such_table_either'SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i;
ERROR 42S02: Table 'test.t_i' doesn't existCREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TEMPORARY TABLES IF EXISTS tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
Note	1051	Unknown table 'test.tt_no_such_table'Note	1051	Unknown table 'test.tt_no_such_table_either'SELECT * FROM tt_m;
ERROR 42S02: Table 'test.tt_m' doesn't existSELECT * FROM tt_i;
ERROR 42S02: Table 'test.tt_i' doesn't existCREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i_1 (t_i_1 INT) ENGINE=InnoDB;
CREATE TABLE t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE t_i_3 (t_i_3 INT, FOREIGN KEY(t_i_3) REFERENCES t_i_2(t_i_2)) ENGINE=InnoDB;
DROP TABLES t_m, t_i_1, t_i_2;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't_i_3_ibfk_1' on table 't_i_3'.SELECT * FROM t_m;
t_mSELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_2;
t_i_2SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_m, t_i_1;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i_1;
t_i_1SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_i_1, t_i_3;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_3;
t_i_3DROP TABLES t_i_1, t_i_3, t_i_2;
CREATE TABLE t1 (a INT) ENGINE=MyISAM;
FLUSH TABLE t1;
DROP TABLE t1;
ERROR HY000: Storage engine can't drop table 'test.t1' because it is missing. Use DROP TABLE IF EXISTS to remove it from data-dictionary.DROP TABLE IF EXISTS t1;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE mysqltest.t_i_1 (t_i_1 INT) ENGINE= InnoDB;
CREATE TABLE mysqltest.t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE= InnoDB;
CREATE FUNCTION mysqltest.f1() RETURNS INT RETURN 0;
CREATE TABLE t1 (fk INT,FOREIGN KEY (fk) REFERENCES mysqltest.t_i_2(t_i_2))ENGINE=InnoDB;
DROP DATABASE mysqltest;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't1_ibfk_1' on table 't1'.SELECT * FROM mysqltest.t_m;
t_mSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP TABLE t1;
SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
SET SESSION DEBUG='+d,fail_drop_db_routines';
DROP DATABASE mysqltest;
ERROR HY000: Failed to DROP ROUTINE SET SESSION DEBUG='-d,fail_drop_db_routines';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP DATABASE mysqltest;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t1 (i INT) ENGINE=MYISAM;
SET DEBUG='+d,crash_copy_before_commit';
ALTER TABLE mysqltest.t1 ADD COLUMN j INT;
ERROR HY000: Lost connection to MySQL server during queryt1.MYDDROP DATABASE mysqltest;
CREATE TABLE t(i INT);
SET debug = '+d,simulate_failure_in_before_commit_hook';
SET debug = '-d,simulate_failure_in_before_commit_hook';
DROP TABLE t;
CREATE TABLE t1 (i INT) ENGINE=MyISAM;
connect  con1, localhost, root;
SET SESSION DEBUG='+d,fail_while_dropping_dd_object';
DROP TABLE t1;
ERROR HY000: Lock wait timeout exceeded; try restarting transactionSET SESSION DEBUG='-d,fail_while_dropping_dd_object';
connection default;
DROP TABLE IF EXISTS t1;
connection con1;
disconnect con1;
connection default;
CREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i (t_i INT) ENGINE=InnoDB;
CREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TABLES t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
ERROR 42S02: Unknown table 'test.t_no_such_table,test.t_no_such_table_either'SELECT * FROM t_m, t_i, tt_m, tt_i;
t_m	t_i	tt_m	tt_iDROP TEMPORARY TABLES tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
ERROR 42S02: Unknown table 'test.tt_no_such_table,test.tt_no_such_table_either'SELECT * FROM tt_m, tt_i;
tt_m	tt_iDROP TABLES IF EXISTS t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
Note	1051	Unknown table 'test.t_no_such_table'Note	1051	Unknown table 'test.t_no_such_table_either'SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i;
ERROR 42S02: Table 'test.t_i' doesn't existCREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TEMPORARY TABLES IF EXISTS tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
Note	1051	Unknown table 'test.tt_no_such_table'Note	1051	Unknown table 'test.tt_no_such_table_either'SELECT * FROM tt_m;
ERROR 42S02: Table 'test.tt_m' doesn't existSELECT * FROM tt_i;
ERROR 42S02: Table 'test.tt_i' doesn't existCREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i_1 (t_i_1 INT) ENGINE=InnoDB;
CREATE TABLE t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE t_i_3 (t_i_3 INT, FOREIGN KEY(t_i_3) REFERENCES t_i_2(t_i_2)) ENGINE=InnoDB;
DROP TABLES t_m, t_i_1, t_i_2;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't_i_3_ibfk_1' on table 't_i_3'.SELECT * FROM t_m;
t_mSELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_2;
t_i_2SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_m, t_i_1;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i_1;
t_i_1SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_i_1, t_i_3;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_3;
t_i_3DROP TABLES t_i_1, t_i_3, t_i_2;
CREATE TABLE t1 (a INT) ENGINE=MyISAM;
FLUSH TABLE t1;
DROP TABLE t1;
ERROR HY000: Storage engine can't drop table 'test.t1' because it is missing. Use DROP TABLE IF EXISTS to remove it from data-dictionary.DROP TABLE IF EXISTS t1;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE mysqltest.t_i_1 (t_i_1 INT) ENGINE= InnoDB;
CREATE TABLE mysqltest.t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE= InnoDB;
CREATE FUNCTION mysqltest.f1() RETURNS INT RETURN 0;
CREATE TABLE t1 (fk INT,FOREIGN KEY (fk) REFERENCES mysqltest.t_i_2(t_i_2))ENGINE=InnoDB;
DROP DATABASE mysqltest;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't1_ibfk_1' on table 't1'.SELECT * FROM mysqltest.t_m;
t_mSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP TABLE t1;
SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
SET SESSION DEBUG='+d,fail_drop_db_routines';
DROP DATABASE mysqltest;
ERROR HY000: Failed to DROP ROUTINE SET SESSION DEBUG='-d,fail_drop_db_routines';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP DATABASE mysqltest;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t1 (i INT) ENGINE=MYISAM;
SET DEBUG='+d,crash_copy_before_commit';
ALTER TABLE mysqltest.t1 ADD COLUMN j INT;
ERROR HY000: Lost connection to MySQL server during queryt1.MYDDROP DATABASE mysqltest;
CREATE TABLE t(i INT);
SET debug = '+d,simulate_failure_in_before_commit_hook';
SET debug = '-d,simulate_failure_in_before_commit_hook';
DROP TABLE t;
CREATE TABLE t1 (i INT) ENGINE=MyISAM;
connect  con1, localhost, root;
SET SESSION DEBUG='+d,fail_while_dropping_dd_object';
DROP TABLE t1;
ERROR HY000: Lock wait timeout exceeded; try restarting transactionSET SESSION DEBUG='-d,fail_while_dropping_dd_object';
connection default;
DROP TABLE IF EXISTS t1;
connection con1;
disconnect con1;
connection default;
CREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i (t_i INT) ENGINE=InnoDB;
CREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TABLES t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
ERROR 42S02: Unknown table 'test.t_no_such_table,test.t_no_such_table_either'SELECT * FROM t_m, t_i, tt_m, tt_i;
t_m	t_i	tt_m	tt_iDROP TEMPORARY TABLES tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
ERROR 42S02: Unknown table 'test.tt_no_such_table,test.tt_no_such_table_either'SELECT * FROM tt_m, tt_i;
tt_m	tt_iDROP TABLES IF EXISTS t_m, t_i, tt_m, tt_i, t_no_such_table, t_no_such_table_either;
Note	1051	Unknown table 'test.t_no_such_table'Note	1051	Unknown table 'test.t_no_such_table_either'SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i;
ERROR 42S02: Table 'test.t_i' doesn't existCREATE TEMPORARY TABLE tt_m (tt_m INT) ENGINE=MyISAM;
CREATE TEMPORARY TABLE tt_i (tt_i INT) ENGINE=InnoDB;
DROP TEMPORARY TABLES IF EXISTS tt_m, tt_i, tt_no_such_table, tt_no_such_table_either;
Note	1051	Unknown table 'test.tt_no_such_table'Note	1051	Unknown table 'test.tt_no_such_table_either'SELECT * FROM tt_m;
ERROR 42S02: Table 'test.tt_m' doesn't existSELECT * FROM tt_i;
ERROR 42S02: Table 'test.tt_i' doesn't existCREATE TABLE t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE t_i_1 (t_i_1 INT) ENGINE=InnoDB;
CREATE TABLE t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE=InnoDB;
CREATE TABLE t_i_3 (t_i_3 INT, FOREIGN KEY(t_i_3) REFERENCES t_i_2(t_i_2)) ENGINE=InnoDB;
DROP TABLES t_m, t_i_1, t_i_2;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't_i_3_ibfk_1' on table 't_i_3'.SELECT * FROM t_m;
t_mSELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_2;
t_i_2SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_m, t_i_1;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_m;
ERROR 42S02: Table 'test.t_m' doesn't existSELECT * FROM t_i_1;
t_i_1SET SESSION DEBUG='+d,rm_table_no_locks_abort_after_atomic_tables';
DROP TABLES t_i_1, t_i_3;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_table_no_locks_abort_after_atomic_tables';
SELECT * FROM t_i_1;
t_i_1SELECT * FROM t_i_3;
t_i_3DROP TABLES t_i_1, t_i_3, t_i_2;
CREATE TABLE t1 (a INT) ENGINE=MyISAM;
FLUSH TABLE t1;
DROP TABLE t1;
ERROR HY000: Storage engine can't drop table 'test.t1' because it is missing. Use DROP TABLE IF EXISTS to remove it from data-dictionary.DROP TABLE IF EXISTS t1;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
CREATE TABLE mysqltest.t_i_1 (t_i_1 INT) ENGINE= InnoDB;
CREATE TABLE mysqltest.t_i_2 (t_i_2 INT PRIMARY KEY) ENGINE= InnoDB;
CREATE FUNCTION mysqltest.f1() RETURNS INT RETURN 0;
CREATE TABLE t1 (fk INT,FOREIGN KEY (fk) REFERENCES mysqltest.t_i_2(t_i_2))ENGINE=InnoDB;
DROP DATABASE mysqltest;
ERROR HY000: Cannot drop table 't_i_2' referenced by a foreign key constraint 't1_ibfk_1' on table 't1'.SELECT * FROM mysqltest.t_m;
t_mSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP TABLE t1;
SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()SET SESSION DEBUG='+d,rm_db_fail_after_dropping_tables';
DROP DATABASE mysqltest;
ERROR HY000: Unknown errorSET SESSION DEBUG='-d,rm_db_fail_after_dropping_tables';
SELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()CREATE TABLE mysqltest.t_m (t_m INT) ENGINE=MyISAM;
SET SESSION DEBUG='+d,fail_drop_db_routines';
DROP DATABASE mysqltest;
ERROR HY000: Failed to DROP ROUTINE SET SESSION DEBUG='-d,fail_drop_db_routines';
SELECT * FROM mysqltest.t_m;
ERROR 42S02: Table 'mysqltest.t_m' doesn't existSELECT * FROM mysqltest.t_i_1;
t_i_1SELECT * FROM mysqltest.t_i_2;
t_i_2SELECT mysqltest.f1();
mysqltest.f1()DROP DATABASE mysqltest;
CREATE DATABASE mysqltest;
CREATE TABLE mysqltest.t1 (i INT) ENGINE=MYISAM;
SET DEBUG='+d,crash_copy_before_commit';
ALTER TABLE mysqltest.t1 ADD COLUMN j INT;
ERROR HY000: Lost connection to MySQL server during queryt1.MYDDROP DATABASE mysqltest;
CREATE TABLE t(i INT);
SET debug = '+d,simulate_failure_in_before_commit_hook';
SET debug = '-d,simulate_failure_in_before_commit_hook';
DROP TABLE t;
