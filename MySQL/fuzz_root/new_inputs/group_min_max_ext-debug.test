  evalCREATE TABLE t (a INT, b INT, c INT, d INT, KEY k1(a, b, c, d)) ENGINE=$engine;
CREATE TEMPORARY TABLE a (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE b (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE c (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE d (a INT);
while ($i)    dec $i;
INSERT INTO t SELECT a.a, b.a, c.a, d.a FROM a, b, c, d;
INSERT INTO t VALUES (11, 2, 3, -10);
INSERT INTO t VALUES (11, 3, 3, 20);
INSERT INTO t VALUES (11, 15, NULL, -20);
INSERT INTO t VALUES (11, NULL, 40, 30);
INSERT INTO t VALUES (12, 15, 3, -15);
INSERT INTO t VALUES (12, 15, 40, -20);
INSERT INTO t VALUES (12, 2, 40, -23);
INSERT INTO t VALUES (12, 2, 3, NULL);
DROP TEMPORARY TABLE a, b, c, d;
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
ALTER TABLE t DROP KEY k1;
ALTER TABLE t ADD KEY k1(a, b DESC, c, d DESC);
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
DROP TABLE t;
  evalCREATE TABLE t (a INT, b INT, c INT, d INT, KEY k1(a, b, c, d)) ENGINE=$engine;
CREATE TEMPORARY TABLE a (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE b (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE c (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE d (a INT);
while ($i)    dec $i;
INSERT INTO t SELECT a.a, b.a, c.a, d.a FROM a, b, c, d;
INSERT INTO t VALUES (11, 2, 3, -10);
INSERT INTO t VALUES (11, 3, 3, 20);
INSERT INTO t VALUES (11, 15, NULL, -20);
INSERT INTO t VALUES (11, NULL, 40, 30);
INSERT INTO t VALUES (12, 15, 3, -15);
INSERT INTO t VALUES (12, 15, 40, -20);
INSERT INTO t VALUES (12, 2, 40, -23);
INSERT INTO t VALUES (12, 2, 3, NULL);
DROP TEMPORARY TABLE a, b, c, d;
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
ALTER TABLE t DROP KEY k1;
ALTER TABLE t ADD KEY k1(a, b DESC, c, d DESC);
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
DROP TABLE t;
  evalCREATE TABLE t (a INT, b INT, c INT, d INT, KEY k1(a, b, c, d)) ENGINE=$engine;
CREATE TEMPORARY TABLE a (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE b (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE c (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE d (a INT);
while ($i)    dec $i;
INSERT INTO t SELECT a.a, b.a, c.a, d.a FROM a, b, c, d;
INSERT INTO t VALUES (11, 2, 3, -10);
INSERT INTO t VALUES (11, 3, 3, 20);
INSERT INTO t VALUES (11, 15, NULL, -20);
INSERT INTO t VALUES (11, NULL, 40, 30);
INSERT INTO t VALUES (12, 15, 3, -15);
INSERT INTO t VALUES (12, 15, 40, -20);
INSERT INTO t VALUES (12, 2, 40, -23);
INSERT INTO t VALUES (12, 2, 3, NULL);
DROP TEMPORARY TABLE a, b, c, d;
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
ALTER TABLE t DROP KEY k1;
ALTER TABLE t ADD KEY k1(a, b DESC, c, d DESC);
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
DROP TABLE t;
  evalCREATE TABLE t (a INT, b INT, c INT, d INT, KEY k1(a, b, c, d)) ENGINE=$engine;
CREATE TEMPORARY TABLE a (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE b (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE c (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE d (a INT);
while ($i)    dec $i;
INSERT INTO t SELECT a.a, b.a, c.a, d.a FROM a, b, c, d;
INSERT INTO t VALUES (11, 2, 3, -10);
INSERT INTO t VALUES (11, 3, 3, 20);
INSERT INTO t VALUES (11, 15, NULL, -20);
INSERT INTO t VALUES (11, NULL, 40, 30);
INSERT INTO t VALUES (12, 15, 3, -15);
INSERT INTO t VALUES (12, 15, 40, -20);
INSERT INTO t VALUES (12, 2, 40, -23);
INSERT INTO t VALUES (12, 2, 3, NULL);
DROP TEMPORARY TABLE a, b, c, d;
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
ALTER TABLE t DROP KEY k1;
ALTER TABLE t ADD KEY k1(a, b DESC, c, d DESC);
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
DROP TABLE t;
  evalCREATE TABLE t (a INT, b INT, c INT, d INT, KEY k1(a, b, c, d)) ENGINE=$engine;
CREATE TEMPORARY TABLE a (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE b (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE c (a INT);
while ($i)    dec $i;
CREATE TEMPORARY TABLE d (a INT);
while ($i)    dec $i;
INSERT INTO t SELECT a.a, b.a, c.a, d.a FROM a, b, c, d;
INSERT INTO t VALUES (11, 2, 3, -10);
INSERT INTO t VALUES (11, 3, 3, 20);
INSERT INTO t VALUES (11, 15, NULL, -20);
INSERT INTO t VALUES (11, NULL, 40, 30);
INSERT INTO t VALUES (12, 15, 3, -15);
INSERT INTO t VALUES (12, 15, 40, -20);
INSERT INTO t VALUES (12, 2, 40, -23);
INSERT INTO t VALUES (12, 2, 3, NULL);
DROP TEMPORARY TABLE a, b, c, d;
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
ALTER TABLE t DROP KEY k1;
ALTER TABLE t ADD KEY k1(a, b DESC, c, d DESC);
ANALYZE TABLE t;
SET debug= '+d,bug30769515_QUERY_INTERRUPTED';
SELECT a, b, MAX(d), MIN(d) FROM tWHERE (a > 6) AND (c = 3 OR c = 40) AND      (d = 11 OR d = 12)GROUP BY a, b;
SET debug= '-d,bug30769515_QUERY_INTERRUPTED';
DROP TABLE t;
