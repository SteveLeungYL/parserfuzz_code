remove_file $MYSQLTEST_VARDIR/tmp/outfile.test;
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   drop table if exists t1;
create table t1 (`a` blob);
insert into t1 values("hello world"),("Hello mars"),(NULL);
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.1"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1 limit 1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.2"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1 where a is null;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.3"));
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.not-exist"));
drop table t1;
disable_query_log;
eval select 1 into outfile "../../tmp/outfile-test.4";
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.4"));
CREATE TABLE t1 (a INT);
EXPLAIN  SELECT /*+ SET_VAR(optimizer_switch='hypergraph_optimizer=off') */ *  INTO OUTFILE '/tmp/t1.txt'  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\r\n'  FROM t1;
DROP TABLE t1;
disable_query_log;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM information_schema.schemata LIMIT 0, 5;
use information_schema;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM schemata LIMIT 0, 5;
enable_query_log;
use test;
create table t1(a int);
eval select * into outfile "$MYSQL_TEST_DIR/outfile-test1" from t1;
drop table t1;
create database mysqltest;
create user user_1@localhost;
grant all on mysqltest.* to user_1@localhost;
connect (con28181_1,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_1;
grant file on *.* to user_1@localhost;
connect (con28181_2,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_2;
use test;
revoke all privileges on *.* from user_1@localhost;
drop user user_1@localhost;
drop database mysqltest;
remove_file $MYSQLTEST_VARDIR/tmp/outfile.test;
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   drop table if exists t1;
create table t1 (`a` blob);
insert into t1 values("hello world"),("Hello mars"),(NULL);
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.1"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1 limit 1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.2"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1 where a is null;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.3"));
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.not-exist"));
drop table t1;
disable_query_log;
eval select 1 into outfile "../../tmp/outfile-test.4";
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.4"));
CREATE TABLE t1 (a INT);
EXPLAIN  SELECT /*+ SET_VAR(optimizer_switch='hypergraph_optimizer=off') */ *  INTO OUTFILE '/tmp/t1.txt'  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\r\n'  FROM t1;
DROP TABLE t1;
disable_query_log;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM information_schema.schemata LIMIT 0, 5;
use information_schema;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM schemata LIMIT 0, 5;
enable_query_log;
use test;
create table t1(a int);
eval select * into outfile "$MYSQL_TEST_DIR/outfile-test1" from t1;
drop table t1;
create database mysqltest;
create user user_1@localhost;
grant all on mysqltest.* to user_1@localhost;
connect (con28181_1,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_1;
grant file on *.* to user_1@localhost;
connect (con28181_2,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_2;
use test;
revoke all privileges on *.* from user_1@localhost;
drop user user_1@localhost;
drop database mysqltest;
remove_file $MYSQLTEST_VARDIR/tmp/outfile.test;
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   drop table if exists t1;
create table t1 (`a` blob);
insert into t1 values("hello world"),("Hello mars"),(NULL);
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.1"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1 limit 1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.2"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1 where a is null;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.3"));
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.not-exist"));
drop table t1;
disable_query_log;
eval select 1 into outfile "../../tmp/outfile-test.4";
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.4"));
CREATE TABLE t1 (a INT);
EXPLAIN  SELECT /*+ SET_VAR(optimizer_switch='hypergraph_optimizer=off') */ *  INTO OUTFILE '/tmp/t1.txt'  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\r\n'  FROM t1;
DROP TABLE t1;
disable_query_log;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM information_schema.schemata LIMIT 0, 5;
use information_schema;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM schemata LIMIT 0, 5;
enable_query_log;
use test;
create table t1(a int);
eval select * into outfile "$MYSQL_TEST_DIR/outfile-test1" from t1;
drop table t1;
create database mysqltest;
create user user_1@localhost;
grant all on mysqltest.* to user_1@localhost;
connect (con28181_1,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_1;
grant file on *.* to user_1@localhost;
connect (con28181_2,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_2;
use test;
revoke all privileges on *.* from user_1@localhost;
drop user user_1@localhost;
drop database mysqltest;
remove_file $MYSQLTEST_VARDIR/tmp/outfile.test;
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   drop table if exists t1;
create table t1 (`a` blob);
insert into t1 values("hello world"),("Hello mars"),(NULL);
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.1"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1 limit 1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.2"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1 where a is null;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.3"));
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.not-exist"));
drop table t1;
disable_query_log;
eval select 1 into outfile "../../tmp/outfile-test.4";
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.4"));
CREATE TABLE t1 (a INT);
EXPLAIN  SELECT /*+ SET_VAR(optimizer_switch='hypergraph_optimizer=off') */ *  INTO OUTFILE '/tmp/t1.txt'  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\r\n'  FROM t1;
DROP TABLE t1;
disable_query_log;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM information_schema.schemata LIMIT 0, 5;
use information_schema;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM schemata LIMIT 0, 5;
enable_query_log;
use test;
create table t1(a int);
eval select * into outfile "$MYSQL_TEST_DIR/outfile-test1" from t1;
drop table t1;
create database mysqltest;
create user user_1@localhost;
grant all on mysqltest.* to user_1@localhost;
connect (con28181_1,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_1;
grant file on *.* to user_1@localhost;
connect (con28181_2,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_2;
use test;
revoke all privileges on *.* from user_1@localhost;
drop user user_1@localhost;
drop database mysqltest;
remove_file $MYSQLTEST_VARDIR/tmp/outfile.test;
     let $wait_counter= `SELECT $wait_timeout * 10`;
while ($wait_counter)   let $current_sessions= query_get_value(SHOW GLOBAL STATUS LIKE 'Threads_connected', Value, 1);
   let $success= `SELECT $current_sessions <= $count_sessions`;
   if ($success)   {      let $wait_counter= 0;
   }   if (!$success)   {      sleep 0.1;
      dec $wait_counter;
   }         SHOW PROCESSLIST;
   drop table if exists t1;
create table t1 (`a` blob);
insert into t1 values("hello world"),("Hello mars"),(NULL);
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.1"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1 limit 1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.2"));
disable_query_log;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1 where a is null;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.3"));
disable_query_log;
eval select * into outfile "../../tmp/outfile-test.1" from t1;
eval select * into dumpfile "../../tmp/outfile-test.2" from t1;
eval select * into dumpfile "../../tmp/outfile-test.3" from t1;
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.not-exist"));
drop table t1;
disable_query_log;
eval select 1 into outfile "../../tmp/outfile-test.4";
enable_query_log;
select load_file(concat(@tmpdir,"/outfile-test.4"));
CREATE TABLE t1 (a INT);
EXPLAIN  SELECT /*+ SET_VAR(optimizer_switch='hypergraph_optimizer=off') */ *  INTO OUTFILE '/tmp/t1.txt'  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\r\n'  FROM t1;
DROP TABLE t1;
disable_query_log;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM information_schema.schemata LIMIT 0, 5;
use information_schema;
eval SELECT * INTO OUTFILE "../../tmp/outfile-test.4"FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'FROM schemata LIMIT 0, 5;
enable_query_log;
use test;
create table t1(a int);
eval select * into outfile "$MYSQL_TEST_DIR/outfile-test1" from t1;
drop table t1;
create database mysqltest;
create user user_1@localhost;
grant all on mysqltest.* to user_1@localhost;
connect (con28181_1,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_1;
grant file on *.* to user_1@localhost;
connect (con28181_2,localhost,user_1,,mysqltest);
eval select schema_nameinto outfile "../../tmp/outfile-test.4"fields terminated by ',' optionally enclosed by '"' lines terminated by '\n'from information_schema.schematawhere schema_name like 'mysqltest';
connection default;
disconnect con28181_2;
use test;
revoke all privileges on *.* from user_1@localhost;
drop user user_1@localhost;
drop database mysqltest;
